<!DOCTYPE html>
<!--
  Travel Explorer

  This single‑page site is designed to teach visitors about destinations around the world
  and includes a handful of handy tools (time zone converter, currency converter,
  measurement converter, IP lookup) plus a simple form for sharing photos and stories
  from past or upcoming trips.  The page is intentionally kept basic so that it
  loads quickly and remains usable on phones, tablets and desktops alike.

  The styles lean heavily on TailwindCSS via its CDN build.  A small amount of
  custom CSS is sprinkled in to handle the scroll‑to‑top button and maintain
  smooth scrolling.  All of the interactive behaviour lives in a single
  JavaScript block near the bottom of the file.  That script declares a
  `countriesData` object which holds a handful of representative travel
  destinations and their associated information.  When the user chooses a
  destination from the dropdown, the page updates the history, attractions,
  food recommendations, safety tips, phrases and emergency numbers accordingly.

  Visitors can also use the tools section to convert time zones, currencies
  and measurements, check their public IP address or leave a comment with a
  photo about their travels.  Comments are appended to the bottom of the
  comments section and persist only for the current session (nothing is
  transmitted to any server).
-->
<html lang="en">
<head>
    <meta charset="UTF‑8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Good People n Places</title>
    <!-- Include Tailwind CSS via CDN for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        /* Scroll to top button styling */
        #scrollToTopBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 50;
            background-color: #3B82F6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s, transform 0.3s;
        }
        #scrollToTopBtn:hover {
            background-color: #2563EB;
            transform: translateY(-2px);
        }

        /* Gradient button utility used throughout the site */
        .button-gradient {
            background-image: linear-gradient(to right, #6EE7B7, #3B82F6);
            color: #ffffff;
        }
        .button-gradient:hover {
            background-image: linear-gradient(to left, #6EE7B7, #3B82F6);
        }

        /* Map container and marker styling */
        #map-container {
            position: relative;
            /* Remove explicit size restrictions so the map container can adapt to a horizontal layout. */
        }
        /* The red marker indicating the selected country on the map */
        #map-marker {
            width: 12px;
            height: 12px;
            background-color: #ef4444; /* red-500 from Tailwind */
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
            position: absolute;
            transform: translate(-50%, -50%);
        }

        /* Use the hero image as the background for the hero section.  By defining it in CSS we avoid issues with inline style URL parsing. */
        #hero {
            background-image: url("./hero-image.png");
            background-size: cover;
            background-position: center;
        }
    </style>

    <!-- Hide deprecated join/login/comment UI elements while using social sharing -->
    <style>
      #join-btn,
      #login-btn,
      #profile-card,
      #comment-form,
      #comments-display,
      #join-overlay,
      #login-overlay {
        display: none !important;
      }
    </style>

    <!-- Leaflet (for English-labeled basemap) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Hero Section with image set via CSS background -->
    <header id="hero" class="relative h-[60vh] md:h-[75vh] flex items-center justify-center text-white overflow-hidden">
        <!-- Overlay content with semi‑transparent background to improve legibility.  Limit the width on large screens so that the background banner remains visible around the edges. -->
        <div class="relative z-10 bg-black bg-opacity-30 p-8 rounded-lg text-center max-w-4xl mx-4 w-full">
            <!-- Use whitespace‑nowrap to force the title onto a single line.  If the viewport becomes too narrow, horizontal scrolling will occur rather than wrapping. -->
            <!-- Allow the hero title to wrap on small screens to avoid horizontal overflow.  Maintain no wrapping on medium and larger screens. -->
            <h1 class="md:whitespace-nowrap text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Good People n Places</h1>
            <p class="text-lg md:text-2xl mb-8 drop-shadow">Discover cultures, learn tips and share your adventures.</p>
            <!-- Replace inline scroll behaviour with a dedicated button that triggers a random recommendation modal -->
            <button id="start-explore-btn" class="button-gradient text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:scale-105 transition duration-300">Start Exploring</button>
        </div>
        <!-- Logo thumbnail anchored to the bottom-left of the hero section -->
        <!-- The image is absolutely positioned relative to the hero container so that it does not interfere with existing layout or functionality. The small size ensures it acts as a subtle branding element. -->
        <!-- Use the provided transparent logo file for the site branding. -->
        <img src="./logo-transparent.png" alt="Good People n Places logo"
             class="absolute bottom-2 left-2 w-24 h-24 sm:bottom-2 sm:left-2 sm:w-32 sm:h-32 md:bottom-4 md:left-4 md:w-40 md:h-40 lg:bottom-4 lg:left-4 lg:w-48 lg:h-48 xl:bottom-4 xl:left-4 xl:w-64 xl:h-64 object-contain rounded-full shadow-md hover:scale-105 transition duration-300 cursor-pointer"
             onclick="document.getElementById('social-links').classList.toggle('hidden')" />

        <!-- Hidden social links pop-up; shows icons for Facebook, Instagram, TikTok and X when the logo is clicked. -->
        <div id="social-links" class="hidden absolute bottom-2 left-28 sm:left-32 md:left-40 lg:left-48 xl:left-64 bg-white bg-opacity-90 text-gray-800 p-3 rounded-lg shadow-xl flex flex-row items-center space-x-4">
            <a href="https://www.facebook.com/profile.php?id=61580330943209" target="_blank" class="flex items-center space-x-2 cursor-pointer">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/facebook.svg" alt="Facebook logo" class="w-6 h-6" />
                <span class="font-medium">Facebook</span>
            </a>
            <a href="https://www.instagram.com/goodpeoplen74/" target="_blank" class="flex items-center space-x-2 cursor-pointer">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/instagram.svg" alt="Instagram logo" class="w-6 h-6" />
                <span class="font-medium">Instagram</span>
            </a>
            <a href="https://www.tiktok.com/@goodpeoplenplaces?lang=en" target="_blank" class="flex items-center space-x-2 cursor-pointer">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/tiktok.svg" alt="TikTok logo" class="w-6 h-6" />
                <span class="font-medium">TikTok</span>
            </a>
            <a href="https://x.com/GoodPeople1974" target="_blank" class="flex items-center space-x-2 cursor-pointer">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/twitter.svg" alt="X logo" class="w-6 h-6" />
                <span class="font-medium">X</span>
            </a>
        </div>
    </header>

    <!-- Main navigation bar: provides quick links to key sections.  It is sticky so it remains visible at the top when scrolling.  Each tab is styled like a slanted folder with the same gradient as the Start Exploring button and reacts on hover. -->
    <nav id="main-nav" class="bg-white sticky top-0 z-40">
        <!-- Spread tabs evenly across the full width.  Each wrapper uses flex-1 to occupy equal space. -->
        <!-- On small screens the navigation tabs wrap and are centered.  On medium screens and up they align in a single row and spread evenly across the full width. -->
        <div class="w-full flex flex-wrap md:flex-nowrap justify-center md:justify-between px-4 md:px-6 py-3 text-sm md:text-base">
            <!-- Home tab -->
            <div class="relative -skew-x-12 md:flex-1 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                <a href="#hero" class="button-gradient skew-x-12 block w-full px-3 md:px-4 py-2 text-white font-medium text-center shadow-md border border-gray-200 rounded-md">Home</a>
            </div>
            <!-- Destinations tab -->
            <div class="relative -skew-x-12 md:flex-1 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                <a href="#destination-section" class="button-gradient skew-x-12 block w-full px-3 md:px-4 py-2 text-white font-medium text-center shadow-md border border-gray-200 rounded-md">Destinations</a>
            </div>
            <!-- Travel Tools tab -->
            <div class="relative -skew-x-12 md:flex-1 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                <a href="#tools-section" class="button-gradient skew-x-12 block w-full px-3 md:px-4 py-2 text-white font-medium text-center shadow-md border border-gray-200 rounded-md">Travel Tools</a>
            </div>
            <!-- Learn More tab -->
            <div class="relative -skew-x-12 md:flex-1 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                <a href="#learn-more-section" class="button-gradient skew-x-12 block w-full px-3 md:px-4 py-2 text-white font-medium text-center shadow-md border border-gray-200 rounded-md">Learn More</a>
            </div>
                  <!-- Share tab (previously Join) -->
                  <div class="relative -skew-x-12 md:flex-1 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                      <a href="#comments-section" class="button-gradient skew-x-12 block w-full px-3 md:px-4 py-2 text-white font-medium text-center shadow-md border border-gray-200 rounded-md">Share</a>
                  </div>
        </div>

    <!-- Deep Research Overlay -->
    <!-- This overlay displays the detailed travel guide in a read‑only iframe.  Hidden by default and shown when the Deep Research button is clicked. -->
    <div id="deep-research-overlay" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 hidden">
        <div class="bg-white p-4 md:p-6 rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 h-4/5 overflow-y-auto relative">
            <!-- Close button for the deep research overlay -->
            <button id="close-deep-research-btn" class="absolute top-2 right-3 text-gray-600 hover:text-gray-900 text-xl">&#10005;</button>
            <!-- Iframe to display the travel guide.  The src is set via JavaScript when the overlay is opened. -->
            <iframe id="deep-research-iframe" src="" class="w-full h-full" frameborder="0"></iframe>
        </div>
    </div>
    </nav>

    <!-- Destination Selection and Info -->
    <!-- Destination Selection and Info Section: apply a soft blue‑green gradient background between the hero and tools sections -->
    <section id="destination-section" class="py-16 px-4 md:px-6 bg-gradient-to-b from-blue-50 to-green-50">
        <div class="container mx-auto max-w-6xl">
            <!-- Introductory banner to welcome users and summarise the mission of the site.  It appears above the featured destination section and provides a friendly, encouraging message. -->
            <div id="intro-banner" class="bg-white p-6 md:p-8 rounded-lg shadow-xl mb-8 text-center border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                <h3 class="text-2xl md:text-3xl font-bold mb-2 text-gray-800">Explore More, Spend Less ✈️</h3>
                <p class="text-gray-700 leading-relaxed">Worried about budget? Language barriers? Staying connected? Our mission is to equip you with the knowledge and tools to confidently explore new cultures, savor local flavors, and create unforgettable memories, even on a tight budget. We break down the complexities so you can focus on the adventure.</p>
                <!-- Deep Research button: opens a modal with an in‑depth travel guide.  Styled consistently with other buttons and hidden until clicked. -->
                <button id="deep-research-btn" class="button-gradient mt-4 px-4 py-2 rounded-md text-white font-medium shadow-md border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">Deep Research</button>
            </div>
            <!-- Change the heading to prompt users to choose their destination.  The selected country name will be appended via JavaScript. -->
            <h2 id="featured-title" class="text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900">Choose Your Destination</h2>
            <div class="mb-10 text-center">
                <label for="country-select" class="block text-lg font-semibold mb-2">Country:</label>
                <!-- Reduce the width of the dropdown by roughly 30% horizontally while keeping it centred.  Custom widths are used to closely approximate 70% of the previous sizes. -->
                <select id="country-select" class="p-3 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 w-[53%] md:w-[17%] lg:w-[14%] mx-auto"></select>
            </div>
            <div id="country-info" class="space-y-12">
                <!-- History box will display the country flag and history information. On medium+ screens it floats right. -->
                <!-- Wrapper that holds a coloured attractions box on the left and the history card on the right.  On medium screens and above the two panels share equal width to create a balanced, symmetric layout. -->
                <div id="history-attractions-wrapper" class="md:flex md:space-x-4">
                    <!-- Separate coloured box to display the top three attractions; its background colour is derived from the country flag.  It expands to half of the available width on medium screens and larger. -->
                    <div id="attraction-box" class="relative w-full md:flex-1 rounded-xl p-6 md:p-8 mb-4 md:mb-0 shadow-xl border border-gray-300 overflow-hidden transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                        <!-- Subtle watermark label for attractions.  Pointer events disabled so it does not capture clicks. -->
                        <div class="absolute top-3 inset-x-0 text-center text-xs md:text-sm uppercase font-semibold text-white opacity-40 pointer-events-none">Top&nbsp;3&nbsp;Attractions</div>
                        <!-- Container for the top attractions text; font sizing and spacing defined here -->
                        <div id="attraction-content" class="w-full h-full flex flex-col items-center justify-center text-lg md:text-2xl lg:text-3xl font-semibold leading-relaxed text-white"></div>
                    </div>
                    <!-- History card displaying the selected country’s history.  It also expands to half of the available width on medium screens and larger. -->
<div id="history-box" class="w-full md:flex-1 rounded-xl p-6 md:p-8 shadow-xl border border-gray-300 overflow-hidden transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl text-center text-gray-800 bg-white">
                        <h3 class="text-2xl md:text-3xl lg:text-4xl font-semibold mb-4">History of <span id="country-name"></span></h3>
                        <p id="history-text" class="leading-relaxed text-base md:text-lg lg:text-xl"></p>
                    </div>
                </div>
                <!-- Geography & Climate card: displays a world map with a marker for the selected country and a short description of its location and climate.  This section is arranged horizontally on medium screens and larger. -->
<div id="map-box" class="p-6 md:p-8 rounded-xl shadow-xl border border-gray-300 overflow-hidden bg-white transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                    <!-- Center the Geography & Climate title within the section -->
                    <h3 class="text-2xl font-semibold mb-4 text-blue-600 text-center">Geography &amp; Climate</h3>
                    <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                        <!-- Place the description box first so that it sits to the left of the map on larger screens.  On small screens it will still stack above the map. -->
                        <div class="mt-4 md:mt-0 md:w-1/2 text-gray-700 order-2 md:order-1">
                            <!-- Wrap the location and climate details in a lightly shaded box with rounded ends.
                                 The container will be populated via JavaScript.  The shading enhances
                                 readability and the rounded corners provide a softer appearance. -->
                            <div id="location-description" class="bg-gray-100 rounded-2xl p-4 md:p-6 text-gray-700"></div>
                        </div>
                        <!-- Map container now appears on the right side on larger screens. -->
                        <div id="map-container" class="relative w-full md:w-1/2 h-48 md:h-60 bg-blue-50 rounded-lg overflow-hidden order-1 md:order-2">
                            <!-- Replace the static map and marker with an interactive OpenStreetMap embed.  The iframe will be updated via JavaScript when a country is selected. -->
                            <div id="osm-map" class="absolute inset-0 w-full h-full"></div>
                        </div>
                    </div>
                </div>
                <div id="foods-box">
                    <h3 class="text-2xl font-semibold mb-2 text-blue-600">Local Foods &amp; Affordability</h3>
                    <p id="foods-intro" class="text-gray-700 mb-4"></p>
                    <div id="foods-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                        <div id="currency-card" class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Local Currency</h4>
                            <p id="currency-info" class="text-gray-700 text-sm"></p>
                        </div>
                        <div id="hotel-box" class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Hotel Affordability</h4>
                            <p id="hotel-affordability" class="text-gray-700 text-sm"></p>
                        </div>
                        <div id="cost-index-box" class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Overall Affordability</h4>
                            <div id="cost-bar" class="w-full bg-gray-200 h-4 rounded-full overflow-hidden mb-2">
                                <div id="cost-bar-inner" class="h-full bg-green-500" style="width: 50%;"></div>
                            </div>
                            <p id="cost-text" class="text-sm text-gray-700"></p>
                        </div>
                    </div>
                </div>
                <!-- Learn More section: displays safety tips, useful phrases and emergency numbers in cards -->
                <div id="learn-more-section" class="mt-12">
                <!-- Increase font size and change colour to black so this heading is one step smaller than the tools heading -->
                <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-gray-900 text-center">Learn More 📚</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <!-- What the Locals Say comes first -->
                        <div class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">What the Locals Say</h4>
                            <ul id="locals-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
                        </div>
                        <!-- Safety Tips & Etiquette comes second -->
                        <div class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Safety Tips &amp; Etiquette</h4>
                            <ul id="safety-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
                        </div>
                        <!-- Emergency numbers remain third -->
                        <div class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Emergency Numbers</h4>
                            <ul id="emergency-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
                        </div>
                        <!-- Essential phrases card remains fourth -->
                        <div class="p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-semibold mb-2">Essential Phrases</h4>
                            <!-- Category selector for phrases; allows users to choose which type of phrases to display -->
                            <select id="essential-phrase-category-select" class="mb-2 p-2 border border-gray-300 rounded-md text-sm">
                                <option value="greetings">Greetings</option>
                                <option value="food">Food Ordering</option>
                                <option value="directions">Directions</option>
                            </select>
                            <ul id="essential-phrases-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
<p id="phrases-note" class="text-base text-gray-600 mt-2 hidden"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section id="tools-section" class="py-16 px-4 md:px-6 bg-gray-100">
        <div class="container mx-auto max-w-6xl">
            <!-- Updated title includes a measuring tape emoji to reinforce the tools theme -->
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900">Handy Travel Tools 📏</h2>
            <!-- Tools are organised into a two‑column grid on medium screens and above.  The left column stacks the conversion tools vertically.  The right column contains other utilities aligned with their counterparts. -->
            <div class="md:grid md:grid-cols-2 md:gap-4">
                <!-- Left column: conversion tools stacked vertically -->
                <div class="space-y-6">
                    <!-- Time Zone Converter -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Time Zone Converter</h3>
                        <!-- Display the user’s local time and the selected destination’s time.  No dropdown is required. -->
                        <p id="local-time-display" class="text-lg font-medium text-gray-800 mb-2"></p>
                        <p id="destination-time-display" class="text-lg font-medium text-blue-600"></p>
                    </div>
                    <!-- Currency Converter -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Currency Converter</h3>
                        <p id="currency-note" class="text-sm text-gray-500 mb-4">Loading exchange rates…</p>
                        <!-- Wrap fields responsively on all screen sizes.  On small screens the inputs stack vertically; from the small breakpoint onwards they form a row that can wrap if the available width is limited (e.g., mobile phones in landscape). -->
                        <div class="grid gap-y-4 sm:gap-y-2 sm:gap-x-2 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">
                            <!-- The amount input spans the full width on small screens and occupies one column on larger screens. -->
                            <input type="number" id="currency-amount" class="p-3 border border-gray-300 rounded-md w-full" placeholder="Enter amount" min="0" step="0.01">
                            <!-- Source currency selector. -->
                            <select id="from-currency" class="p-3 border border-gray-300 rounded-md w-full"></select>
                            <!-- Group the "to" label with the target currency select so they remain together when the grid wraps. -->
                            <div class="flex items-center space-x-2 w-full">
                                <span class="text-gray-600 font-semibold">to</span>
                                <select id="to-currency" class="p-3 border border-gray-300 rounded-md flex-1"></select>
                            </div>
                        </div>
                        <!-- Move the convert button below the input row for a cleaner layout -->
                        <button id="convert-currency-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300 mt-4">Convert</button>
                        <p id="currency-result" class="mt-4 text-lg font-medium text-gray-800"></p>
                    </div>
                    <!-- Measurement Converter -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Measurement Converter</h3>
                        <!-- On small screens, stack fields vertically.  From the small breakpoint onwards, align them in a row that can wrap if the available width is limited (e.g., mobile phones in landscape). -->
                        <div class="grid gap-y-4 sm:gap-y-2 sm:gap-x-2 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
                            <!-- The measurement input spans the full width on small screens and occupies one column on larger screens. -->
                            <input type="number" id="measurement-input" class="p-3 border border-gray-300 rounded-md w-full" placeholder="Enter value" step="any">
                            <select id="from-unit" class="p-3 border border-gray-300 rounded-md w-full">
                                <option value="km">Kilometers</option>
                                <option value="miles">Miles</option>
                                <option value="celsius">Celsius</option>
                                <option value="fahrenheit">Fahrenheit</option>
                                <option value="kg">Kilograms</option>
                                <option value="lbs">Pounds</option>
                            </select>
                            <!-- Group the "to" label with the target unit selector so they remain together when the grid wraps. -->
                            <div class="flex items-center space-x-2 w-full">
                                <span class="text-gray-600 font-semibold">to</span>
                                <select id="to-unit" class="p-3 border border-gray-300 rounded-md flex-1">
                                    <option value="miles">Miles</option>
                                    <option value="km">Kilometers</option>
                                    <option value="fahrenheit">Fahrenheit</option>
                                    <option value="celsius">Celsius</option>
                                    <option value="lbs">Pounds</option>
                                    <option value="kg">Kilograms</option>
                                </select>
                            </div>
                        </div>
                        <!-- Convert button placed on its own line for consistency -->
                        <button id="convert-measurement-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300 mt-4">Convert</button>
                        <p id="measurement-result" class="mt-4 text-lg font-medium text-gray-800"></p>
                    </div>
                </div>
                <!-- Right column: other utilities stacked vertically -->
                <div class="space-y-6 mt-10 md:mt-0">
                    <!-- Local Holiday Calendar Tool -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Local Holiday Calendar</h3>
                        <!-- The icon has been replaced with a button. Clicking this button opens the calendar overlay. -->
                        <button id="calendar-thumbnail" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Open Calendar</button>
                    </div>
                    <!-- Packing List Reminder Tool -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Packing List Reminder</h3>
                        <p class="text-gray-700 mb-2">Before you jet off, don’t forget these essentials:</p>
                        <ul class="list-disc list-inside space-y-1 text-gray-700 mb-4">
                            <li>Passport &amp; travel documents</li>
                            <li>Travel insurance &amp; medication</li>
                            <li>Chargers &amp; adapters</li>
                            <li>Weather‑appropriate clothing</li>
                            <li>Reusable water bottle &amp; snacks</li>
                        </ul>
                        <!-- Button to open an editable packing list.  Users can customise the list and download it. -->
                        <button id="open-packing-list-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Generate Packing List</button>
                    </div>
                    <!-- IP Address Checker Tool -->
                    <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-blue-600">Your Public IP Address</h3>
                        <button id="get-ip-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300 mb-4">Get My IP</button>
                        <p id="ip-address-display" class="text-lg font-medium text-gray-800">Your public IP address will appear here.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Holiday Calendar Overlay -->
    <!-- Recommendation Modal Overlay: triggered by the Start Exploring button.  Presents a random country recommendation and Yes/No options. -->
    <div id="recommendation-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 hidden">
        <div class="bg-white p-6 md:p-8 rounded-lg shadow-lg max-w-sm mx-4 text-center">
            <p id="recommendation-text" class="mb-4 text-lg font-medium text-gray-800"></p>
            <div class="flex justify-center space-x-4">
                <button id="recommend-yes" class="button-gradient text-white px-4 py-2 rounded-md shadow-md hover:scale-105 transition duration-300">Yes</button>
                <button id="recommend-no" class="button-gradient text-white px-4 py-2 rounded-md shadow-md hover:scale-105 transition duration-300">No</button>
            </div>
        </div>
    </div>
    <!-- This overlay displays a full‑size interactive calendar when the user clicks the static calendar image.  It is hidden by default and shown via JavaScript. -->
    <div id="calendar-overlay" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 hidden">
        <div id="calendar-modal" class="bg-white p-6 md:p-8 rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 overflow-y-auto max-h-[90vh]">
            <div class="flex items-center justify-between mb-4">
                <button id="prev-month-btn-overlay" class="button-gradient text-white px-3 py-1 rounded-md shadow-md hover:scale-105 transition duration-300">&lt;</button>
                <div id="overlay-month-year" class="font-semibold text-lg text-gray-800"></div>
                <button id="next-month-btn-overlay" class="button-gradient text-white px-3 py-1 rounded-md shadow-md hover:scale-105 transition duration-300">&gt;</button>
            </div>
            <!-- Calendar grid will be injected here dynamically -->
            <div id="interactive-calendar" class="w-full"></div>
            <div class="text-right mt-4">
                <button id="close-calendar-btn" class="text-blue-600 font-semibold hover:underline">Close</button>
            </div>
        </div>
    </div>

    <!-- Packing List Editor Overlay -->
    <!-- This overlay allows users to view, edit and download their packing list.  It is hidden by default and shown when the user
         clicks the "Generate Packing List" button in the Packing List Reminder tool. -->
    <div id="packing-list-overlay" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 hidden">
        <div class="bg-white p-6 md:p-8 rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4 text-blue-600">Customise Your Packing List</h3>
            <p class="text-gray-700 mb-2">Edit the items below as needed.  When you're ready, click the download button to save your list.</p>
            <!-- Editable packing list with headings bold and underlined.  Each list item has a checkbox. -->
            <div id="packing-list-editable" class="w-full h-64 p-3 border border-gray-300 rounded-md mb-4 overflow-y-auto" contenteditable="true">
                <h5 class="font-semibold underline">Documents &amp; Money</h5>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Passport</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Visa (if required)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Copy of passport/visa (physical and digital)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Travel insurance details</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Flight tickets/e‑tickets</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Accommodation reservations</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Copies of important prescriptions</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">International driving permit (if applicable)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Credit/debit cards</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Local currency</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Emergency contact list</label>
                <h5 class="font-semibold underline mt-4">Clothing</h5>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Underwear</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Socks</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">T‑shirts/tops</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Pants/shorts</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Sweater/jacket (layers are key!)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Rain jacket/umbrella</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Swimsuit (if applicable)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Comfortable walking shoes</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Dressier outfit (for evenings out)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Sleepwear</label>
                <h5 class="font-semibold underline mt-4">Hygiene &amp; Health</h5>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Toothbrush and toothpaste</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Shampoo and conditioner</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Soap/body wash</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Deodorant</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Sunscreen</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Insect repellent</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Hand sanitizer</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Basic first‑aid kit (band‑aids, antiseptic wipes, pain relievers)</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Any personal medications</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Lip balm</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Moisturizer</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Hairbrush/comb</label>
                <h5 class="font-semibold underline mt-4">Other Essentials</h5>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Phone and charger</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Portable power bank</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Universal travel adapter</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Headphones</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Reusable water bottle</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Small backpack/day bag</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Sunglasses</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Travel pillow</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Books/e‑reader</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Snacks</label>
                <label class="flex items-start"><input type="checkbox" class="mr-2 mt-1">Eye mask and earplugs</label>
            </div>
            <div class="flex justify-between items-center">
                <!-- Explicitly define type="button" so these buttons do not trigger unintended form submissions -->
                <button id="download-packing-list-btn" type="button" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Download Packing List</button>
                <button id="close-packing-list-btn" type="button" class="text-blue-600 font-semibold hover:underline" onclick="document.getElementById('packing-list-overlay').classList.add('hidden')">Close</button>
            </div>
        </div>
    </div>

    <!-- Comments Section -->
    <!-- Comments Section: share your travel stories.  This section has a soft blue background that differentiates it from the gradient area above. -->
    <section id="comments-section" class="py-16 px-4 md:px-6 bg-blue-50">
        <div class="container mx-auto max-w-6xl">
            <!-- Added handshake emoji to foster a sense of connection and sharing -->
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900">Share Your Trip 🤝</h2>
            <div class="flex justify-center mt-4 space-x-4">
                <!-- Join button allows new visitors to register an account.  It opens the registration modal. -->
                <button id="join-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Join</button>
                <!-- Login button opens a separate modal where existing users can authenticate using their username and password. -->
                <button id="login-btn" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Login</button>
            </div>
<div id="profile-card" class="max-w-md mx-auto mt-4 bg-white rounded-lg shadow border border-gray-200 p-4 hidden">
    <div class="flex items-center">
    <img id="profile-photo" class="w-14 h-14 rounded-full object-cover border border-gray-300 mr-3 hidden" alt="Profile">
    <div>
      <div id="profile-username" class="font-semibold text-gray-900"></div>
      <div id="profile-from" class="text-gray-600 text-sm"></div>
      <div id="profile-greeting" class="text-gray-700 text-sm"></div>
    </div>
    <!-- Action buttons for the logged in user: log out, delete photo and delete profile -->
    <div class="ml-auto flex flex-col items-end space-y-1">
      <button id="logout-btn" class="text-sm text-blue-600 hover:underline">Log out</button>
      <button id="delete-photo-btn" class="text-xs text-red-600 hover:underline">Delete Photo</button>
      <button id="delete-profile-btn" class="text-xs text-red-600 hover:underline">Delete Profile</button>
    </div>
  </div>
</div>
            <p class="text-lg md:text-xl text-gray-700 mb-8 text-center">Upload a photo and tell us about your past or future travel plans!</p>
            <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl mb-10">
                <form id="comment-form" class="space-y-4">
                    <div class="flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0">
                        <div class="flex-1">
                            <label for="comment-name" class="block text-sm font-semibold mb-1">Your Name (optional)</label>
                            <input type="text" id="comment-name" class="w-full p-3 border border-gray-300 rounded-md" placeholder="Enter your name">
                        </div>
                        <div class="flex-1">
                            <label for="comment-country" class="block text-sm font-semibold mb-1">Country</label>
                            <select id="comment-country" class="w-full p-3 border border-gray-300 rounded-md">
                                <!-- Populated via JS -->
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="comment-photo" class="block text-sm font-semibold mb-1">Photo</label>
                        <input type="file" id="comment-photo" accept="image/*" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="comment-text" class="block text-sm font-semibold mb-1">Comment and Contact Information</label>
                        <textarea id="comment-text" rows="4" class="w-full p-3 border border-gray-300 rounded-md" placeholder="Share your experience or plans..."></textarea>
                        <!-- Social media contact icons: use SVG logos from Simple Icons via jsDelivr CDN.  Each icon is wrapped in a link for future use.  -->
                        <div class="flex space-x-4 items-center mt-2">
                            <a href="https://www.facebook.com/profile.php?id=61580330943209" title="Facebook" aria-label="Facebook" target="_blank">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/facebook.svg" alt="Facebook logo" class="w-6 h-6">
                            </a>
                            <a href="https://www.instagram.com/goodpeoplen74" title="Instagram" aria-label="Instagram" target="_blank">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/instagram.svg" alt="Instagram logo" class="w-6 h-6">
                            </a>
                            <a href="https://www.tiktok.com/@goodpeoplenplaces" title="TikTok" aria-label="TikTok" target="_blank">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/tiktok.svg" alt="TikTok logo" class="w-6 h-6">
                            </a>
                            <a href="https://x.com/GoodPeople1974" title="X" aria-label="X (Twitter)" target="_blank">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/twitter.svg" alt="X logo" class="w-6 h-6">
                            </a>
                        </div>
                    </div>
                    <div class="text-right">
                        <button type="submit" class="button-gradient text-white py-2 px-6 rounded-md shadow-md hover:scale-105 transition duration-300">Add Comment</button>
                    </div>
                </form>
            </div>
            <div id="comments-display" class="space-y-6">
                <!-- User comments will be appended here -->
            </div>

            <!-- Social sharing call‑to‑action for #GoodPeoplenPlaces -->
            <p class="text-lg md:text-xl text-gray-700 mb-6 text-center">Share your travel memories via your favourite social platform!</p>
            <div class="flex justify-center flex-wrap gap-4 mb-6">
                <!-- Facebook share button -->
                <button onclick="shareToFacebook()" class="flex items-center space-x-2 button-gradient text-white py-2 px-4 rounded-md shadow-md hover:scale-105 transition duration-300">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/facebook.svg" alt="Facebook logo" class="w-6 h-6" />
                    <span>Facebook</span>
                </button>
                <!-- Instagram share button -->
                <button onclick="shareToInstagram()" class="flex items-center space-x-2 button-gradient text-white py-2 px-4 rounded-md shadow-md hover:scale-105 transition duration-300">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/instagram.svg" alt="Instagram logo" class="w-6 h-6" />
                    <span>Instagram</span>
                </button>
                <!-- TikTok share button -->
                <button onclick="shareToTikTok()" class="flex items-center space-x-2 button-gradient text-white py-2 px-4 rounded-md shadow-md hover:scale-105 transition duration-300">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/tiktok.svg" alt="TikTok logo" class="w-6 h-6" />
                    <span>TikTok</span>
                </button>
                <!-- X (Twitter) share button -->
                <button onclick="shareToX()" class="flex items-center space-x-2 button-gradient text-white py-2 px-4 rounded-md shadow-md hover:scale-105 transition duration-300">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/twitter.svg" alt="X logo" class="w-6 h-6" />
                    <span>X</span>
                </button>
            </div>
            <p class="text-center text-gray-700">Use <span class="font-semibold text-blue-600">#GoodPeoplenPlaces</span> on your posts so we can feature them!</p>
            <div id="social-gallery" class="mt-8">
                <!-- Insert your social media gallery embed code (e.g., from Taggbox or SnapWidget) here to show posts tagged with #GoodPeoplenPlaces -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 text-center">
        <div class="container mx-auto px-4">
            <p>&copy; 2025 Travel Explorer. All rights reserved.</p>
            <p class="text-sm mt-2 opacity-80">Empowering your travel dreams, one adventure at a time.</p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn" title="Go to top">⬆️</button>

    <!-- JavaScript for dynamic behaviour -->
    <script>
        // Country data: a small sample of destinations with history, attractions, foods and practical information.
        const countriesData = {
            'Australia': {
                history: `Australia's history stretches back tens of thousands of years with Indigenous cultures and more recently includes European colonisation and the development of a multicultural society. Today it's known for its stunning natural wonders, vibrant cities and relaxed outdoor lifestyle.`,
                attractions: ['Sydney Opera House', 'Great Barrier Reef', 'Uluru (Ayers Rock)'],
                foodsIntro: `Australian cuisine is influenced by many cultures. Expect hearty pies, BBQs and sweet treats like lamingtons. Eating out can be similar in price to the US, but cafes and bakeries offer affordable options.`,
                foods: [
                    { name: 'Meat Pie', description: 'A small savoury pie filled with minced meat and gravy, topped with tomato sauce.', affordability: 'Low–Medium (USD $4–7 per pie)' },
                    { name: 'Vegemite Toast', description: 'Toasted bread spread with a dark yeast extract – an acquired taste!', affordability: 'Very Low (USD $1–2 per serving)' },
                    { name: 'Lamington', description: 'Squares of sponge cake dipped in chocolate and rolled in coconut.', affordability: 'Low–Medium (USD $3–5 per piece)' }
                ],
                hotelAffordability: `Hotel prices in major cities such as Sydney or Melbourne are comparable to or slightly higher than mid‑range US hotels. Hostels and regional hotels are cheaper.`,
                relativeCostIndex: 0.95, // higher means closer to US costs
                safetyTips: [
                    'Slip, slop, slap – the sun is strong so wear sunscreen and a hat.',
                    'Drive on the left and watch for wildlife on rural roads.',
                    'Respect Indigenous culture and sacred sites.',
                    'Swim between the flags at beaches and heed lifeguard advice.'
                ],
                phrases: {
                    'Hello': 'G’day',
                    'Thank you': 'Cheers',
                    'No worries': 'No worries'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '000' }
                ],
                timeZoneId: 'Australia/Sydney',
                currencyCode: 'AUD'
            },
            'Austria': {
                history: `Austria once anchored the Habsburg Empire and remains steeped in imperial history, classical music and alpine traditions. From Vienna’s palaces to Salzburg’s baroque architecture, the country breathes culture.`,
                attractions: ['Schönbrunn Palace', 'St. Stephen’s Cathedral', 'Hallstatt'],
                foodsIntro: `Austrian dishes are hearty and comforting. Savour Wiener Schnitzel, try pastries like Apfelstrudel and sample creamy cheeses.`,
                foods: [
                    { name: 'Wiener Schnitzel', description: 'Breaded veal cutlet fried until golden brown.', affordability: 'Medium (USD $15–25 per plate)' },
                    { name: 'Apfelstrudel', description: 'Apple strudel wrapped in thin pastry layers, usually served warm.', affordability: 'Low–Medium (USD $4–8 per slice)' },
                    { name: 'Käsespätzle', description: 'Soft egg noodles with cheese and fried onions – comfort food at its best.', affordability: 'Medium (USD $10–18 per dish)' }
                ],
                hotelAffordability: `Accommodation in Vienna and Salzburg is similar in price to mid‑range US hotels, though pensions and guesthouses can offer better value.`,
                relativeCostIndex: 0.72,
                safetyTips: [
                    'Observe pedestrian signals – jaywalking is frowned upon.',
                    'Carry some cash for markets and smaller shops.',
                    'Try a coffee house; it’s a cultural institution.',
                    'Validate your public transport ticket before boarding.'
                ],
                phrases: {
                    'Hello': 'Guten Tag',
                    'Thank you': 'Danke',
                    'Please': 'Bitte'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Vienna',
                currencyCode: 'EUR'
            },
            'Colombia': {
                history: `Colombia’s history combines indigenous heritage, Spanish colonialism and a remarkable modern resurgence. Expect colourful towns, Andean peaks and Caribbean coastlines.`,
                attractions: ['Tayrona National Park', 'Ciudad Perdida', 'Comuna 13, Medellín'],
                foodsIntro: `Meals are generous and tasty. Don’t miss bandeja paisa, fresh arepas and empanadas – all at very affordable prices.`,
                foods: [
                    { name: 'Bandeja Paisa', description: 'A huge platter with rice, beans, meats, plantain and avocado.', affordability: 'Low (USD $8–15 per plate)' },
                    { name: 'Arepas', description: 'Corn cakes grilled or fried and served plain or stuffed.', affordability: 'Very Low (USD $1–3 each)' },
                    { name: 'Empanadas', description: 'Savory turnovers filled with meat, potatoes or cheese.', affordability: 'Very Low (USD $0.5–2 each)' }
                ],
                hotelAffordability: `Hotels, hostels and guesthouses are much cheaper than in the US. Even boutique options are a bargain in many areas.`,
                relativeCostIndex: 0.38,
                safetyTips: [
                    'Keep valuables out of sight and avoid flashy jewellery.',
                    'Use ride‑hailing apps rather than hailing taxis on the street.',
                    'Drink bottled water unless told tap water is safe.',
                    'Engage with locals – Colombians are famously welcoming.'
                ],
                phrases: {
                    'Hello': 'Hola',
                    'Thank you': 'Gracias',
                    'Please': 'Por favor'
                },
                emergencyContacts: [
                    { name: 'Police', number: '112' },
                    { name: 'Ambulance', number: '125' },
                    { name: 'Fire', number: '119' }
                ],
                timeZoneId: 'America/Bogota',
                currencyCode: 'COP'
            },
            'France': {
                history: `From medieval kingdoms and the French Revolution to modern times, France’s history is rich and influential. It remains a centre of art, food and fashion.`,
                attractions: ['Eiffel Tower', 'Louvre Museum', 'Palace of Versailles'],
                foodsIntro: `French cuisine is celebrated worldwide. Enjoy croissants, baguettes, local cheeses and crêpes – many of which are affordable street foods.`,
                foods: [
                    { name: 'Croissant', description: 'Buttery crescent‑shaped pastry – perfect for breakfast.', affordability: 'Very Low (USD $1.5–3 each)' },
                    { name: 'Baguette', description: 'Crusty French bread, soft inside; a staple at every meal.', affordability: 'Very Low (USD $1–2 per loaf)' },
                    { name: 'Crêpe', description: 'Thin pancakes with sweet or savoury fillings.', affordability: 'Low (USD $4–8 each)' }
                ],
                hotelAffordability: `Accommodation in Paris can be expensive, but smaller towns and guesthouses offer better value.`,
                relativeCostIndex: 0.75,
                safetyTips: [
                    'Keep an eye on your belongings in crowded areas.',
                    'Learn a few French phrases – locals appreciate the effort.',
                    'Tipping 5–10% is customary in restaurants.',
                    'Validate tickets on public transport.'
                ],
                phrases: {
                    'Hello': 'Bonjour',
                    'Thank you': 'Merci',
                    'Please': 'S’il vous plaît'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Paris',
                currencyCode: 'EUR'
            },
            'Spain': {
                history: `Spain is shaped by ancient Iberian, Roman and Moorish cultures and later became a leading maritime power in the 16th century. Its diverse regions retain distinct languages, traditions and architecture.`,
                attractions: ['Alhambra', 'Sagrada Família', 'Great Mosque of Córdoba'],
                foodsIntro: `Spanish cuisine features tapas and hearty dishes. Coastal seafood and inland stews offer a range of flavours and generally cost less than in the US.`,
                foods: [
                    { name: 'Croquetas', description: 'Creamy béchamel croquettes with fillings like ham, morcilla or cod fried until crisp', affordability: 'Low (USD $4–8 per plate)' },
                    { name: 'Tortilla Española', description: 'A thick omelet of eggs, potatoes and onions served as a tapa or main dish', affordability: 'Very Low (USD $3–5 per portion)' },
                    { name: 'Gazpacho', description: 'Chilled tomato soup blended with peppers, cucumber, garlic and herbs', affordability: 'Low (USD $3–6 per bowl)' }
                ],
                hotelAffordability: `Major cities like Madrid and Barcelona are moderately priced compared to the US. Rural guesthouses and hostels offer good value.`,
                relativeCostIndex: 0.655,
                safetyTips: [
                    'Beware of pickpockets in tourist areas and on public transport.',
                    'Adapt to local dining hours; many businesses close for siesta in the afternoon.',
                    'Carry some cash for small purchases; credit cards may not be accepted everywhere.'
                ],
                phrases: {
                    'Hello': 'Hola',
                    'Thank you': 'Gracias',
                    'Please': 'Por favor'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Ambulance', number: '061' },
                    { name: 'Fire', number: '080' },
                    { name: 'National Police', number: '091' }
                ],
                timeZoneId: 'Europe/Madrid',
                currencyCode: 'EUR'
            },
            'United States': {
                history: `The United States was founded in 1776 with the Declaration of Independence and has grown into a diverse federation of fifty states spanning North America.`,
                attractions: ['Grand Canyon', 'Statue of Liberty', 'Yellowstone'],
                foodsIntro: `American cuisine ranges from regional barbecue and burgers to Tex‑Mex and Cajun dishes. Prices vary widely but affordable options like diners and food trucks abound.`,
                foods: [
                    { name: 'Hamburger', description: 'Grilled beef patty served in a bun with toppings such as lettuce, tomato, cheese and pickles', affordability: 'Low–Medium (USD $5–12)' },
                    { name: 'Apple Pie', description: 'Classic dessert made with spiced apples baked in a flaky crust', affordability: 'Low (USD $3–5 per slice)' },
                    { name: 'Barbecue Ribs', description: 'Slow-cooked pork or beef ribs glazed with savoury-sweet sauce', affordability: 'Medium (USD $15–25 per platter)' }
                ],
                hotelAffordability: `Accommodation costs vary from budget motels to luxury hotels. Prices in major cities can be high, but suburban or rural lodging is more affordable.`,
                relativeCostIndex: 1.00,
                safetyTips: [
                    'Remember to tip service staff (15–20% is standard in restaurants).',
                    'Follow local laws and road rules; speed limits and seatbelts are enforced.',
                    'Stay aware of your surroundings in unfamiliar urban areas.'
                ],
                phrases: {
                    'Hello': 'Hello',
                    'Thank you': 'Thank you',
                    'Please': 'Please'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '911' }
                ],
                timeZoneId: 'America/New_York',
                currencyCode: 'USD'
            },
            'China': {
                history: `China's civilisation stretches back over 4,000 years, marked by imperial dynasties and inventions like paper, gunpowder and the compass. Today it is a modern global powerhouse that still treasures its cultural heritage.`,
                attractions: ['Great Wall', 'Forbidden City', 'Terracotta Army'],
                foodsIntro: `Chinese cuisine varies by region but features noodles, rice, stir‑fried dishes and rich flavours. Street food and local restaurants offer meals at very low cost.`,
                foods: [
                    { name: 'Jiaozi Dumplings', description: 'Pork, vegetables or seafood wrapped in thin dough and boiled or steamed', affordability: 'Very Low (USD $2–5 per serving)' },
                    { name: 'Peking Duck', description: 'Roasted duck with crispy skin served with pancakes, scallions and hoisin sauce', affordability: 'Medium (USD $20–40 per duck)' },
                    { name: 'Hot Pot', description: 'Interactive meal where diners cook meats and vegetables in a simmering broth', affordability: 'Low–Medium (USD $10–20 per person)' }
                ],
                hotelAffordability: `Hotels in major cities like Beijing or Shanghai range from budget hostels to luxury hotels at lower prices than similar categories in the US.`,
                relativeCostIndex: 0.493,
                safetyTips: [
                    'Carry a hotel card with the address in Chinese in case you need to show a taxi driver.',
                    'Tap water is not always potable – drink bottled water.',
                    'Be cautious when crossing roads; traffic can be hectic.'
                ],
                phrases: {
                    'Hello': 'Nǐ hǎo',
                    'Thank you': 'Xièxiè',
                    'Please': 'Qǐng'
                },
                emergencyContacts: [
                    { name: 'Police', number: '110' },
                    { name: 'Ambulance', number: '120' },
                    { name: 'Fire', number: '119' }
                ],
                timeZoneId: 'Asia/Shanghai',
                currencyCode: 'CNY'
            },
            'Italy': {
                history: `From the Roman Empire to the Renaissance, Italy’s cultural legacy spans millennia. The country today is renowned for its art, architecture and regional traditions`,
                attractions: ['Colosseum', 'Florence’s Duomo', 'Grand Canal'],
                foodsIntro: `Italian cuisine emphasises fresh ingredients and simple preparations. Pizzas, pastas and gelato are widely available and range from inexpensive street food to gourmet meals.`,
                foods: [
                    { name: 'Pizza Margherita', description: 'Thin-crust pizza topped with tomatoes, mozzarella cheese and basil', affordability: 'Low (USD $6–10 per pizza)' },
                    { name: 'Pasta Carbonara', description: 'Spaghetti tossed with eggs, pecorino cheese, guanciale and black pepper', affordability: 'Medium (USD $10–15 per plate)' },
                    { name: 'Gelato', description: 'Creamy Italian ice cream in a variety of flavours', affordability: 'Low (USD $3–5 per scoop)' }
                ],
                hotelAffordability: `Accommodation costs in Rome, Venice and Florence can be high, but countryside B&Bs and agriturismos offer affordable alternatives.`,
                relativeCostIndex: 0.703,
                safetyTips: [
                    'Beware of pickpockets in crowded tourist areas.',
                    'Dress modestly when visiting churches; shoulders and knees should be covered.',
                    'Validate tickets on trains and buses to avoid fines.'
                ],
                phrases: {
                    'Hello': 'Ciao',
                    'Thank you': 'Grazie',
                    'Please': 'Per favore'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Rome',
                currencyCode: 'EUR'
            },
            'Turkey': {
                history: `Turkey bridges Europe and Asia and has been home to ancient civilizations including the Hittites, Greeks, Romans and Ottomans. Its culture blends east and west.`,
                attractions: ['Hagia Sophia', 'Cappadocia Fairy Chimneys', 'Ephesus'],
                foodsIntro: `Turkish cuisine features grilled meats, mezes and sweets such as baklava. Meals at local restaurants are generally inexpensive.`,
                foods: [
                    { name: 'Doner Kebab', description: 'Spit‑roasted meat sliced and served in bread with salad and sauce', affordability: 'Low (USD $3–6 per wrap)' },
                    { name: 'Meze Platter', description: 'Selection of small dishes like hummus, stuffed grape leaves and cheeses', affordability: 'Low–Medium (USD $6–12 per plate)' },
                    { name: 'Baklava', description: 'Layered pastry filled with nuts and soaked in honey syrup', affordability: 'Low (USD $2–4 per piece)' }
                ],
                hotelAffordability: `Hotels and guesthouses in Istanbul and coastal resorts are cheaper than comparable accommodation in Western Europe or the US.`,
                relativeCostIndex: 0.382,
                safetyTips: [
                    'Dress modestly when visiting mosques and remove your shoes.',
                    'Stay aware of your belongings in crowded bazaars and transit hubs.',
                    'Negotiate taxi fares or insist on using the meter.'
                ],
                phrases: {
                    'Hello': 'Merhaba',
                    'Thank you': 'Teşekkür ederim',
                    'Please': 'Lütfen'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Police', number: '155' },
                    { name: 'Ambulance', number: '112' },
                    { name: 'Fire', number: '110' }
                ],
                timeZoneId: 'Europe/Istanbul',
                currencyCode: 'TRY'
            },
            'Mexico': {
                history: `Mexico’s history spans ancient civilizations such as the Maya and Aztec, Spanish colonial rule and a rich cultural heritage that endures today.`,
                attractions: ['Chichén Itzá', 'Teotihuacán', 'Cancún Beaches'],
                foodsIntro: `Mexican cuisine uses corn, beans, chilli and vibrant spices. Street stalls offer tasty food at very low prices.`,
                foods: [
                    { name: 'Tacos', description: 'Soft corn tortillas filled with meats, salsas, onions and cilantro', affordability: 'Very Low (USD $1–3 per taco)' },
                    { name: 'Enchiladas', description: 'Tortillas rolled around fillings like chicken or cheese and covered in chilli sauce', affordability: 'Low (USD $5–10 per plate)' },
                    { name: 'Mole Poblano', description: 'Rich sauce of chillies, chocolate and spices served over meat', affordability: 'Medium (USD $8–15 per dish)' }
                ],
                hotelAffordability: `Accommodation ranges from budget hostels to luxury beach resorts. Prices in tourist areas are lower than in the US for comparable quality.`,
                relativeCostIndex: 0.599,
                safetyTips: [
                    'Drink bottled water and avoid ice in drinks unless filtered.',
                    'Stay in well-trafficked areas and use authorised taxis or ride‑sharing apps.',
                    'Keep a copy of your passport and secure your valuables.'
                ],
                phrases: {
                    'Hello': 'Hola',
                    'Thank you': 'Gracias',
                    'Please': 'Por favor'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '911' }
                ],
                timeZoneId: 'America/Mexico_City',
                currencyCode: 'MXN'
            },
            'Thailand': {
                history: `Thailand, formerly Siam, was one of the few Southeast Asian nations never colonised. It has a long history of monarchies and is known for its temples and warm hospitality.`,
                attractions: ['Grand Palace', 'Chiang Mai Old City', 'Phuket Beaches'],
                foodsIntro: `Thai cuisine balances sweet, sour, salty and spicy flavours. Street food is ubiquitous and extremely affordable.`,
                foods: [
                    { name: 'Pad Thai', description: 'Stir‑fried rice noodles with eggs, tofu or shrimp, peanuts and tamarind sauce', affordability: 'Very Low (USD $1–3 per plate)' },
                    { name: 'Tom Yum Goong', description: 'Hot and sour soup with shrimp, lemongrass, lime and chilli', affordability: 'Low (USD $3–6 per bowl)' },
                    { name: 'Mango Sticky Rice', description: 'Sweet glutinous rice served with ripe mango and coconut milk', affordability: 'Low (USD $2–4 per serving)' }
                ],
                hotelAffordability: `Hotels and guesthouses are much cheaper than in Western countries. Even mid‑range resorts are affordable.`,
                relativeCostIndex: 0.310,
                safetyTips: [
                    'Dress modestly when visiting temples; shoulders and knees should be covered.',
                    'Remove shoes before entering homes and some shops.',
                    'Beware of scams and inflated tourist prices – negotiate when appropriate.'
                ],
                phrases: {
                    'Hello': 'Sawasdee (sà‑wàt-dee)',
                    'Thank you': 'Khob khun',
                    'Please': 'Karuna (krûu-nâ)'
                },
                emergencyContacts: [
                    { name: 'Police', number: '191' },
                    { name: 'Ambulance', number: '1669' },
                    { name: 'Fire', number: '199' }
                ],
                timeZoneId: 'Asia/Bangkok',
                currencyCode: 'THB'
            },
            'Germany': {
                history: `Germany’s history spans the Holy Roman Empire, unification in 1871, division during the Cold War and reunification in 1990. Today it is a global economic leader known for engineering and culture.`,
                attractions: ['Brandenburg Gate', 'Neuschwanstein Castle', 'Berlin Wall'],
                foodsIntro: `German cuisine includes hearty meats, sausages, breads and cakes. Portions are generous and prices are moderate.`,
                foods: [
                    { name: 'Bratwurst', description: 'Grilled pork sausage served with mustard and bread', affordability: 'Low (USD $3–6 per sausage)' },
                    { name: 'Schnitzel', description: 'Breaded and fried pork or veal cutlet with lemon', affordability: 'Medium (USD $10–18 per plate)' },
                    { name: 'Pretzel (Brezel)', description: 'Soft baked bread twisted into a knot and sprinkled with coarse salt', affordability: 'Very Low (USD $1–3 each)' }
                ],
                hotelAffordability: `Accommodation in major cities is comparable to other Western European countries; pensions and hostels offer more affordable options.`,
                relativeCostIndex: 0.783,
                safetyTips: [
                    'Jaywalking is discouraged – cross at designated crossings.',
                    'Carry cash; some smaller shops and cafés may not accept cards.',
                    'Recycle bottles at machines in supermarkets to get a deposit refund.'
                ],
                phrases: {
                    'Hello': 'Hallo',
                    'Thank you': 'Danke',
                    'Please': 'Bitte'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Police', number: '110' }
                ],
                timeZoneId: 'Europe/Berlin',
                currencyCode: 'EUR'
            },
            'United Kingdom': {
                history: `The United Kingdom formed through the union of England, Scotland, Wales and Northern Ireland. It has played a major role in world history from the industrial revolution to a modern constitutional monarchy.`,
                attractions: ['Big Ben', 'Stonehenge', 'Edinburgh Castle'],
                foodsIntro: `British food ranges from fish and chips to hearty pies and curries. Pub meals and takeaway shops offer affordable options.`,
                foods: [
                    { name: 'Fish and Chips', description: 'Battered fish fillet served with thick-cut fried potatoes', affordability: 'Low (GBP £5–10)' },
                    { name: 'Full English Breakfast', description: 'Plate of eggs, bacon, sausages, baked beans, mushrooms and toast', affordability: 'Low–Medium (GBP £6–12)' },
                    { name: 'Shepherd’s Pie', description: 'Savory pie with minced lamb and vegetables topped with mashed potatoes', affordability: 'Medium (GBP £8–15)' }
                ],
                hotelAffordability: `Accommodation in London can be expensive, but B&Bs and countryside inns elsewhere offer better value.`,
                relativeCostIndex: 0.899,
                safetyTips: [
                    'Look both ways carefully when crossing roads – traffic drives on the left.',
                    'Queue politely and wait your turn; manners are valued.',
                    'Book popular attractions in advance to avoid long queues.'
                ],
                phrases: {
                    'Hello': 'Hello',
                    'Thank you': 'Thank you',
                    'Please': 'Please'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '999' },
                    { name: 'Alternative Emergency', number: '112' }
                ],
                timeZoneId: 'Europe/London',
                currencyCode: 'GBP'
            },
            'Japan': {
                history: `Japan’s history includes centuries of imperial rule, isolation during the Tokugawa shogunate and rapid modernisation during the Meiji era. It blends traditional culture with cutting-edge technology.`,
                attractions: ['Shibuya Crossing', 'Kinkaku‑ji (Golden Pavilion)', 'Mount Fuji'],
                foodsIntro: `Japanese cuisine emphasises fresh ingredients, seasonal dishes and careful presentation. Sushi, ramen and tempura are famous examples.`,
                foods: [
                    { name: 'Sushi', description: 'Vinegared rice topped or rolled with raw or cooked fish and vegetables', affordability: 'Medium (JPY ¥500–1500 per plate)' },
                    { name: 'Ramen', description: 'Noodles served in a savoury broth with toppings like pork, egg and seaweed', affordability: 'Low (JPY ¥600–1000 per bowl)' },
                    { name: 'Tempura', description: 'Seafood or vegetables lightly battered and deep-fried', affordability: 'Medium (JPY ¥800–1500 per plate)' }
                ],
                hotelAffordability: `Hotels range from capsule inns to luxury ryokan. Prices in major cities like Tokyo can be high but budget options exist.`,
                relativeCostIndex: 0.668,
                safetyTips: [
                    'Bow slightly when greeting; respect local etiquette.',
                    'Remove shoes when entering homes and some restaurants or shrines.',
                    'Keep your voice low on public transport and don’t talk on the phone in trains.'
                ],
                phrases: {
                    'Hello': 'Konnichiwa',
                    'Thank you': 'Arigato',
                    'Please': 'Onegaishimasu'
                },
                emergencyContacts: [
                    { name: 'Police', number: '110' },
                    { name: 'Fire & Ambulance', number: '119' }
                ],
                timeZoneId: 'Asia/Tokyo',
                currencyCode: 'JPY'
            },
            'Greece': {
                history: `Ancient Greece gave birth to democracy, theatre and philosophy. Modern Greece carries this legacy alongside centuries of Byzantine and Ottoman rule.`,
                attractions: ['Acropolis of Athens', 'Santorini', 'Delphi'],
                foodsIntro: `Greek cuisine features olive oil, fresh vegetables and grilled meats. Tavernas offer generous portions at reasonable prices.`,
                foods: [
                    { name: 'Moussaka', description: 'Baked layers of eggplant, minced meat and béchamel sauce', affordability: 'Low–Medium (EUR €6–10 per serving)' },
                    { name: 'Souvlaki', description: 'Skewered and grilled meat served in pita bread with tomatoes and tzatziki', affordability: 'Low (EUR €3–6)' },
                    { name: 'Greek Salad (Horiatiki)', description: 'Salad of tomatoes, cucumber, feta cheese, olives and oregano', affordability: 'Very Low (EUR €2–5)' }
                ],
                hotelAffordability: `Accommodation on the islands can be pricey during high season, but mainland guesthouses and off‑season stays offer good value.`,
                relativeCostIndex: 0.620,
                safetyTips: [
                    'Avoid sunburn by wearing sunscreen and staying hydrated.',
                    'Respect archaeological sites and do not climb on ruins.',
                    'Cash is still widely used; carry euros for small purchases.'
                ],
                phrases: {
                    'Hello': 'Yasou (Γειά σου)',
                    'Thank you': 'Efcharistó (Ευχαριστώ)',
                    'Please': 'Parakaló (Παρακαλώ)'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Athens',
                currencyCode: 'EUR'
            },
            'Malaysia': {
                history: `Malaysia has a multicultural heritage influenced by Malay, Chinese, Indian and indigenous cultures. It gained independence from Britain in 1957 and is known for its rainforests and modern cities.`,
                attractions: ['Petronas Towers', 'Langkawi Islands', 'George Town'],
                foodsIntro: `Malaysian cuisine blends Malay, Chinese and Indian influences. Street hawker centres offer inexpensive meals.`,
                foods: [
                    { name: 'Nasi Lemak', description: 'Rice cooked in coconut milk served with sambal, anchovies, peanuts and egg', affordability: 'Very Low (MYR RM3–6 per serving)' },
                    { name: 'Char Kway Teow', description: 'Stir-fried flat rice noodles with prawns, eggs, bean sprouts and soy sauce', affordability: 'Low (MYR RM5–10)' },
                    { name: 'Roti Canai', description: 'Flaky flatbread served with dhal or curry', affordability: 'Very Low (MYR RM1–3 per piece)' }
                ],
                hotelAffordability: `Accommodation is affordable, with modern hotels and guesthouses costing much less than in Western countries.`,
                relativeCostIndex: 0.317,
                safetyTips: [
                    'Dress modestly in rural areas and religious sites.',
                    'Carry insect repellent to deter mosquitoes.',
                    'Watch out for wild monkeys around temples and parks.'
                ],
                phrases: {
                    'Hello': 'Selamat pagi / Hello',
                    'Thank you': 'Terima kasih',
                    'Please': 'Sila'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '999' },
                    { name: 'Alternative Mobile', number: '112' }
                ],
                timeZoneId: 'Asia/Kuala_Lumpur',
                currencyCode: 'MYR'
            },
            'Portugal': {
                history: `Portugal established a global empire in the 15th century and is known for its maritime discoveries, fado music and cobbled streets.`,
                attractions: ['Belém Tower', 'Ribeira District', 'Pena Palace'],
                foodsIntro: `Portuguese cuisine is simple and hearty with lots of seafood, olive oil and spices. Pastéis de nata and grilled sardines are favourites.`,
                foods: [
                    { name: 'Pastel de Nata', description: 'Custard tart with flaky pastry, often dusted with cinnamon', affordability: 'Low (EUR €1–2 each)' },
                    { name: 'Bacalhau à Brás', description: 'Salt cod with onions, potatoes and eggs', affordability: 'Medium (EUR €8–12 per dish)' },
                    { name: 'Caldo Verde', description: 'Green soup made with potatoes, kale and chouriço sausage', affordability: 'Very Low (EUR €2–4 per bowl)' }
                ],
                hotelAffordability: `Accommodation in Lisbon and Porto is more affordable than in many Western European capitals; boutique hotels and guesthouses offer good value.`,
                relativeCostIndex: 0.627,
                safetyTips: [
                    'Wear comfortable shoes; many streets are steep and paved with slippery cobblestones.',
                    'Be mindful of pickpockets on trams and in tourist areas.',
                    'Try to speak some basic Portuguese; locals appreciate the effort.'
                ],
                phrases: {
                    'Hello': 'Olá',
                    'Thank you': 'Obrigado / Obrigada',
                    'Please': 'Por favor'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Lisbon',
                currencyCode: 'EUR'
            },
            'Canada': {
                history: `Canada formed through the union of British colonies in 1867 and spans from the Atlantic to the Pacific. It is known for its natural beauty and multicultural society.`,
                attractions: ['Niagara Falls', 'Banff National Park', 'CN Tower in Toronto'],
                foodsIntro: `Canadian cuisine includes indigenous staples, French and British dishes and immigrant influences. Portions are hearty and prices are similar to the US.`,
                foods: [
                    { name: 'Poutine', description: 'French fries topped with cheese curds and gravy', affordability: 'Low (CAD $5–8 per serving)' },
                    { name: 'Maple Syrup Treats', description: 'Pancakes or snow taffy drizzled with pure maple syrup', affordability: 'Very Low (CAD $2–5)' },
                    { name: 'Butter Tart', description: 'Sweet tart filled with butter, sugar and sometimes raisins', affordability: 'Low (CAD $2–4 per tart)' }
                ],
                hotelAffordability: `Hotel prices in large cities are comparable to the US. Wilderness lodges and hostels provide affordable alternatives in rural areas.`,
                relativeCostIndex: 0.874,
                safetyTips: [
                    'Prepare for variable weather; pack layers and waterproof gear.',
                    'Respect wildlife by keeping a safe distance and storing food properly.',
                    'Tipping 15–20% is customary in restaurants.'
                ],
                phrases: {
                    'Hello': 'Hello / Bonjour',
                    'Thank you': 'Thank you / Merci',
                    'Please': 'Please / S’il vous plaît'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '911' }
                ],
                timeZoneId: 'America/Toronto',
                currencyCode: 'CAD'
            },
            'South Korea': {
                history: `South Korea emerged from the Korean Peninsula’s long history, including the Joseon dynasty and the Korean War, and has grown into a high-tech, pop-culture powerhouse.`,
                attractions: ['Gyeongbokgung Palace', 'Jeju Island', 'N Seoul Tower'],
                foodsIntro: `Korean cuisine features fermented flavours, rice, vegetables and grilled meats. Many dishes are shared, and eating out is affordable.`,
                foods: [
                    { name: 'Kimchi', description: 'Fermented cabbage or radish seasoned with chilli, garlic and ginger', affordability: 'Very Low (KRW ₩1000–2000 per side)' },
                    { name: 'Bibimbap', description: 'Rice bowl topped with vegetables, beef, egg and gochujang sauce', affordability: 'Low (KRW ₩5000–8000)' },
                    { name: 'Korean BBQ', description: 'Grilled meats cooked at the table and eaten with side dishes', affordability: 'Medium (KRW ₩10,000–20,000 per person)' }
                ],
                hotelAffordability: `Accommodation ranges from budget guesthouses and jjimjilbang (bathhouse stays) to luxury hotels at lower prices than in Japan or the US.`,
                relativeCostIndex: 0.684,
                safetyTips: [
                    'Use both hands when giving or receiving items, especially when handing money.',
                    'Stand on the right-hand side of escalators in Seoul, except in Busan (left).',
                    'Late-night buses and subways may be crowded; keep personal items secure.'
                ],
                phrases: {
                    'Hello': 'Annyeonghaseyo (안녕하세요)',
                    'Thank you': 'Kamsahamnida (감사합니다)',
                    'Please': 'Butakhamnida (부탁합니다)'
                },
                emergencyContacts: [
                    { name: 'Police', number: '112' },
                    { name: 'Fire & Ambulance', number: '119' }
                ],
                timeZoneId: 'Asia/Seoul',
                currencyCode: 'KRW'
            },
            'Hong Kong': {
                history: `Hong Kong was a British colony until 1997 and is now a Special Administrative Region of China. It blends skyscrapers with historic temples and markets.`,
                attractions: ['Victoria Peak', 'Tian Tan Buddha (Big Buddha)', 'Mong Kok Markets'],
                foodsIntro: `Hong Kong cuisine combines Cantonese techniques with international influences. Dim sum and street snacks are popular and affordable.`,
                foods: [
                    { name: 'Dim Sum', description: 'Small steamed or fried savoury and sweet dishes served with tea', affordability: 'Low–Medium (HKD $30–80 per basket)' },
                    { name: 'Char Siu', description: 'Barbecued pork with a sweet glaze, typically served with rice or noodles', affordability: 'Low (HKD $40–80 per plate)' },
                    { name: 'Egg Tart', description: 'Flaky pastry filled with silky egg custard', affordability: 'Very Low (HKD $5–10 each)' }
                ],
                hotelAffordability: `Accommodation is expensive by regional standards, but budget guesthouses and capsule hotels offer savings.`,
                relativeCostIndex: 0.748,
                safetyTips: [
                    'Octopus cards (smart cards) make paying for transit and small purchases easy.',
                    'Respect personal space on escalators and use the “stand right, walk left” rule.',
                    'Summer can be hot and humid; carry water and an umbrella.'
                ],
                phrases: {
                    'Hello': 'Neih hóu (你好)',
                    'Thank you': 'M̀h’gōi (唔該)',
                    'Please': 'Ching (請)'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '999' }
                ],
                timeZoneId: 'Asia/Hong_Kong',
                currencyCode: 'HKD'
            },
            'Netherlands': {
                history: `The Netherlands is famed for its Golden Age of trade in the 17th century and for its progressive social policies today. The country is built on reclaimed land with a network of canals.`,
                attractions: ['Canal Ring', 'Keukenhof Gardens', 'Kinderdijk Windmills'],
                foodsIntro: `Dutch cuisine includes cheese, breads and hearty stews. Street foods like herring and stroopwafels are inexpensive and tasty.`,
                foods: [
                    { name: 'Haring (Herring)', description: 'Raw herring fish served with onions and pickles', affordability: 'Low (EUR €2–4 per portion)' },
                    { name: 'Stroopwafel', description: 'Thin waffle cookies sandwiched with caramel syrup', affordability: 'Very Low (EUR €1–2 each)' },
                    { name: 'Poffertjes', description: 'Mini fluffy pancakes dusted with powdered sugar', affordability: 'Low (EUR €3–5 per plate)' }
                ],
                hotelAffordability: `Hotels in Amsterdam can be expensive; consider staying in smaller towns or on houseboats for a unique and affordable experience.`,
                relativeCostIndex: 0.836,
                safetyTips: [
                    'Watch out for cyclists when crossing streets or exiting trams.',
                    'Carry contactless cards or cash; some places do not accept Visa/MasterCard.',
                    'Respect quiet hours and avoid loud noise in residential areas.'
                ],
                phrases: {
                    'Hello': 'Hallo',
                    'Thank you': 'Dank je',
                    'Please': 'Alsjeblieft'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Amsterdam',
                currencyCode: 'EUR'
            },
            'Saudi Arabia': {
                history: `Saudi Arabia is the birthplace of Islam and home to the holy cities of Mecca and Medina. The kingdom was unified in 1932 under King Abdulaziz Ibn Saud.`,
                attractions: ['Masjid al‑Haram', 'Mada’in Saleh', 'Edge of the World'],
                foodsIntro: `Saudi cuisine centres around rice, lamb, dates and spices. Meals are often shared and generous in portion.`,
                foods: [
                    { name: 'Kabsa', description: 'Rice dish cooked with meat, vegetables and a blend of spices', affordability: 'Medium (SAR 20–40 per plate)' },
                    { name: 'Shawarma', description: 'Spit‑roasted meat wrapped in flatbread with garlic sauce and pickles', affordability: 'Low (SAR 10–20)' },
                    { name: 'Dates & Arabic Coffee', description: 'Traditional hospitality pairing of dates with lightly spiced coffee', affordability: 'Very Low (SAR 5–10)' }
                ],
                hotelAffordability: `Hotel prices vary widely; pilgrim seasons see higher rates in Mecca and Medina. In other cities, international hotels offer good value compared to the US.`,
                relativeCostIndex: 0.502,
                safetyTips: [
                    'Dress conservatively; women should wear abayas in public and cover their hair where required.',
                    'Avoid public displays of affection; respect local customs.',
                    'In the desert, stay hydrated and protect yourself from the sun.'
                ],
                phrases: {
                    'Hello': 'As‑salām ʿalaykum (السلام عليكم)',
                    'Thank you': 'Shukran (شكرا)',
                    'Please': 'Min faḍlik (من فضلك)'
                },
                emergencyContacts: [
                    { name: 'General Emergency', number: '911' },
                    { name: 'Police', number: '999' },
                    { name: 'Ambulance', number: '997' },
                    { name: 'Fire', number: '998' }
                ],
                timeZoneId: 'Asia/Riyadh',
                currencyCode: 'SAR'
            },
            'Poland': {
                history: `Poland’s history includes medieval kingdoms, partitions by its neighbours and rebirth after World War I and the fall of communism. Today it blends historic sites with modern cities.`,
                attractions: ['Wawel Castle', 'Warsaw Old Town', 'Wieliczka Salt Mine'],
                foodsIntro: `Polish cuisine is hearty, featuring soups, dumplings and meats. Meals are affordable, especially outside tourist centres.`,
                foods: [
                    { name: 'Pierogi', description: 'Dumplings stuffed with cheese, potato, meat or fruit', affordability: 'Low (PLN zł10–20 per portion)' },
                    { name: 'Żurek', description: 'Sour rye soup often served in a bread bowl', affordability: 'Very Low (PLN zł8–15)' },
                    { name: 'Kielbasa', description: 'Smoked sausage served grilled or boiled', affordability: 'Low (PLN zł8–15)' }
                ],
                hotelAffordability: `Accommodation in Poland is generally affordable; luxury hotels cost less than in Western Europe.`,
                relativeCostIndex: 0.521,
                safetyTips: [
                    'Validate public transport tickets to avoid fines.',
                    'Carry cash; some small shops do not accept cards.',
                    'Polish winters can be harsh; dress warmly if visiting between November and March.'
                ],
                phrases: {
                    'Hello': 'Cześć',
                    'Thank you': 'Dziękuję',
                    'Please': 'Proszę'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Warsaw',
                currencyCode: 'PLN'
            },
            'Hungary': {
                history: `Hungary has roots in the Hungarian Kingdom founded in 1000 CE. It later became part of the Austro-Hungarian Empire and today is known for its thermal baths and architecture.`,
                attractions: ['Buda Castle', 'Széchenyi Thermal Bath', 'Lake Balaton'],
                foodsIntro: `Hungarian cuisine features paprika‑spiced meats and hearty stews. Dining out is inexpensive compared to Western Europe.`,
                foods: [
                    { name: 'Goulash (Gulyás)', description: 'Beef stew with paprika, onions and potatoes', affordability: 'Low (HUF Ft1500–3000)' },
                    { name: 'Lángos', description: 'Fried dough topped with garlic sauce, cheese and sour cream', affordability: 'Very Low (HUF Ft500–1000)' },
                    { name: 'Dobos Torte', description: 'Layered sponge cake with chocolate buttercream and caramel', affordability: 'Low (HUF Ft800–1500 per slice)' }
                ],
                hotelAffordability: `Accommodation in Budapest is affordable compared to Western Europe, with many budget hotels and apartments available.`,
                relativeCostIndex: 0.530,
                safetyTips: [
                    'Beware of taxi scams; use official cabs or ride-sharing apps.',
                    'Thermal baths have specific etiquette; follow rules for pools and saunas.',
                    'Carry small denominations of cash for markets and small shops.'
                ],
                phrases: {
                    'Hello': 'Szia',
                    'Thank you': 'Köszönöm',
                    'Please': 'Kérem'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Budapest',
                currencyCode: 'HUF'
            },
            'India': {
                history: `India’s civilisation is one of the world’s oldest, with history that includes the Indus Valley civilisation, Mughal Empire and British colonial period. It became independent in 1947.`,
                attractions: ['Taj Mahal', 'Amber Fort', 'Varanasi Ghats'],
                foodsIntro: `Indian cuisine varies widely between regions but often includes curries, breads and vegetarian dishes. Street food is flavourful and inexpensive.`,
                foods: [
                    { name: 'Butter Chicken', description: 'Chicken cooked in a creamy tomato gravy with spices', affordability: 'Low (INR ₹200–400 per portion)' },
                    { name: 'Chaat', description: 'Savory snacks like pani puri and bhel puri bursting with tangy flavours', affordability: 'Very Low (INR ₹50–100)' },
                    { name: 'Masala Dosa', description: 'Crispy rice crêpe filled with spiced potato served with chutneys', affordability: 'Low (INR ₹80–150)' }
                ],
                hotelAffordability: `Accommodation ranges from budget guesthouses to five-star hotels; prices are much lower than in the US.`,
                relativeCostIndex: 0.238,
                safetyTips: [
                    'Drink only bottled or purified water.',
                    'Dress modestly, especially at religious sites.',
                    'Be cautious when crossing roads; traffic can be chaotic.'
                ],
                phrases: {
                    'Hello': 'Namaste',
                    'Thank you': 'Dhanyavaad',
                    'Please': 'Kripya'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Police', number: '100' },
                    { name: 'Ambulance', number: '108' },
                    { name: 'Fire', number: '101' }
                ],
                timeZoneId: 'Asia/Kolkata',
                currencyCode: 'INR'
            },
            'Switzerland': {
                history: `Switzerland is a confederation founded in 1291 and renowned for its neutrality, alpine landscapes and banking industry.`,
                attractions: ['Matterhorn', 'Château de Chillon', 'Jungfraujoch'],
                foodsIntro: `Swiss cuisine includes cheese, chocolate and hearty alpine dishes. Dining out can be expensive, but supermarkets offer picnic options.`,
                foods: [
                    { name: 'Fondue', description: 'Melted cheese served in a communal pot for dipping bread', affordability: 'Medium–High (CHF 20–30 per person)' },
                    { name: 'Rösti', description: 'Crispy fried grated potatoes often served as a side', affordability: 'Medium (CHF 10–15)' },
                    { name: 'Chocolate', description: 'High-quality Swiss chocolate bars or pralines', affordability: 'Low–Medium (CHF 5–10)' }
                ],
                hotelAffordability: `Accommodation is costly; even mid-range hotels and chalets can be significantly more expensive than in the US.`,
                relativeCostIndex: 1.258,
                safetyTips: [
                    'Public transport is punctual – arrive on time for trains and buses.',
                    'Carry cash; some mountain huts do not accept credit cards.',
                    'Respect quiet hours in residential areas and on public transport.'
                ],
                phrases: {
                    'Hello': 'Grüezi (German) / Bonjour (French) / Buongiorno (Italian)',
                    'Thank you': 'Danke / Merci / Grazie',
                    'Please': 'Bitte / S’il vous plaît / Per favore'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Mountain Rescue', number: '1414' }
                ],
                timeZoneId: 'Europe/Zurich',
                currencyCode: 'CHF'
            },
            'Croatia': {
                history: `Croatia’s past includes Roman provinces, Venetian rule, Habsburg influence and Yugoslavian membership before its independence in 1991.`,
                attractions: ['Dubrovnik Old Town', 'Plitvice Lakes', 'Diocletian’s Palace'],
                foodsIntro: `Croatian cuisine mixes Mediterranean and Central European flavours. Seafood, grilled meats and pastries are common and affordable.`,
                foods: [
                    { name: 'Ćevapi', description: 'Grilled minced meat sausages served with onions and flatbread', affordability: 'Low (HRK kn30–60)' },
                    { name: 'Peka', description: 'Meat and vegetables slow-cooked under a bell-like lid covered with coals', affordability: 'Medium (HRK kn80–150 per person)' },
                    { name: 'Strukli', description: 'Baked or boiled pastry filled with cottage cheese', affordability: 'Low (HRK kn20–40)' }
                ],
                hotelAffordability: `Prices rise on the Adriatic coast in summer but remain lower than in Western Europe. Off-season stays are particularly affordable.`,
                relativeCostIndex: 0.550,
                safetyTips: [
                    'Wear sturdy footwear for hiking in national parks and on cobblestones.',
                    'Respect coastal ecosystems by not disturbing marine life or removing stones.',
                    'Use sun protection; summers are hot and sunny.'
                ],
                phrases: {
                    'Hello': 'Bok',
                    'Thank you': 'Hvala',
                    'Please': 'Molim'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Zagreb',
                currencyCode: 'EUR'
            },
            'Indonesia': {
                history: `Indonesia is an archipelago of over 17,000 islands and home to hundreds of ethnic groups. It declared independence from Dutch colonial rule in 1945.`,
                attractions: ['Borobudur Temple', 'Bali Beaches', 'Komodo National Park'],
                foodsIntro: `Indonesian cuisine is diverse, with rice, noodles and satay skewers. Street vendors sell filling meals at very low prices.`,
                foods: [
                    { name: 'Nasi Goreng', description: 'Fried rice with sweet soy sauce, eggs and vegetables or meat', affordability: 'Very Low (IDR Rp10,000–25,000)' },
                    { name: 'Satay', description: 'Skewers of grilled meat served with peanut sauce', affordability: 'Low (IDR Rp15,000–30,000)' },
                    { name: 'Gado-Gado', description: 'Salad of blanched vegetables with tofu, tempeh and peanut sauce', affordability: 'Very Low (IDR Rp10,000–20,000)' }
                ],
                hotelAffordability: `Accommodation ranges from homestays to luxury resorts at a fraction of Western prices.`,
                relativeCostIndex: 0.324,
                safetyTips: [
                    'Respect local customs; dress modestly when visiting mosques and temples.',
                    'Be aware of strong currents when swimming at beaches.',
                    'Carry cash in small denominations; credit cards are not widely accepted in rural areas.'
                ],
                phrases: {
                    'Hello': 'Halo',
                    'Thank you': 'Terima kasih',
                    'Please': 'Tolong'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' },
                    { name: 'Police', number: '110' },
                    { name: 'Ambulance', number: '118' },
                    { name: 'Fire', number: '113' }
                ],
                timeZoneId: 'Asia/Jakarta',
                currencyCode: 'IDR'
            },
            'Morocco': {
                history: `Morocco’s history blends Berber, Arab and European influences. It was a French protectorate until 1956 and is known for its medinas and desert landscapes.`,
                attractions: ['Jemaa el-Fnaa', 'Chefchaouen Blue Streets', 'Sahara Desert'],
                foodsIntro: `Moroccan cuisine features aromatic spices, couscous, tagines and mint tea. Meals are inexpensive outside tourist restaurants.`,
                foods: [
                    { name: 'Tagine', description: 'Slow-cooked stew of meat and vegetables with spices, named after the earthenware pot', affordability: 'Low (MAD 30–60)' },
                    { name: 'Couscous', description: 'Steamed semolina grains topped with vegetables, chickpeas and meat', affordability: 'Low (MAD 30–50)' },
                    { name: 'Pastilla', description: 'Savory-sweet pie with layers of thin pastry, pigeon or chicken, almonds and powdered sugar', affordability: 'Medium (MAD 50–80)' }
                ],
                hotelAffordability: `Riads (traditional houses with courtyards) and guesthouses are affordable; luxury hotels cost less than their European equivalents.`,
                relativeCostIndex: 0.406,
                safetyTips: [
                    'Respect local dress codes, particularly in rural areas.',
                    'Bargain politely in souks; haggling is expected.',
                    'Beware of unofficial guides offering tours; use licensed guides.'
                ],
                phrases: {
                    'Hello': 'Salam',
                    'Thank you': 'Shukran',
                    'Please': 'Min fadlak'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '190' },
                    { name: 'Police', number: '190' },
                    { name: 'Ambulance', number: '150' },
                    { name: 'Fire', number: '15' }
                ],
                timeZoneId: 'Africa/Casablanca',
                currencyCode: 'MAD'
            },
            'Denmark': {
                history: `Denmark is one of the world’s oldest monarchies and once ruled over a North Atlantic empire. Today it is known for its welfare state and design heritage.`,
                attractions: ['Nyhavn', 'Tivoli Gardens', 'Kronborg Castle'],
                foodsIntro: `Danish cuisine features open-faced sandwiches (smørrebrød), pastries and fresh seafood. Dining out is expensive but bakeries offer inexpensive treats.`,
                foods: [
                    { name: 'Smørrebrød', description: 'Open-faced rye bread sandwich topped with fish, meats or cheeses', affordability: 'Medium (DKK kr60–100)' },
                    { name: 'Frikadeller', description: 'Pan-fried meatballs served with potatoes and gravy', affordability: 'Medium (DKK kr80–140)' },
                    { name: 'Danish Pastry (Wienerbrød)', description: 'Flaky pastry with fillings like custard, almond paste or fruit', affordability: 'Low (DKK kr15–30 each)' }
                ],
                hotelAffordability: `Accommodation is expensive; hostels and budget hotels provide some savings, but overall costs are high compared to the US.`,
                relativeCostIndex: 1.031,
                safetyTips: [
                    'Cyclists have the right of way; be cautious when walking or driving.',
                    'Tipping is not mandatory; service charges are included in bills.',
                    'Pack layers and waterproof clothing – weather can change quickly.'
                ],
                phrases: {
                    'Hello': 'Hej',
                    'Thank you': 'Tak',
                    'Please': 'Vær så venlig'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Copenhagen',
                currencyCode: 'DKK'
            },
            'Philippines': {
                history: `The Philippines archipelago was home to numerous indigenous kingdoms before Spanish colonisation in the 16th century. The islands later came under American administration and gained full independence in 1946. Today the country is a vibrant mix of Austronesian, Spanish and American influences.`,
                attractions: ['White Beach', 'El Nido & Coron', 'Chocolate Hills'],
                foodsIntro: `Filipino food blends sweet, sour and savoury flavours. Many dishes are served family‑style, and street food is both tasty and inexpensive.`,
                foods: [
                    { name: 'Adobo', description: 'Meat (often chicken or pork) braised in vinegar, soy sauce, garlic and bay leaves', affordability: 'Very Low (PHP ₱80–150 per serving)' },
                    { name: 'Sinigang', description: 'Tamarind‑based sour soup with pork, seafood or shrimp and assorted vegetables', affordability: 'Low (PHP ₱80–150 per bowl)' },
                    { name: 'Halo‑Halo', description: 'Crushed ice dessert layered with sweetened beans, fruits, jellies and topped with leche flan', affordability: 'Low (PHP ₱50–100 per cup)' }
                ],
                hotelAffordability: `Accommodation ranges from backpacker hostels to beach resorts, with prices significantly lower than in the US. Rural homestays and mid‑range hotels provide excellent value.`,
                relativeCostIndex: 0.362,
                safetyTips: [
                    'Be mindful of weather advisories; typhoons can affect travel plans.',
                    'Avoid displaying valuables in crowded areas and use hotel safes.',
                    'Use registered taxis or ride‑hailing apps rather than unmarked vehicles.',
                    'Check the latest travel advisories when venturing to remote islands.'
                ],
                phrases: {
                    'Hello': 'Kumusta',
                    'Thank you': 'Salamat',
                    'Please': 'Paki'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '911' }
                ],
                timeZoneId: 'Asia/Manila',
                currencyCode: 'PHP'
            },
            'Singapore': {
                history: `Strategically located along maritime trade routes, Singapore grew from a Malay fishing village to a British trading post in 1819. After a brief merger with Malaysia, it became a fully independent republic in 1965. Today it is a global hub for finance, trade and tourism.`,
                attractions: ['Gardens by the Bay', 'Orchard Road', 'Singapore Zoo'],
                foodsIntro: `Singaporean cuisine reflects its multicultural population. Hawker centres serve affordable dishes from Chinese, Malay and Indian traditions – with Hainanese chicken rice widely regarded as a national dish.`,
                foods: [
                    { name: 'Hainanese Chicken Rice', description: 'Poached chicken served with fragrant rice and chilli sauce; considered Singapore’s national dish', affordability: 'Low (SGD $3–6 per plate)' },
                    { name: 'Chilli Crab', description: 'Crab simmered in a tangy, spicy tomato‑chilli sauce, best enjoyed with mantou buns', affordability: 'Medium (SGD $20–40 per crab)' },
                    { name: 'Laksa', description: 'Spicy coconut curry noodle soup topped with prawns or chicken', affordability: 'Low–Medium (SGD $4–8 per bowl)' }
                ],
                hotelAffordability: `Accommodation ranges from capsule hostels to world‑class hotels. Prices in the downtown core are comparable to major US cities, while suburban options and hostels are more budget‑friendly.`,
                relativeCostIndex: 0.78,
                safetyTips: [
                    'Observe strict anti‑littering and anti‑vandalism laws – fines are steep.',
                    'Chewing gum sales are restricted; dispose of gum properly if you bring your own.',
                    ' jaywalking and smoking outside designated areas can result in fines.',
                    'Tap water is safe to drink; refill a reusable bottle to stay hydrated in the tropical heat.'
                ],
                phrases: {
                    'Hello': 'Hello',
                    'Thank you': 'Xie xie / Terima kasih',
                    'Please': 'Qǐng / Sila'
                },
                emergencyContacts: [
                    { name: 'Police', number: '999' },
                    { name: 'Ambulance & Fire', number: '995' }
                ],
                timeZoneId: 'Asia/Singapore',
                currencyCode: 'SGD'
            },
            'Tanzania': {
                history: `Tanzania’s lands include some of the earliest human archaeological sites. German and later British colonial rule shaped modern Tanganyika and Zanzibar, which merged to form Tanzania in 1964. It is renowned for its wildlife and Swahili culture.`,
                attractions: ['Serengeti National Park', 'Mount Kilimanjaro', 'Stone Town'],
                foodsIntro: `Traditional Tanzanian cuisine relies on maize, millet, beans and meat. Dishes are simple and filling, with ugali being a staple accompaniment.`,
                foods: [
                    { name: 'Ugali', description: 'Stiff porridge made from maize flour; eaten with stews or grilled meat', affordability: 'Very Low (TZS 1,000–2,000 per serving)' },
                    { name: 'Nyama Choma', description: 'Grilled meat (usually goat or beef) served with kachumbari (tomato and onion salad)', affordability: 'Low (TZS 3,000–7,000 per plate)' },
                    { name: 'Pilau', description: 'Fragrant rice cooked with spices like cardamom, cinnamon and cloves, often served at celebrations', affordability: 'Low (TZS 2,000–4,000 per plate)' }
                ],
                hotelAffordability: `Lodges around safari parks and beach resorts can be expensive, but guesthouses and city hotels are much cheaper than in the US.`,
                relativeCostIndex: 0.251,
                safetyTips: [
                    'Drink bottled or boiled water; avoid ice in drinks outside major hotels.',
                    'Ask permission before photographing people, particularly the Maasai.',
                    'Use mosquito nets and repellents to prevent malaria.',
                    'Take precautions when on safari: stay in vehicles and follow your guide’s instructions.'
                ],
                phrases: {
                    'Hello': 'Jambo',
                    'Thank you': 'Asante',
                    'Please': 'Tafadhali'
                },
                emergencyContacts: [
                    { name: 'General/ Ambulance', number: '112' },
                    { name: 'Ambulance', number: '114' },
                    { name: 'Fire', number: '115' },
                    { name: 'Police', number: '999' },
                    { name: 'Health Call Centre', number: '199' }
                ],
                timeZoneId: 'Africa/Dar_es_Salaam',
                currencyCode: 'TZS'
            },
            'New Zealand': {
                history: `Polynesian settlers arrived in New Zealand around the 13th century. The islands were later colonised by Britain and gained full sovereignty in 1947. Today it is known for its Māori culture and natural beauty.`,
                attractions: ['Milford Sound, Fiordland', 'Hobbiton Movie Set', 'Tongariro National Park'],
                foodsIntro: `New Zealand cuisine uses fresh local produce, lamb, seafood and influences from Māori cooking. Dining out ranges from casual fish and chips to fine dining.`,
                foods: [
                    { name: 'Fish and Chips', description: 'Deep-fried fish with thick-cut chips often served with lemon and tartar sauce', affordability: 'Low (NZD $8–15)' },
                    { name: 'Hāngi', description: 'Traditional Māori feast of meat and vegetables slow-cooked in an earth oven', affordability: 'Medium (NZD $20–40 per meal)' },
                    { name: 'Pavlova', description: 'Meringue dessert topped with whipped cream and fresh fruit', affordability: 'Low (NZD $5–8 per slice)' }
                ],
                hotelAffordability: `Accommodation costs are moderate; holiday parks and hostels offer budget options while lodges in remote areas can be pricey.`,
                relativeCostIndex: 0.899,
                safetyTips: [
                    'Weather can be unpredictable; pack clothing for all seasons.',
                    'Sandflies can be bothersome in certain areas – bring repellent.',
                    'Driving is on the left-hand side; road conditions can vary in rural regions.'
                ],
                phrases: {
                    'Hello': 'Kia ora',
                    'Thank you': 'Ngā mihi / Thank you',
                    'Please': 'Tēnā'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '111' }
                ],
                timeZoneId: 'Pacific/Auckland',
                currencyCode: 'NZD'
            },
            'Vietnam': {
                history: `Vietnam’s roots date back to the Van Lang kingdom in the 7th century BC. The region endured more than a millennium of Chinese domination until the decisive Bạch Đằng victory in 938 opened an era of independent dynasties. French colonial rule followed in the 19th century, but nationalist movements led by Hồ Chí Minh culminated in the declaration of independence on 2 September 1945.`,
                attractions: ['Hạ Long Bay', 'Hanoi Old Quarter', 'Hội An Ancient Town'],
                foodsIntro: `Vietnamese cuisine is fresh and aromatic. Markets and street stalls sell cheap, hearty dishes; even sit‑down meals are far cheaper than in most Western countries.`,
                foods: [
                    { name: 'Phở', description: 'A fragrant noodle soup of broth, rice noodles and herbs – Vietnam’s most iconic dish found on every street.', affordability: 'Very Low (USD $1–3 per bowl)' },
                    { name: 'Bánh Mì', description: 'A crispy baguette sandwich stuffed with meats, pâté and pickled vegetables – eaten any time of day.', affordability: 'Very Low (USD $1–2 each)' },
                    { name: 'Egg Coffee', description: 'A sweet drink made with egg, condensed milk and coffee, invented in the 1940s.', affordability: 'Low (USD $2–4 per cup)' }
                ],
                hotelAffordability: `Accommodation in Vietnam is very affordable. Hostels and budget hotels cost a fraction of Western prices, while international chains in major cities offer excellent value.`,
                relativeCostIndex: 0.31,
                safetyTips: [
                    'Keep valuables secure and be wary of pickpockets in busy markets and on motorbikes.',
                    'Cross roads carefully – traffic is chaotic and drivers rarely stop for pedestrians.',
                    'Dress modestly and remove shoes when visiting temples or homes.',
                    'Check weather forecasts during the rainy season (May–November) and heed typhoon warnings.'
                ],
                phrases: {
                    'Hello': 'Xin chào',
                    'Thank you': 'Cảm ơn',
                    'Please': 'Làm ơn'
                },
                emergencyContacts: [
                    { name: 'Police', number: '113' },
                    { name: 'Fire', number: '114' },
                    { name: 'Ambulance', number: '115' },
                    { name: 'Search and Rescue', number: '112' }
                ],
                timeZoneId: 'Asia/Ho_Chi_Minh',
                currencyCode: 'VND'
            },
            'Argentina': {
                history: `Spanish colonists established settlements in what is now Argentina during the 16th century. Local patriots led by Manuel Belgrano, Juan José Castelli and José de San Martín fought royalist forces during the Argentine War of Independence (1810–1818). On 9 July 1816 an assembly in San Miguel de Tucumán declared complete independence from Spain.`,
                attractions: ['Iguazú Falls', 'Buenos Aires', 'Perito Moreno Glacier'],
                foodsIntro: `Argentine cuisine revolves around grilled meats and fresh pastries. Dining out is generally inexpensive compared with the US, especially at neighbourhood parrillas (steakhouses).`,
                foods: [
                    { name: 'Asado', description: 'Grilled meats – usually beef ribs or steak – cooked over an open fire and seasoned with chimichurri sauce.', affordability: 'Medium (ARS $800–1,800 per platter)' },
                    { name: 'Empanadas', description: 'Pastry pockets filled with meat, cheese or corn, popular at parties and picnics.', affordability: 'Low (ARS $150–300 each)' },
                    { name: 'Dulce de Leche', description: 'A caramel‑like sweet paste used to fill cakes or pancakes and served with ice cream.', affordability: 'Very Low (ARS $50–100 per portion)' }
                ],
                hotelAffordability: `Hotels and guesthouses in Argentina offer good value. Boutique B&Bs in Buenos Aires and rural estancias can be very affordable; luxury lodges in Patagonia are pricier.`,
                relativeCostIndex: 0.278,
                safetyTips: [
                    'Be aware of pickpockets in busy areas of Buenos Aires and other cities.',
                    'Use radio taxis or ride‑hailing apps rather than hailing taxis on the street.',
                    'Avoid demonstrations and large political gatherings.',
                    'Carry small change and keep valuables in a hotel safe.'
                ],
                phrases: {
                    'Hello': 'Hola',
                    'Thank you': 'Gracias',
                    'Please': 'Por favor'
                },
                emergencyContacts: [
                    { name: 'Ambulance', number: '107' },
                    { name: 'Fire', number: '100' },
                    { name: 'Police', number: '911 / 101' }
                ],
                timeZoneId: 'America/Argentina/Buenos_Aires',
                currencyCode: 'ARS'
            },
            // --- Added Sweden entry ---
            'Sweden': {
                history: `Sweden’s story stretches from Viking voyages and medieval kingdoms to a unified nation under Gustav Vasa in 1523. During the 17th century it was a European great power, but today it’s known for neutrality, innovation and a strong social welfare system.`,
                attractions: ['Gamla Stan (Stockholm Old Town)', 'Abisko National Park', 'Icehotel Jukkasjärvi'],
                foodsIntro: `Swedish cuisine blends rustic flavours and sweet treats. Look out for comforting meatballs, pickled fish and fragrant baked goods.`,
                foods: [
                    { name: 'Köttbullar', description: 'Classic Swedish meatballs seasoned with spices and served with lingonberry jam and creamy gravy.', affordability: 'Medium (USD $12–20 per plate)' },
                    { name: 'Inlagd Sill', description: 'Pickled herring cured in a sweet–savory brine, traditionally served with potatoes and crispbread.', affordability: 'Low–Medium (USD $6–10 per serving)' },
                    { name: 'Kanelbulle', description: 'A soft cinnamon bun swirled with butter and cardamom, perfect with coffee.', affordability: 'Low (USD $2–4 per bun)' }
                ],
                hotelAffordability: `Hotels in Stockholm and Gothenburg can be comparable to or slightly higher than mid‑range US prices; smaller towns offer more affordable options and hostels are plentiful.`,
                relativeCostIndex: 0.61,
                safetyTips: [
                    'Beware of pickpockets in busy tourist areas and on public transport.',
                    'Take care when driving in winter — roads may be icy and daylight hours are short.',
                    'Respect personal space and queue politely; Swedes value calm and order.',
                    'Enjoy nature responsibly: follow local guidelines for campfires, litter and wildlife.'
                ],
                phrases: {
                    'Hello': 'Hej',
                    'Thank you': 'Tack',
                    'Please': 'Snälla'
                },
                emergencyContacts: [
                    { name: 'All Emergencies', number: '112' }
                ],
                timeZoneId: 'Europe/Stockholm',
                currencyCode: 'SEK'
            },
            // --- Added Egypt entry ---
            'Egypt': {
                history: `Egypt is the cradle of one of the world’s oldest civilisations. Ancient Egyptians built the pyramids over 4,500 years ago, later empires of Greeks, Romans, Arabs and Ottomans left their mark, and modern Egypt gained independence in the 20th century.`,
                attractions: ['Pyramids of Giza', 'Valley of the Kings (Luxor)', 'Egyptian Museum (Cairo)'],
                foodsIntro: `Egyptian food is hearty and often vegetarian friendly. Street stalls serve delicious mixed‑grain bowls and slow‑cooked beans alongside rich stews and breads.`,
                foods: [
                    { name: 'Koshary', description: 'A comforting mix of pasta, rice, lentils and chickpeas topped with spicy tomato sauce and crispy onions.', affordability: 'Very Low (USD $2–5 per bowl)' },
                    { name: 'Ful Medames', description: 'Mashed fava beans simmered with garlic, cumin and lemon, usually eaten with bread for breakfast.', affordability: 'Very Low (USD $1–3 per portion)' },
                    { name: 'Ta’amiya', description: 'Egyptian falafel made from fava beans rather than chickpeas, deep‑fried and served in pita with salad.', affordability: 'Low–Medium (USD $3–6 per serving)' }
                ],
                hotelAffordability: `Accommodation in Egypt is generally budget friendly; hotels in Cairo and Luxor are inexpensive compared with US standards, while Red Sea resorts and Nile cruises are pricier.`,
                relativeCostIndex: 0.22,
                safetyTips: [
                    'Stay hydrated and protect yourself from the desert sun with hats, sunglasses and sunscreen.',
                    'Dress modestly, particularly when visiting mosques and rural areas.',
                    'Be alert for scams and overly insistent vendors at tourist sites.',
                    'Drink bottled or treated water to avoid stomach upsets.'
                ],
                phrases: {
                    'Hello': 'Salaam alaikum',
                    'Thank you': 'Shukran',
                    'Please': 'Min fadlak'
                },
                emergencyContacts: [
                    { name: 'Police', number: '122' },
                    { name: 'Ambulance', number: '123' },
                    { name: 'Fire', number: '180' }
                ],
                timeZoneId: 'Africa/Cairo',
                currencyCode: 'EGP'
            },
            // --- Added South Africa entry ---
            'South Africa': {
                history: `South Africa’s past encompasses ancient Khoisan cultures, European colonisation and the discovery of diamonds and gold. The apartheid era of racial segregation ended in 1994 when Nelson Mandela became the country’s first black president.`,
                attractions: ['Table Mountain', 'Kruger National Park', 'Cape of Good Hope'],
                foodsIntro: `South African cuisine reflects indigenous traditions and immigrant influences. Expect spicy stews, street food served in bread and smoky barbecues (braai).`,
                foods: [
                    { name: 'Bobotie', description: 'A fragrant spiced mince dish baked with an egg custard topping and a hint of sweetness from fruit or chutney.', affordability: 'Low–Medium (USD $6–12 per serving)' },
                    { name: 'Bunny Chow', description: 'A hollowed‑out loaf of bread filled with curry — Durban’s iconic street food.', affordability: 'Very Low–Low (USD $2–5 per portion)' },
                    { name: 'Braai', description: 'South African barbecue featuring assorted meats grilled over wood or charcoal and served with salads and pap.', affordability: 'Medium (USD $8–15 per person)' }
                ],
                hotelAffordability: `Accommodation ranges from budget guesthouses and city hotels to luxury safari lodges; prices are generally lower than in the US but rise in peak season.`,
                relativeCostIndex: 0.35,
                safetyTips: [
                    'Be aware of your surroundings and avoid displaying valuables in city centres.',
                    'Use reputable operators for safaris and follow guide instructions around wildlife.',
                    'Check weather and local advisories before hiking or visiting coastal areas.',
                    'Don’t walk alone at night in unfamiliar areas and always lock your vehicle.'
                ],
                phrases: {
                    'Hello': 'Sawubona',
                    'Thank you': 'Ngiyabonga',
                    'Please': 'Asseblief'
                },
                emergencyContacts: [
                    { name: 'All Emergencies (mobile)', number: '112' },
                    { name: 'Ambulance & Fire', number: '10177' },
                    { name: 'Police', number: '10111' }
                ],
                timeZoneId: 'Africa/Johannesburg',
                currencyCode: 'ZAR'
            }
        };

        // Major public or widely celebrated holidays for each featured country.  These lists
        // contain only a handful of official or significant holidays and are not exhaustive.
        // Dates use the YYYY-MM-DD format.  When new countries are added to the dropdown
        // menu, add their key to this object along with holiday dates and names.  Note: some
        // holidays (e.g., Lunar New Year) change dates each year; the dates provided here
        // correspond to the 2025 calendar year for demonstration purposes.
        const countryHolidays = {
            'Australia': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-01-26', name: 'Australia Day' },
                { date: '2025-04-25', name: 'Anzac Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-06-09', name: 'King’s Birthday' }
            ],
            'Austria': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-04-21', name: 'Easter Monday' },
                { date: '2025-10-26', name: 'National Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-12-26', name: 'St. Stephen’s Day' }
            ],
            'Colombia': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-07-20', name: 'Independence Day' },
                { date: '2025-08-07', name: 'Battle of Boyacá Day' },
                { date: '2025-12-08', name: 'Immaculate Conception Day' }
                ,
                { date: '2025-12-25', name: 'Christmas Day' }
            ],
            'France': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-05-01', name: 'Labour Day' },
                { date: '2025-07-14', name: 'Bastille Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-11-11', name: 'Armistice Day' }
            ],
            'Spain': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-10-12', name: 'National Day' },
                { date: '2025-08-15', name: 'Assumption Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
            ],
            'United States': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-07-04', name: 'Independence Day' },
                { date: '2025-11-27', name: 'Thanksgiving Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-05-26', name: 'Memorial Day' }
            ],
            'China': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-01-29', name: 'Spring Festival (Chinese New Year)' },
                { date: '2025-05-01', name: 'Labour Day' },
                { date: '2025-10-01', name: 'National Day' }
                ,
                { date: '2025-09-07', name: 'Mid-Autumn Festival' }
            ],
            'Italy': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-04-25', name: 'Liberation Day' },
                { date: '2025-08-15', name: 'Ferragosto (Assumption Day)' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-01-06', name: 'Epiphany' }
            ],
            'Turkey': [
                { date: '2025-04-23', name: 'National Sovereignty & Children’s Day' },
                { date: '2025-08-30', name: 'Victory Day' },
                { date: '2025-10-29', name: 'Republic Day' }
                ,
                { date: '2025-05-01', name: 'Labour and Solidarity Day' }
                ,
                { date: '2025-05-19', name: 'Youth and Sports Day' }
            ],
            'Mexico': [
                { date: '2025-09-16', name: 'Independence Day' },
                { date: '2025-11-02', name: 'Day of the Dead' },
                { date: '2025-11-20', name: 'Revolution Day' }
                ,
                { date: '2025-01-01', name: 'New Year’s Day' }
                ,
                { date: '2025-12-25', name: 'Christmas Day' }
            ],
            'Thailand': [
                { date: '2025-04-13', name: 'Songkran (Thai New Year)' },
                { date: '2025-07-28', name: 'King’s Birthday' },
                { date: '2025-08-12', name: 'Queen’s Birthday' }
                ,
                { date: '2025-02-12', name: 'Makha Bucha Day' }
                ,
                { date: '2025-07-15', name: 'Asalha Puja Day' }
            ],
            'Germany': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-05-01', name: 'Labour Day' },
                { date: '2025-10-03', name: 'German Unity Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-04-21', name: 'Easter Monday' }
            ],
            'United Kingdom': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-05-05', name: 'Early May Bank Holiday' },
                { date: '2025-08-25', name: 'Summer Bank Holiday' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-04-18', name: 'Good Friday' }
            ],
            'Japan': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-04-29', name: 'Showa Day' },
                { date: '2025-05-03', name: 'Constitution Memorial Day' },
                { date: '2025-02-23', name: 'Emperor’s Birthday' }
                ,
                { date: '2025-05-05', name: 'Children’s Day' }
            ],
            'Greece': [
                { date: '2025-03-25', name: 'Independence Day' },
                { date: '2025-10-28', name: 'Ochi Day' },
                { date: '2025-08-15', name: 'Assumption Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-11-17', name: 'Polytechnio Day' }
            ],
            'Malaysia': [
                { date: '2025-02-01', name: 'Federal Territory Day' },
                { date: '2025-05-01', name: 'Labour Day' },
                { date: '2025-08-31', name: 'Independence Day' }
                ,
                { date: '2025-03-30', name: 'Hari Raya Puasa' }
                ,
                { date: '2025-10-29', name: 'Deepavali' }
            ],
            'Portugal': [
                { date: '2025-04-25', name: 'Freedom Day' },
                { date: '2025-06-10', name: 'Portugal Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-08-15', name: 'Assumption Day' }
                ,
                { date: '2025-10-05', name: 'Republic Day' }
            ],
            'Canada': [
                { date: '2025-07-01', name: 'Canada Day' },
                { date: '2025-10-13', name: 'Thanksgiving (Canada)' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-01-01', name: 'New Year’s Day' }
                ,
                { date: '2025-11-11', name: 'Remembrance Day' }
            ],
            'South Korea': [
                { date: '2025-03-01', name: 'Independence Movement Day' },
                { date: '2025-08-15', name: 'Liberation Day' },
                { date: '2025-10-03', name: 'National Foundation Day' }
                ,
                { date: '2025-01-29', name: 'Lunar New Year' }
                ,
                { date: '2025-09-08', name: 'Chuseok (Harvest Festival)' }
            ],
            'Hong Kong': [
                { date: '2025-01-31', name: 'Lunar New Year' },
                { date: '2025-07-01', name: 'HKSAR Establishment Day' },
                { date: '2025-10-01', name: 'National Day' }
                ,
                { date: '2025-04-04', name: 'Ching Ming Festival' }
                ,
                { date: '2025-06-02', name: 'Dragon Boat Festival' }
            ],
            'Netherlands': [
                { date: '2025-04-27', name: 'King’s Day' },
                { date: '2025-05-05', name: 'Liberation Day' },
                { date: '2025-12-05', name: 'Sinterklaas' }
                ,
                { date: '2025-05-29', name: 'Ascension Day' }
                ,
                { date: '2025-01-01', name: 'New Year’s Day' }
            ],
            'Saudi Arabia': [
                { date: '2025-04-10', name: 'Eid al-Fitr' },
                { date: '2025-06-16', name: 'Eid al-Adha' },
                { date: '2025-09-23', name: 'National Day' }
                ,
                { date: '2025-02-22', name: 'Founding Day' }
                ,
                { date: '2025-06-15', name: 'Arafat Day' }
            ],
            'Poland': [
                { date: '2025-05-03', name: 'Constitution Day' },
                { date: '2025-11-11', name: 'Independence Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-08-15', name: 'Assumption Day' }
            ],
            'Hungary': [
                { date: '2025-03-15', name: 'National Day' },
                { date: '2025-08-20', name: 'St. Stephen’s Day' },
                { date: '2025-10-23', name: 'Revolution Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-04-21', name: 'Easter Monday' }
            ],
            'India': [
                { date: '2025-01-26', name: 'Republic Day' },
                { date: '2025-08-15', name: 'Independence Day' },
                { date: '2025-10-02', name: 'Gandhi Jayanti' }
                ,
                { date: '2025-03-13', name: 'Holi' }
                ,
                { date: '2025-10-20', name: 'Diwali' }
            ],
            'Switzerland': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-08-01', name: 'Swiss National Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-04-21', name: 'Easter Monday' }
                ,
                { date: '2025-01-02', name: 'Berchtold’s Day' }
            ],
            'Croatia': [
                { date: '2025-06-25', name: 'Statehood Day' },
                { date: '2025-08-05', name: 'Victory and Homeland Thanksgiving Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-10-08', name: 'Independence Day' }
            ],
            'Indonesia': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-08-17', name: 'Independence Day' },
                { date: '2025-03-29', name: 'Nyepi (Day of Silence)' }
                ,
                { date: '2025-04-10', name: 'Eid al-Fitr' }
                ,
                { date: '2025-12-25', name: 'Christmas Day' }
            ],
            'Morocco': [
                { date: '2025-07-30', name: 'Throne Day' },
                { date: '2025-11-18', name: 'Independence Day' },
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-04-10', name: 'Eid al-Fitr' }
                ,
                { date: '2025-06-16', name: 'Eid al-Adha' }
            ],
            'Denmark': [
                { date: '2025-04-16', name: 'Queen’s Birthday' },
                { date: '2025-06-05', name: 'Constitution Day' },
                { date: '2025-06-23', name: 'Midsummer’s Eve' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-12-25', name: 'Christmas Day' }
            ],
            'New Zealand': [
                { date: '2025-02-06', name: 'Waitangi Day' },
                { date: '2025-04-25', name: 'ANZAC Day' },
                { date: '2025-06-02', name: 'King’s Birthday' }
                ,
                { date: '2025-10-27', name: 'Labour Day' }
                ,
                { date: '2025-12-25', name: 'Christmas Day' }
            ],
            'Vietnam': [
                { date: '2025-02-29', name: 'Tet Nguyen Dan (Lunar New Year)' },
                { date: '2025-04-30', name: 'Reunification Day' },
                { date: '2025-09-02', name: 'National Day' }
                ,
                { date: '2025-04-06', name: 'Hung Kings’ Temple Festival' }
                ,
                { date: '2025-09-07', name: 'Mid-Autumn Festival' }
            ],
            'Argentina': [
                { date: '2025-05-25', name: 'Revolution Day' },
                { date: '2025-07-09', name: 'Independence Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
                ,
                { date: '2025-06-20', name: 'National Flag Day' }
            ],
            'Sweden': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-06-06', name: 'National Day' },
                { date: '2025-06-21', name: 'Midsummer’s Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-01-06', name: 'Epiphany' }
            ],
            'Egypt': [
                { date: '2025-01-07', name: 'Coptic Christmas Day' },
                { date: '2025-01-25', name: 'Revolution Day / National Police Day' },
                { date: '2025-04-25', name: 'Sinai Liberation Day' },
                { date: '2025-07-23', name: 'Revolution Day' },
                { date: '2025-10-06', name: 'Armed Forces Day' }
                ,
                { date: '2025-05-01', name: 'Labour Day' }
            ],
            'South Africa': [
                { date: '2025-01-01', name: 'New Year’s Day' },
                { date: '2025-04-27', name: 'Freedom Day' },
                { date: '2025-09-24', name: 'Heritage Day' },
                { date: '2025-12-25', name: 'Christmas Day' }
                ,
                { date: '2025-04-18', name: 'Good Friday' }
            ]
        };

        // Override and extend the holiday data for each country based on the 2024 calendar.
        // This approach leaves the original countryHolidays object intact while updating or
        // creating entries as required.  Each list below uses ISO 8601 date strings.
        Object.assign(countryHolidays, {
            'Argentina': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-12', name: 'Carnival Monday' },
                { date: '2024-02-13', name: 'Carnival Tuesday' },
                { date: '2024-03-24', name: 'Truth and Justice Memorial Day' },
                { date: '2024-04-02', name: 'Malvinas Day' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-25', name: 'May Revolution Day' },
                { date: '2024-06-20', name: 'Flag Day' },
                { date: '2024-07-09', name: 'Independence Day' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Australia': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-26', name: 'Australia Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-25', name: 'ANZAC Day' },
                { date: '2024-06-10', name: 'King’s Birthday' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Austria': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-08-15', name: 'Assumption Day' },
                { date: '2024-10-26', name: 'National Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'St. Stephen’s Day' }
            ],
            'Canada': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-05-20', name: 'Victoria Day' },
                { date: '2024-07-01', name: 'Canada Day' },
                { date: '2024-09-02', name: 'Labour Day' },
                { date: '2024-10-14', name: 'Thanksgiving' },
                { date: '2024-11-11', name: 'Remembrance Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'China': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-10', name: 'Chinese New Year' },
                { date: '2024-04-04', name: 'Qingming Festival' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-10', name: 'Dragon Boat Festival' },
                { date: '2024-09-17', name: 'Mid‑Autumn Festival' },
                { date: '2024-10-01', name: 'National Day' }
            ],
            'Colombia': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-08', name: 'Epiphany (observed)' },
                { date: '2024-03-25', name: 'St. Joseph’s Day (observed)' },
                { date: '2024-03-28', name: 'Maundy Thursday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-13', name: 'Ascension Day (observed)' },
                { date: '2024-06-03', name: 'Corpus Christi (observed)' },
                { date: '2024-06-10', name: 'Sacred Heart (observed)' },
                { date: '2024-07-20', name: 'Independence Day' },
                { date: '2024-08-07', name: 'Battle of Boyacá' },
                { date: '2024-12-08', name: 'Immaculate Conception' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Croatia': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-30', name: 'Statehood Day' },
                { date: '2024-06-22', name: 'Anti‑Fascist Struggle Day' },
                { date: '2024-08-05', name: 'Victory and Homeland Thanksgiving Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'St. Stephen’s Day' }
            ],
            'Denmark': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-28', name: 'Maundy Thursday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-26', name: 'Great Prayer Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-06-05', name: 'Constitution Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Egypt': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-07', name: 'Coptic Christmas' },
                { date: '2024-01-25', name: 'Revolution Day / National Police Day' },
                { date: '2024-04-10', name: 'Eid al-Fitr' },
                { date: '2024-04-25', name: 'Sinai Liberation Day' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-16', name: 'Eid al-Adha' },
                { date: '2024-07-07', name: 'Islamic New Year' },
                { date: '2024-07-23', name: 'Revolution Day' },
                { date: '2024-09-15', name: 'Prophet Muhammad’s Birthday' },
                { date: '2024-10-06', name: 'Armed Forces Day' }
            ],
            'Finland': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'May Day / Vappu' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-06-21', name: 'Midsummer Eve' },
                { date: '2024-06-22', name: 'Midsummer Day' },
                { date: '2024-11-02', name: 'All Saints’ Day' },
                { date: '2024-12-06', name: 'Independence Day' },
                { date: '2024-12-24', name: 'Christmas Eve' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'France': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-08', name: 'Victory in Europe Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-07-14', name: 'Bastille Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-11-11', name: 'Armistice Day' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Germany': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-10-03', name: 'Day of German Unity' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'St. Stephen’s Day' }
            ],
            'Greece': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-03-18', name: 'Clean Monday' },
                { date: '2024-03-25', name: 'Independence Day' },
                { date: '2024-05-03', name: 'Good Friday' },
                { date: '2024-05-06', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-10-28', name: 'Ochi Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Hong Kong': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-10', name: 'Lunar New Year (Day 1)' },
                { date: '2024-02-11', name: 'Lunar New Year (Day 2)' },
                { date: '2024-02-12', name: 'Lunar New Year (Day 3)' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-04', name: 'Ching Ming Festival' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-15', name: 'Buddha’s Birthday' },
                { date: '2024-06-10', name: 'Dragon Boat Festival' },
                { date: '2024-07-01', name: 'Hong Kong SAR Establishment Day' },
                { date: '2024-09-18', name: 'Mid‑Autumn Festival' },
                { date: '2024-10-01', name: 'National Day' },
                { date: '2024-10-11', name: 'Chung Yeung Festival' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Hungary': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-15', name: '1848 Revolution Memorial Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-20', name: 'Pentecost Monday' },
                { date: '2024-08-20', name: 'St. Stephen’s Day' },
                { date: '2024-10-23', name: '1956 Revolution Memorial Day' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'India': [
                { date: '2024-01-26', name: 'Republic Day' },
                { date: '2024-03-08', name: 'Maha Shivaratri' },
                { date: '2024-03-25', name: 'Holi' },
                { date: '2024-04-11', name: 'Eid al-Fitr' },
                { date: '2024-08-15', name: 'Independence Day' },
                { date: '2024-08-26', name: 'Janmashtami' },
                { date: '2024-10-02', name: 'Gandhi Jayanti' },
                { date: '2024-10-12', name: 'Dussehra' },
                { date: '2024-11-01', name: 'Diwali' },
                { date: '2024-11-15', name: 'Guru Nanak Jayanti' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Indonesia': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-10', name: 'Chinese New Year' },
                { date: '2024-03-11', name: 'Hari Raya Nyepi' },
                { date: '2024-04-10', name: 'Eid al-Fitr' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-09', name: 'Ascension Day of Jesus Christ' },
                { date: '2024-06-01', name: 'Pancasila Day' },
                { date: '2024-06-17', name: 'Eid al-Adha' },
                { date: '2024-08-17', name: 'Indonesian Independence Day' },
                { date: '2024-09-16', name: 'Prophet Muhammad’s Birthday' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Italy': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-25', name: 'Liberation Day' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-02', name: 'Republic Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-12-08', name: 'Immaculate Conception' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'St. Stephen’s Day' }
            ],
            'Japan': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-08', name: 'Coming of Age Day' },
                { date: '2024-02-11', name: 'National Foundation Day' },
                { date: '2024-02-23', name: 'Emperor’s Birthday' },
                { date: '2024-03-20', name: 'Vernal Equinox Day' },
                { date: '2024-04-29', name: 'Showa Day' },
                { date: '2024-05-03', name: 'Constitution Memorial Day' },
                { date: '2024-05-04', name: 'Greenery Day' },
                { date: '2024-05-05', name: 'Children’s Day' },
                { date: '2024-07-15', name: 'Marine Day' },
                { date: '2024-08-11', name: 'Mountain Day' },
                { date: '2024-09-16', name: 'Respect for the Aged Day' },
                { date: '2024-09-22', name: 'Autumn Equinox Day' },
                { date: '2024-10-14', name: 'Sports Day' },
                { date: '2024-11-03', name: 'Culture Day' },
                { date: '2024-11-23', name: 'Labour Thanksgiving Day' }
            ],
            'Malaysia': [
                { date: '2025-02-01', name: 'Federal Territory Day' },
                { date: '2025-05-01', name: 'Labour Day' },
                { date: '2025-08-31', name: 'Independence Day' },
                { date: '2025-03-30', name: 'Hari Raya Puasa' },
                { date: '2025-10-29', name: 'Deepavali' }
            ],
            'Mexico': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-05', name: 'Constitution Day' },
                { date: '2024-03-18', name: 'Benito Juárez’s Birthday' },
                { date: '2024-03-28', name: 'Maundy Thursday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-09-16', name: 'Independence Day' },
                { date: '2024-11-18', name: 'Revolution Day' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Morocco': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-11', name: 'Proclamation of Independence' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-04-10', name: 'Eid al-Fitr' },
                { date: '2024-06-17', name: 'Eid al-Adha' },
                { date: '2024-07-08', name: 'Islamic New Year' },
                { date: '2024-07-30', name: 'Throne Day' },
                { date: '2024-08-20', name: 'Revolution Day' },
                { date: '2024-09-16', name: 'Prophet Muhammad’s Birthday' },
                { date: '2024-11-06', name: 'Green March' },
                { date: '2024-11-18', name: 'Independence Day' }
            ],
            'Netherlands': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-27', name: 'King’s Day' },
                { date: '2024-05-05', name: 'Liberation Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-19', name: 'Whit Sunday' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'New Zealand': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-02', name: 'Day after New Year’s Day' },
                { date: '2024-02-06', name: 'Waitangi Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-25', name: 'ANZAC Day' },
                { date: '2024-06-03', name: 'King’s Birthday' },
                { date: '2024-06-28', name: 'Matariki' },
                { date: '2024-10-28', name: 'Labour Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Norway': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-28', name: 'Maundy Thursday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-17', name: 'Constitution Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Philippines': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-28', name: 'Maundy Thursday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-09', name: 'Day of Valor' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-12', name: 'Independence Day' },
                { date: '2024-08-26', name: 'National Heroes’ Day' },
                { date: '2024-11-30', name: 'Bonifacio Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-30', name: 'Rizal Day' }
            ],
            'Poland': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-03', name: 'Constitution Day' },
                { date: '2024-05-19', name: 'Whit Sunday' },
                { date: '2024-05-30', name: 'Corpus Christi' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-11-11', name: 'Independence Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Portugal': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-13', name: 'Carnival Tuesday' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-25', name: 'Liberty Day' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-10', name: 'Portugal Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-10-05', name: 'Republic Day' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-12-01', name: 'Restoration of Independence' },
                { date: '2024-12-08', name: 'Immaculate Conception' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Romania': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-02', name: 'New Year’s Day (Day 2)' },
                { date: '2024-01-24', name: 'Union Day' },
                { date: '2024-05-06', name: 'Orthodox Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-06-01', name: 'Children’s Day' },
                { date: '2024-06-24', name: 'Pentecost Monday' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-11-30', name: 'St. Andrew’s Day' },
                { date: '2024-12-01', name: 'National Day / Great Union Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Saudi Arabia': [
                { date: '2024-04-10', name: 'Eid al-Fitr' },
                { date: '2024-06-16', name: 'Eid al-Adha' },
                { date: '2024-07-07', name: 'Islamic New Year' },
                { date: '2024-09-23', name: 'Saudi National Day' },
                { date: '2024-09-15', name: 'Prophet Muhammad’s Birthday' }
            ],
            'Singapore': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-10', name: 'Chinese New Year (Day 1)' },
                { date: '2024-02-11', name: 'Chinese New Year (Day 2)' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-22', name: 'Vesak Day' },
                { date: '2024-04-10', name: 'Hari Raya Puasa' },
                { date: '2024-06-17', name: 'Hari Raya Haji' },
                { date: '2024-08-09', name: 'National Day' },
                { date: '2024-10-31', name: 'Deepavali' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'South Africa': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-21', name: 'Human Rights Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Family Day' },
                { date: '2024-04-27', name: 'Freedom Day' },
                { date: '2024-05-01', name: 'Workers’ Day' },
                { date: '2024-06-16', name: 'Youth Day' },
                { date: '2024-08-09', name: 'National Women’s Day' },
                { date: '2024-09-24', name: 'Heritage Day' },
                { date: '2024-12-16', name: 'Day of Reconciliation' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Day of Goodwill' }
            ],
            'South Korea': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-09', name: 'Seollal (Korean New Year)' },
                { date: '2024-03-01', name: 'Independence Movement Day' },
                { date: '2024-05-05', name: 'Children’s Day' },
                { date: '2024-05-15', name: 'Buddha’s Birthday' },
                { date: '2024-06-06', name: 'Memorial Day' },
                { date: '2024-08-15', name: 'Liberation Day' },
                { date: '2024-09-16', name: 'Chuseok' },
                { date: '2024-10-03', name: 'National Foundation Day' },
                { date: '2024-10-09', name: 'Hangul Day' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Spain': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-08-15', name: 'Assumption of Mary' },
                { date: '2024-10-12', name: 'National Day' },
                { date: '2024-11-01', name: 'All Saints’ Day' },
                { date: '2024-12-06', name: 'Constitution Day' },
                { date: '2024-12-08', name: 'Immaculate Conception' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Sweden': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-06', name: 'Epiphany' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-03-31', name: 'Easter Sunday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-06-06', name: 'National Day' },
                { date: '2024-06-21', name: 'Midsummer Eve' },
                { date: '2024-12-24', name: 'Christmas Eve' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Switzerland': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-09', name: 'Ascension Day' },
                { date: '2024-05-20', name: 'Whit Monday' },
                { date: '2024-08-01', name: 'National Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'St. Stephen’s Day' }
            ],
            'Tanzania': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-12', name: 'Zanzibar Revolution Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-04-26', name: 'Union Day' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-04-10', name: 'Eid al-Fitr' },
                { date: '2024-06-17', name: 'Eid al-Adha' },
                { date: '2024-07-07', name: 'Peasants’ Day' },
                { date: '2024-08-08', name: 'Farmers’ Day' },
                { date: '2024-12-09', name: 'Independence Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'Thailand': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-24', name: 'Makha Bucha Day' },
                { date: '2024-04-06', name: 'Chakri Memorial Day' },
                { date: '2024-04-13', name: 'Songkran Festival' },
                { date: '2024-05-01', name: 'Labour Day' },
                { date: '2024-05-04', name: 'Coronation Day' },
                { date: '2024-05-22', name: 'Visakha Bucha Day' },
                { date: '2024-07-20', name: 'Asarnha Bucha Day' },
                { date: '2024-08-12', name: 'Queen’s Birthday / Mother’s Day' },
                { date: '2024-12-05', name: 'King’s Birthday / National Day / Father’s Day' },
                { date: '2024-12-10', name: 'Constitution Day' },
                { date: '2024-12-31', name: 'New Year’s Eve' }
            ],
            'Turkey': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-04-23', name: 'National Sovereignty and Children’s Day' },
                { date: '2024-05-01', name: 'Labour and Solidarity Day' },
                { date: '2024-05-19', name: 'Youth and Sports Day' },
                { date: '2024-07-15', name: 'Democracy and National Unity Day' },
                { date: '2024-08-30', name: 'Victory Day' },
                { date: '2024-10-29', name: 'Republic Day' }
            ],
            'United Kingdom': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-03-17', name: 'St. Patrick’s Day' },
                { date: '2024-03-29', name: 'Good Friday' },
                { date: '2024-04-01', name: 'Easter Monday' },
                { date: '2024-05-06', name: 'Early May Bank Holiday' },
                { date: '2024-05-27', name: 'Spring Bank Holiday' },
                { date: '2024-07-12', name: 'Battle of the Boyne' },
                { date: '2024-08-05', name: 'Summer Bank Holiday (Scotland)' },
                { date: '2024-08-26', name: 'Summer Bank Holiday' },
                { date: '2024-11-30', name: 'St. Andrew’s Day' },
                { date: '2024-12-25', name: 'Christmas Day' },
                { date: '2024-12-26', name: 'Boxing Day' }
            ],
            'United States': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-01-15', name: 'Martin Luther King Jr. Day' },
                { date: '2024-02-19', name: 'Presidents’ Day' },
                { date: '2024-05-27', name: 'Memorial Day' },
                { date: '2024-06-19', name: 'Juneteenth' },
                { date: '2024-07-04', name: 'Independence Day' },
                { date: '2024-09-02', name: 'Labor Day' },
                { date: '2024-10-14', name: 'Columbus Day / Indigenous Peoples’ Day' },
                { date: '2024-11-11', name: 'Veterans Day' },
                { date: '2024-11-28', name: 'Thanksgiving Day' },
                { date: '2024-12-25', name: 'Christmas Day' }
            ],
            'Vietnam': [
                { date: '2024-01-01', name: 'New Year’s Day' },
                { date: '2024-02-08', name: 'Tet Nguyen Dan' },
                { date: '2024-04-18', name: 'Hung Kings Commemoration Day' },
                { date: '2024-04-30', name: 'Reunification Day' },
                { date: '2024-05-01', name: 'International Labour Day' },
                { date: '2024-09-02', name: 'National Day' }
            ]
        });

        // End of countriesData definition

        // U.S. Embassy contact information for each country.  Each entry provides the embassy address, phone number and website.
        const usEmbassyContacts = {
            'Argentina': { address: 'Av. Colombia 4300 (C1425GMN) Buenos Aires, Argentina', phone: '(54-11) 5777-4533', url: 'https://ar.usembassy.gov/' },
            'Italy': { address: 'Via V. Veneto 119/A, Rome, Italy', phone: '+39 06-46741', url: 'https://it.usembassy.gov/' },
            'Turkey': { address: '110 Atatürk Blvd., Kavaklidere, 06100 Ankara, Turkey', phone: '+90 (312) 455-5555', url: 'https://tr.usembassy.gov/' },
            'Mexico': { address: 'Paseo de la Reforma 305, Colonia Cuauhtemoc, 06500 Mexico, D.F., Mexico', phone: '+52 55 5080 2000', url: 'https://mx.usembassy.gov/' },
            'Thailand': { address: '120‑122 Wireless Road, Bangkok 10330, Thailand', phone: '+66 2 205 4000', url: 'https://th.usembassy.gov/' },
            'China': { address: 'No. 55 An Jia Lou Lu, Beijing 100600, China', phone: '+86 10 8531 3000', url: 'https://china.usembassy.gov/' },
            'Finland': { address: 'Itäinen Puistotie 14 B, 00140 Helsinki, Finland', phone: '+358 9 616 250', url: 'https://fi.usembassy.gov/' },
            'Romania': { address: 'B-dul Dr. Liviu Librescu Nr. 4–6, Sector 1, Bucharest 015118, Romania', phone: '+40 21 200-3300', url: 'https://ro.usembassy.gov/' },
            'Norway': { address: 'Morgedalsvegen 36, 0378 Oslo, Norway', phone: '+47 2130 8540', url: 'https://no.usembassy.gov/' },
            'Germany': { address: 'Clayallee 170, 14191 Berlin, Germany', phone: '+49 30 8305 0', url: 'https://de.usembassy.gov/' },
            'Spain': { address: 'Calle Serrano 75, 28006 Madrid, Spain', phone: '+34 91 587 2240', url: 'https://es.usembassy.gov/' },
            'France': { address: '2 Avenue Gabriel, 75008 Paris, France', phone: '+33 1 43 12 48 80', url: 'https://fr.usembassy.gov/' },
            'Austria': { address: 'Parkring 12A, 1010 Vienna, Austria', phone: '+43 1 313 39 0', url: 'https://at.usembassy.gov/' },
            'United Kingdom': { address: '24 Grosvenor Square, London W1A 2LQ, United Kingdom', phone: '+44 20 7499 9000', url: 'https://uk.usembassy.gov/' },
            'Netherlands': { address: 'Lange Voorhout 102, 2514 EJ The Hague, Netherlands', phone: '+31 70 310 2209', url: 'https://nl.usembassy.gov/' },
            'Canada': { address: '490 Sussex Drive, Ottawa, ON K1N 1G8, Canada', phone: '+1 613-688-5335', url: 'https://ca.usembassy.gov/' },
            'Japan': { address: '1-10-5 Akasaka, Minato-ku, Tokyo 107-8420, Japan', phone: '+81 3 3224 5000', url: 'https://jp.usembassy.gov/' },
            'Malaysia': { address: '376 Jalan Tun Razak, 50400 Kuala Lumpur, Malaysia', phone: '+60 3 2168 5000', url: 'https://my.usembassy.gov/' },
            'South Korea': { address: '188 Sejong-daero, Jongno-gu, Seoul 03141, South Korea', phone: '+82 2 397 4114', url: 'https://kr.usembassy.gov/' }
            ,
            // Added remaining countries with actual U.S. Embassy contact details.  Addresses and phone numbers
            // sourced from official U.S. embassy listings and travel.state.gov.  If a country has multiple
            // consulates, only the primary embassy in the capital is listed here.
            'Indonesia': { address: 'Jl. Medan Merdeka Selatan No. 3 – 5, Jakarta 10110, Indonesia', phone: '+62 21 3435 9000', url: 'https://id.usembassy.gov/' },
            'Portugal': { address: 'Av. das Forças Armadas, Sete-Rios 1600-081 Lisbon, Portugal', phone: '+351 21 770 2122', url: 'https://pt.usembassy.gov/' },
            'Greece': { address: '91 Vasilisis Sophias Avenue, 10160 Athens, Greece', phone: '+30 210 721 2951', url: 'https://gr.usembassy.gov/' },
            'Saudi Arabia': { address: 'Abdullah Ibn Hudhafah As Sahmi Street, Roundabout no. 9, Diplomatic Quarter, Riyadh, Saudi Arabia', phone: '+966 11 488 3800', url: 'https://sa.usembassy.gov/' },
            'Poland': { address: 'Aleje Ujazdowskie 29/31, 00-540 Warsaw, Poland', phone: '+48 22 504 2000', url: 'https://pl.usembassy.gov/' },
            'Hungary': { address: 'Szabadság tér 12, 1054 Budapest, Hungary', phone: '+36 1 475 4400', url: 'https://hu.usembassy.gov/' },
            'India': { address: 'Shantipath, Chanakyapuri, New Delhi 110021, India', phone: '+91 11 2419 8000', url: 'https://in.usembassy.gov/' },
            'Switzerland': { address: 'Sulgeneckstrasse 19, CH-3007 Bern, Switzerland', phone: '+41 31 357 7011', url: 'https://ch.usembassy.gov/' },
            'Croatia': { address: 'Thomas Jefferson Street 2, 10010 Zagreb, Croatia', phone: '+385 1 661 2200', url: 'https://hr.usembassy.gov/' },
            'Morocco': { address: 'Km 5.7 Av. Mohamed VI, Souissi, Rabat 10170, Morocco', phone: '+212 537 63 72 00', url: 'https://ma.usembassy.gov/' },
            'Denmark': { address: 'Dag Hammarskjölds Allé 24, 2100 Copenhagen, Denmark', phone: '+45 33 41 71 00', url: 'https://dk.usembassy.gov/' },
            'Philippines': { address: '1201 Roxas Boulevard, Ermita, Manila 1000, Philippines', phone: '+63 2 5301 2000', url: 'https://ph.usembassy.gov/' },
            'Singapore': { address: '27 Napier Road, Singapore 258508', phone: '+65 6476 9100', url: 'https://sg.usembassy.gov/' },
            'Tanzania': { address: '686 Old Bagamoyo Road, Msasani, Dar es Salaam, Tanzania', phone: '+255 22 229 4000', url: 'https://tz.usembassy.gov/' },
            'New Zealand': { address: '29 Fitzherbert Terrace, Thorndon, Wellington 6011, New Zealand', phone: '+64 4 462 6000', url: 'https://nz.usembassy.gov/' },
            'Vietnam': { address: '7 Lang Ha Street, Ba Dinh District, Hanoi, Vietnam', phone: '+84 24 3850 5000', url: 'https://vn.usembassy.gov/' },
            'South Africa': { address: '877 Pretorius Street, Arcadia, Pretoria, South Africa', phone: '+27 12 431 4000', url: 'https://za.usembassy.gov/' },
            'Sweden': { address: 'Dag Hammarskjölds Väg 31, 115 89 Stockholm, Sweden', phone: '+46 8 783 5300', url: 'https://se.usembassy.gov/' },
            'Egypt': { address: '5 Tawfik Diab Street, Garden City, Cairo 11511, Egypt', phone: '+20 2 2797 3300', url: 'https://eg.usembassy.gov/' }
            ,
            'Hong Kong': { address: '26 Garden Road, Central, Hong Kong', phone: '+852 2523 9011', url: 'https://hk.usconsulate.gov/' }
        };

        // Guidelines on common do's and don'ts for visitors.  These concise tips offer behavioural norms and etiquette.
        const localsAdvice = {
            'Argentina': [
                'Do greet with a kiss on the cheek.',
                'Don’t be too punctual – arriving a little late is common.',
                'Try sharing mate but let the host pour the hot water.'
            ],
            'Finland': [
                'Remove your shoes when entering homes.',
                'Respect personal space and keep voices low in public.',
                'Sauna etiquette: no clothing and shower before entering.'
            ],
            'Romania': [
                'Greet with a handshake and maintain eye contact.',
                'Dress modestly when visiting churches.',
                'Don’t point with your finger; use your whole hand.'
            ],
            'Norway': [
                'Greet with a firm handshake and say “Hei”.',
                'Take off your shoes when entering someone’s home.',
                'Avoid boasting; modesty is valued.'
            ],
            'Italy': [
                'Greet with a light handshake or cheek kiss among friends.',
                'Dress respectfully when visiting churches.',
                'Don’t ask for cheese on seafood pasta.'
            ],
            'France': [
                'Greet with “Bonjour” and a handshake or cheek kisses among acquaintances.',
                'Don’t speak loudly in public places.',
                'Keep your hands on the table (not in your lap) while dining.'
            ],
            'Spain': [
                'Greet with a handshake or two kisses on the cheek among friends.',
                'Keep to relaxed dining hours; meals are later in the day.',
                'Don’t expect shops to be open during siesta times.'
            ],
            'Germany': [
                'Greet with a firm handshake and maintain eye contact.',
                'Be punctual; timeliness is highly valued.',
                'Don’t jaywalk – wait for the green pedestrian signal.'
            ],
            'Austria': [
                'Use formal titles and surnames when addressing people.',
                'Be punctual for appointments and social gatherings.',
                'Don’t bring up money or income in conversation.'
            ],
            'United Kingdom': [
                'Queue politely and don’t jump the line.',
                'Say “please” and “thank you” frequently.',
                'Respect personal space and avoid loud talking on public transport.'
            ],
            'Japan': [
                'Bow when greeting and hand over items with both hands.',
                'Remove shoes when entering homes and some restaurants.',
                'Don’t tip – it is not customary and may be considered rude.'
            ],
            'Greece': [
                'Greet with a handshake; close friends may hug or kiss.',
                'Dress modestly when visiting monasteries and churches.',
                'Don’t point the soles of your feet at people.'
            ],
            'Malaysia': [
                'Use your right hand for eating and giving or receiving items.',
                'Remove shoes when entering homes and some shops.',
                'Avoid public displays of affection.'
            ],
            'Portugal': [
                'Greet with a handshake or kisses on both cheeks.',
                'Be courteous and wait to be seated at restaurants.',
                'Don’t shout or speak loudly in public.'
            ],
            'South Korea': [
                'Bow slightly when greeting; shake hands with both hands.',
                'Pour drinks for others and never pour your own first.',
                'Avoid writing names in red ink as it symbolises death.'
            ],
            'Netherlands': [
                'Greet with a handshake and maintain eye contact.',
                'Arrive on time for appointments and social events.',
                'Don’t stand in bike lanes or block them.'
            ],
            'Canada': [
                'Greet with a handshake; French Canadians may kiss on the cheeks.',
                'Respect the diverse cultures and languages.',
                'Don’t smoke in public places unless permitted.'
            ],
            'China': [
                'Greet with a slight nod or handshake.',
                'Use both hands when giving or receiving items.',
                'Avoid discussing sensitive topics like politics.'
            ],
            'Turkey': [
                'Greet with a handshake; close friends may kiss on both cheeks.',
                'Remove shoes when entering homes.',
                'Don’t criticise Turkish culture or politics openly.'
            ],
            'Mexico': [
                'Greet with a handshake or hug among friends.',
                'Be patient – time is flexible and schedules may run late.',
                'Don’t pour your own tequila; wait for the host.'
            ],
            'Thailand': [
                'Greet with a “wai” by pressing palms together and bowing slightly.',
                'Remove shoes before entering homes and temples.',
                'Don’t touch anyone’s head or point your feet at people.'
            ],
            'Poland': [
                'Greet with a firm handshake; men may kiss a woman’s hand.',
                'Bring a small gift when invited to someone’s home.',
                'Don’t discuss politics or the war during casual conversation.'
            ],
            'Hungary': [
                'Greet with a firm handshake and maintain eye contact.',
                'Take shoes off when entering homes.',
                'Don’t clink beer glasses – it’s considered bad luck.'
            ],
            'India': [
                'Greet with “Namaste” pressing palms together.',
                'Remove shoes before entering homes and temples.',
                'Avoid public displays of affection.'
            ],
            'Switzerland': [
                'Greet with a handshake; in the French-speaking areas people may kiss three times on the cheeks.',
                'Be punctual and organised.',
                'Don’t cross the street on a red signal.'
            ],
            'Croatia': [
                'Greet with a firm handshake and maintain eye contact.',
                'Bring small gifts when visiting someone’s home.',
                'Don’t raise your voice in public; keep conversations polite.'
            ],
            'Indonesia': [
                'Greet with a handshake; use your right hand only.',
                'Dress modestly in rural areas and religious sites.',
                'Don’t use your left hand to eat or pass items.'
            ],
            'Morocco': [
                'Greet with a handshake and a light kiss on the cheeks among friends.',
                'Use your right hand for eating and giving gifts.',
                'Don’t eat or drink in public during Ramadan.'
            ],
            'Denmark': [
                'Greet with a firm handshake and eye contact.',
                'Be on time for appointments and social events.',
                'Don’t overdo small talk – Danes appreciate directness.'
            ],
            'Philippines': [
                'Greet with a handshake; close friends may hug or cheek-kiss.',
                'Bring pasalubong (small gifts) when visiting homes.',
                'Don’t point with your forefinger; use your lips or hand.'
            ],
            'Singapore': [
                'Greet with a handshake; avoid too firm a grip.',
                'Speak softly in public and avoid chewing gum in public places.',
                'Don’t litter or break rules – fines are common.'
            ],
            'Tanzania': [
                'Greet elders with respect; a handshake may be lengthy.',
                'Dress modestly, especially in rural and coastal areas.',
                'Don’t publicly criticise local customs or beliefs.'
            ],
            'New Zealand': [
                'Greet with a handshake; the Māori hongi is pressing noses.',
                'Remove shoes when entering homes.',
                'Don’t honk your horn unless it’s an emergency.'
            ],
            'Vietnam': [
                'Greet with a light handshake or slight bow.',
                'Hand objects with both hands.',
                'Don’t leave chopsticks upright in rice – it symbolises death.'
            ],
            'Sweden': [
                'Greet with a handshake and maintain personal space.',
                'Be punctual; Swedes are very time conscious.',
                'Don’t talk loudly on public transport.'
            ],
            'Egypt': [
                'Greet with a handshake; close friends may kiss on the cheeks.',
                'Remove your shoes before entering mosques.',
                'Don’t show the soles of your feet to others.'
            ],
            'South Africa': [
                'Greet with a handshake; among some communities a two-handed shake is common.',
                'Be punctual for business meetings, but social gatherings may start later.',
                'Don’t wander alone at night in unfamiliar areas.'
            ]
        };

        // Short, sweet recommendation statements for the Start Exploring feature.
        const recommendationStatements = {
            'Argentina': 'some sizzling steak and a tango lesson in Buenos Aires',
            'Finland': 'a steamy sauna beneath the northern lights',
            'Romania': 'wandering through Dracula’s castle and medieval towns',
            'Norway': 'cruising majestic fjords and hiking to dizzying cliffs',
            'Italy': 'pizza in Naples and strolling through ancient ruins',
            'France': 'croissants under the Eiffel Tower and world-class art',
            'Spain': 'tapas, sangria and flamenco under the sun',
            'Germany': 'beer gardens and fairy-tale castles on the Rhine',
            'Austria': 'classical concerts and breathtaking alpine vistas',
            'United States': 'national parks and iconic city skylines',
            'Mexico': 'colourful fiestas and sandy beaches',
            'Thailand': 'temple hopping and spicy street food',
            'China': 'the Great Wall and futuristic cityscapes',
            'Turkey': 'ancient bazaars and surreal landscapes',
            'Japan': 'sushi feasts and cherry blossoms in bloom',
            'Greece': 'island-hopping and ancient temples',
            'Malaysia': 'rainforests and multicultural flavours',
            'Portugal': 'pastel-coloured streets and port wine tastings',
            'South Korea': 'K-pop energy and royal palaces',
            'Netherlands': 'canal cruises and tulip fields',
            'Canada': 'mountain adventures and vibrant cities',
            'Switzerland': 'chocolate indulgence and scenic train rides',
            'Singapore': 'sky gardens and hawker centre delights',
            'Saudi Arabia': 'vast deserts and a modern metropolis',
            'Poland': 'charming squares and hearty pierogi',
            'Hungary': 'thermal baths and Danube river cruises',
            'India': 'colourful festivals and spicy curries',
            'Croatia': 'Adriatic beaches and medieval walls',
            'Indonesia': 'tropical islands and volcanic landscapes',
            'Morocco': 'vibrant souks and desert sunsets',
            'Denmark': 'hygge cafés and Viking history',
            'Philippines': 'crystal clear waters and friendly smiles',
            'Tanzania': 'safari adventures and Mt. Kilimanjaro',
            'New Zealand': 'hobbit landscapes and extreme sports',
            'Vietnam': 'bustling markets and serene rice paddies',
            'Sweden': 'fika breaks and northern lights',
            'Egypt': 'pyramids and Nile cruises',
            'South Africa': 'wildlife safaris and Cape Town’s beauty'
        };

        // Geographic and climate information for each country.  These values provide approximate coordinates to position
        // the marker on the world map and short descriptions for the location and climate.  Latitudes and longitudes are
        // approximate and use the centre of the country.  Climate descriptions are deliberately broad.
        const countryGeo = {
            'Australia': { lat: -25.0, lon: 133.0, locationDesc: 'Australia is a vast island continent in the southern hemisphere between the Pacific and Indian Oceans.', weatherDesc: 'It has diverse climates, from tropical in the north to temperate in the south, with arid interior regions.' },
            'Austria': { lat: 47.5, lon: 14.5, locationDesc: 'Austria is a landlocked country in central Europe nestled in the Alps.', weatherDesc: 'It has a temperate continental climate with cold winters and warm summers.' },
            'Colombia': { lat: 4.5, lon: -74.0, locationDesc: 'Colombia is in northern South America, with coastlines on both the Caribbean Sea and the Pacific Ocean.', weatherDesc: 'It features varied climates—from tropical rainforests and savannas to cooler highland and Andean regions.' },
            'France': { lat: 46.5, lon: 2.0, locationDesc: 'France is in Western Europe, bordered by Belgium, Germany, Italy and Spain, with coasts on the Atlantic Ocean and Mediterranean Sea.', weatherDesc: 'It has a mostly temperate climate with mild winters and warm summers; the Mediterranean south is sunnier and drier.' },
            'Spain': { lat: 40.0, lon: -3.7, locationDesc: 'Spain occupies most of the Iberian Peninsula in southwestern Europe.', weatherDesc: 'It enjoys a Mediterranean climate with hot, dry summers and mild, wet winters; the north is cooler and wetter.' },
            'United States': { lat: 39.5, lon: -98.35, locationDesc: 'The United States spans North America from the Atlantic to the Pacific, including Alaska and Hawaii.', weatherDesc: 'Its climate ranges from arctic in Alaska and tropical in Hawaii and Florida to arid deserts and temperate zones elsewhere.' },
            'China': { lat: 35.0, lon: 105.0, locationDesc: 'China covers much of East Asia, stretching from the Pacific coast to the Himalayas.', weatherDesc: 'Its climate varies from subarctic in the north to tropical in the south, influenced by monsoons.' },
            'Italy': { lat: 42.7, lon: 12.7, locationDesc: 'Italy is a boot‑shaped peninsula in southern Europe extending into the Mediterranean Sea.', weatherDesc: 'It has a Mediterranean climate with hot, dry summers and mild, wet winters; alpine conditions prevail in the north.' },
            'Turkey': { lat: 39.0, lon: 35.0, locationDesc: 'Turkey bridges southeastern Europe and western Asia, bounded by the Black, Aegean and Mediterranean Seas.', weatherDesc: 'It experiences diverse climates, from Mediterranean coastal weather to continental and semi‑arid inland conditions.' },
            'Mexico': { lat: 23.0, lon: -102.0, locationDesc: 'Mexico lies in North America south of the United States, bordered by the Pacific Ocean, Caribbean Sea and Gulf of Mexico.', weatherDesc: 'It has tropical and desert climates, with wet summers and dry winters; highland regions are cooler.' },
            'Thailand': { lat: 15.0, lon: 100.0, locationDesc: 'Thailand is in Southeast Asia on the Indochinese Peninsula, bordered by Myanmar, Laos, Cambodia and Malaysia.', weatherDesc: 'It has a tropical climate with hot, humid weather year‑round and a pronounced monsoon season.' },
            'Germany': { lat: 51.0, lon: 10.0, locationDesc: 'Germany lies in central Europe, bordered by nine countries and the North and Baltic Seas.', weatherDesc: 'It has a temperate seasonal climate with moderate summers and cold winters.' },
            'United Kingdom': { lat: 55.0, lon: -3.0, locationDesc: 'The United Kingdom is an island nation off the northwestern coast of mainland Europe.', weatherDesc: 'It experiences a temperate maritime climate with mild temperatures, frequent rain and changeable weather.' },
            'Japan': { lat: 36.0, lon: 138.0, locationDesc: 'Japan is an archipelago in East Asia along the Pacific Ocean east of the Korean Peninsula.', weatherDesc: 'Its climate ranges from humid subtropical in the south to cold temperate in the north, with distinct seasons and abundant rainfall.' },
            'Greece': { lat: 39.0, lon: 22.0, locationDesc: 'Greece lies on the southern tip of the Balkan Peninsula and includes numerous islands in the Aegean and Ionian Seas.', weatherDesc: 'It has a Mediterranean climate with hot, dry summers and mild, wet winters.' },
            'Malaysia': { lat: 4.0, lon: 102.0, locationDesc: 'Malaysia consists of two regions separated by the South China Sea: Peninsular Malaysia on the Malay Peninsula and Malaysian Borneo.', weatherDesc: 'It has a tropical rainforest climate—hot and humid year‑round with heavy monsoon rains.' },
            'Portugal': { lat: 39.5, lon: -8.0, locationDesc: 'Portugal occupies the westernmost part of the Iberian Peninsula along the Atlantic Ocean.', weatherDesc: 'It has a Mediterranean climate with warm, dry summers and mild, rainy winters; the north is cooler.' },
            'Canada': { lat: 56.0, lon: -106.0, locationDesc: 'Canada occupies much of northern North America, stretching from the Atlantic to the Pacific and into the Arctic.', weatherDesc: 'It has a cold climate overall with long winters and short summers; coastal regions are milder.' },
            'South Korea': { lat: 36.5, lon: 127.8, locationDesc: 'South Korea occupies the southern half of the Korean Peninsula in East Asia.', weatherDesc: 'It experiences a temperate climate with four distinct seasons, including hot, humid summers and cold, dry winters.' },
            'Hong Kong': { lat: 22.3, lon: 114.2, locationDesc: 'Hong Kong is a special administrative region on China’s south coast, encompassing a peninsula and islands in the Pearl River Delta.', weatherDesc: 'It has a subtropical climate with hot, humid summers and mild winters, influenced by monsoons.' },
            'Netherlands': { lat: 52.5, lon: 5.5, locationDesc: 'The Netherlands is a low‑lying country in Western Europe along the North Sea.', weatherDesc: 'It has a temperate maritime climate with mild summers, cool winters and frequent rainfall.' },
            'Saudi Arabia': { lat: 25.0, lon: 45.0, locationDesc: 'Saudi Arabia covers most of the Arabian Peninsula in the Middle East.', weatherDesc: 'It has a desert climate with extremely hot summers, mild winters and very little rainfall.' },
            'Poland': { lat: 52.0, lon: 19.0, locationDesc: 'Poland is in central Europe east of Germany, with a coastline on the Baltic Sea.', weatherDesc: 'It has a temperate continental climate with cold winters and warm summers.' },
            'Hungary': { lat: 47.0, lon: 20.0, locationDesc: 'Hungary is a landlocked country in central Europe within the Carpathian Basin.', weatherDesc: 'It has a temperate continental climate with hot summers, cold winters and moderate rainfall.' },
            'India': { lat: 21.0, lon: 78.0, locationDesc: 'India occupies most of the Indian subcontinent in South Asia, bordered by the Himalayas and surrounded by the Indian Ocean.', weatherDesc: 'It has diverse climates from tropical monsoon in the south to alpine in the north, with hot, wet summers and cooler, dry winters.' },
            'Switzerland': { lat: 46.8, lon: 8.2, locationDesc: 'Switzerland is a landlocked Alpine country in central Europe bordered by France, Germany, Austria, Italy and Liechtenstein.', weatherDesc: 'It has a temperate climate with cold winters and warm summers; cooler in the mountains.' },
            'Croatia': { lat: 45.1, lon: 15.2, locationDesc: 'Croatia is in southeastern Europe along the Adriatic Sea, with a long coastline and numerous islands.', weatherDesc: 'It has a Mediterranean climate along the coast and a continental climate inland.' },
            'Indonesia': { lat: -5.0, lon: 120.0, locationDesc: 'Indonesia is an archipelago in Southeast Asia and Oceania, spanning the equator between the Indian and Pacific Oceans.', weatherDesc: 'It has a tropical climate with high humidity and two seasons: wet and dry.' },
            'Morocco': { lat: 32.0, lon: -6.0, locationDesc: 'Morocco is in northwestern Africa with coastlines on the Atlantic Ocean and Mediterranean Sea.', weatherDesc: 'It has a Mediterranean climate in the north and a desert climate in the interior and south.' },
            'Denmark': { lat: 56.0, lon: 9.0, locationDesc: 'Denmark is a Scandinavian country in northern Europe consisting of a peninsula and numerous islands.', weatherDesc: 'It has a temperate maritime climate with mild winters, cool summers and frequent wind.' },
            'New Zealand': { lat: -41.0, lon: 174.3, locationDesc: 'New Zealand is a mountainous island nation in the southwest Pacific Ocean comprising two main islands and numerous smaller ones.', weatherDesc: 'It has a temperate maritime climate with mild temperatures, moderate rainfall and abundant sunshine.' }
            ,'Vietnam': { lat: 16.0, lon: 107.5, locationDesc: 'Vietnam is a long, S‑shaped country on the eastern edge of mainland Southeast Asia, stretching along the South China Sea.', weatherDesc: 'Its climate varies from humid subtropical in the north to tropical monsoon in the south with distinct wet and dry seasons.' }
            ,'Argentina': { lat: -34.0, lon: -64.0, locationDesc: 'Argentina occupies much of southern South America from the subtropical Gran Chaco in the north to windswept Patagonia in the south.', weatherDesc: 'It has diverse climates—subtropical in the north, temperate in the central Pampas and cold and arid in Patagonia—with seasons opposite those of the northern hemisphere.' }
            // Added entries for Sweden, Egypt and South Africa
            ,'Sweden': { lat: 60.0, lon: 15.0, locationDesc: 'Sweden is a Scandinavian country in northern Europe made up of a long peninsula and thousands of coastal islands.', weatherDesc: 'It has a temperate climate with cold, snowy winters and mild to warm summers.' }
            ,'Egypt': { lat: 26.0, lon: 30.0, locationDesc: 'Egypt lies in north‑eastern Africa with the Sinai Peninsula bridging Africa and Asia; the Nile River flows northwards through the country to the Mediterranean Sea.', weatherDesc: 'It has a hot desert climate with minimal rainfall; coastal areas along the Mediterranean and Red Sea are cooler and more humid.' }
            ,'South Africa': { lat: -29.0, lon: 24.0, locationDesc: 'South Africa occupies the southern tip of the African continent, bordered by both the Atlantic and Indian Oceans and completely surrounding Lesotho and Eswatini.', weatherDesc: 'It experiences a variety of climates—from Mediterranean in the south‑west to subtropical along the east coast and semi‑arid in the interior.' }
        };

        /**
         * Flag colour and code mappings.  These approximate the prominent colours of each country’s flag for use as a light
         * background in the history section, and provide ISO 3166‑1 alpha‑2 codes for loading flag images from flagcdn.com.
         */
        const flagThemes = {
            'Australia': '#E5F4FF',
            'Austria': '#FFEDEE',
            'Colombia': '#FFF9E6',
            'France': '#EDF4FF',
            'Spain': '#FFF5E6',
            'United States': '#E6F2FF',
            'China': '#FFEFEF',
            'Italy': '#E6F4E6',
            'Turkey': '#FFEFEF',
            'Mexico': '#E6F6E6',
            'Thailand': '#F0F4FF',
            'Germany': '#FFF6E6',
            'United Kingdom': '#E6F2FF',
            'Japan': '#FFF5F5',
            'Greece': '#E6F2FF',
            'Malaysia': '#EFF6FF',
            'Portugal': '#F7F0E6',
            'Canada': '#FFE8E8',
            'South Korea': '#F3F4FF',
            'Hong Kong': '#FFEFEF',
            'Netherlands': '#E6F2FF',
            'Saudi Arabia': '#E6F5E6',
            'Poland': '#FFEFEF',
            'Hungary': '#E6F7E6',
            'India': '#FFF5E6',
            'Switzerland': '#FFEFEF',
            'Croatia': '#E6F5FF',
            'Indonesia': '#FFEFEF',
            'Morocco': '#FFE6E6',
            'Denmark': '#FFEFEF',
            'New Zealand': '#E6F2FF',
            'Philippines': '#FFEFE6',
            'Singapore': '#FFEFEF',
            'Tanzania': '#E6F6E6',
            // Newly added countries for the dropdown
            'Vietnam': '#FFEFEF',
            'Argentina': '#E6F7FF',
            // Added themes for Sweden, Egypt and South Africa
            'Sweden': '#E6F5FF',
            'Egypt': '#FFF4E6',
            'South Africa': '#F7FCE6'
        };

        /*
         * Provide three representative colours for each country’s flag.  These arrays
         * are used to build gradients that honour the primary colours of each flag.
         * If a country isn’t listed here, the fallback gradient uses the single
         * theme colour defined in `flagThemes` and darkens it with generateGradient().
         */
        const flagColourSets = {
            'Australia': ['#00247D', '#C8102E', '#FFFFFF'],
            'Austria': ['#ED2939', '#FFFFFF', '#8B0000'],
            'Colombia': ['#FEDF00', '#0033A0', '#CE1126'],
            'France': ['#0055A4', '#FFFFFF', '#EF4135'],
            'Spain': ['#AA151B', '#F1BF00', '#AA151B'],
            'United States': ['#003366', '#B22234', '#FFFFFF'],
            'China': ['#DE2910', '#FFDE00', '#C8102E'],
            'Italy': ['#009246', '#FFFFFF', '#CE2B37'],
            'Turkey': ['#E30A17', '#FFFFFF', '#A80000'],
            'Mexico': ['#006847', '#FFFFFF', '#CE1126'],
            'Thailand': ['#A51931', '#FFFFFF', '#00247D'],
            'Germany': ['#000000', '#DD0000', '#FFCE00'],
            'United Kingdom': ['#012169', '#FFFFFF', '#C8102E'],
            'Japan': ['#FFFFFF', '#BC002D', '#8A0100'],
            'Greece': ['#0D5EAF', '#FFFFFF', '#57A0D3'],
            'Malaysia': ['#010066', '#FCD116', '#C00A0A'],
            'Portugal': ['#006600', '#C0003C', '#FFCC00'],
            'Canada': ['#FF0000', '#FFFFFF', '#A40000'],
            'South Korea': ['#FFFFFF', '#C60C30', '#003478'],
            'Hong Kong': ['#DC143C', '#FFFFFF', '#8C1A1A'],
            'Netherlands': ['#AE1C28', '#FFFFFF', '#21468B'],
            'Saudi Arabia': ['#006C35', '#FFFFFF', '#004225'],
            'Poland': ['#FFFFFF', '#DC143C', '#8C1A1A'],
            'Hungary': ['#CD2A3E', '#FFFFFF', '#436F4D'],
            'India': ['#FF9933', '#FFFFFF', '#138808'],
            'Switzerland': ['#FF0000', '#FFFFFF', '#800000'],
            'Croatia': ['#FF0000', '#FFFFFF', '#0A58A2'],
            'Indonesia': ['#E30A17', '#FFFFFF', '#A80000'],
            'Morocco': ['#C1272D', '#006233', '#831C21'],
            'Denmark': ['#C60C30', '#FFFFFF', '#A40000'],
            'New Zealand': ['#00247D', '#C8102E', '#FFFFFF'],
            'Singapore': ['#EF3340', '#FFFFFF', '#A6002E'],
            'Philippines': ['#0038A8', '#CE1126', '#FCD116'],
            'Tanzania': ['#1EB53A', '#FCD116', '#00A6D6'],
            // Add colour sets for Vietnam and Argentina flags
            'Vietnam': ['#DA251D', '#FFCC00', '#DA251D'],
            'Argentina': ['#74ACDF', '#FFFFFF', '#F6A844'],
            // Added colour sets for Sweden, Egypt and South Africa flags
            'Sweden': ['#006AA7', '#F6A800', '#006AA7'],
            'Egypt': ['#CE1126', '#F6B70A', '#000000'],
            'South Africa': ['#007A3D', '#FFB612', '#002395']
        };

        const flagCodes = {
            'Australia': 'au',
            'Austria': 'at',
            'Colombia': 'co',
            'France': 'fr',
            'Spain': 'es',
            'United States': 'us',
            'China': 'cn',
            'Italy': 'it',
            'Turkey': 'tr',
            'Mexico': 'mx',
            'Thailand': 'th',
            'Germany': 'de',
            'United Kingdom': 'gb',
            'Japan': 'jp',
            'Greece': 'gr',
            'Malaysia': 'my',
            'Portugal': 'pt',
            'Canada': 'ca',
            'South Korea': 'kr',
            'Hong Kong': 'hk',
            'Netherlands': 'nl',
            'Saudi Arabia': 'sa',
            'Poland': 'pl',
            'Hungary': 'hu',
            'India': 'in',
            'Switzerland': 'ch',
            'Croatia': 'hr',
            'Indonesia': 'id',
            'Morocco': 'ma',
            'Denmark': 'dk',
            'New Zealand': 'nz',
            'Philippines': 'ph',
            'Singapore': 'sg',
            'Tanzania': 'tz',
            // ISO 3166-1 alpha-2 codes for the new countries
            'Vietnam': 'vn',
            'Argentina': 'ar',
            // ISO codes for Sweden, Egypt and South Africa
            'Sweden': 'se',
            'Egypt': 'eg',
            'South Africa': 'za'
        };

        /**
         * Phrases grouped by category (greetings, food ordering, directions) for specific languages.  Each entry is
         * an array of [English phrase, translated phrase].  These were compiled from travel phrase guides.  For
         * countries not explicitly listed here, the fallback logic uses the basic phrases defined in countriesData.
         * Spanish phrases are used for Argentina, Colombia, Mexico and Spain (greetings: Hola/Buenos días/Buenas
         * tardes【870241404116662†L45-L50】; food ordering: "Hola, una mesa para dos, por favor" / "¿Puedo ver la carta?" / "La cuenta, por
         * favor"【870241404116662†L65-L73】; directions: "¿Dónde está la parada de metro?" / "¿Este tren va a...?" / "Estoy
         * perdido/a"【870241404116662†L98-L104】).  Italian phrases are used for Italy (greetings: Ciao/Buongiorno/Grazie【281973948873190†L414-L421】;
         * food ordering: "Un tavolo per uno/due, per favore" / "Il conto, per favore" / "Cosa mi consiglia?"【281973948873190†L257-L262】;
         * directions: "Dov’è il bagno?"【281973948873190†L253-L254】 / "Vorrei andare a" / "Mi sono perso"【281973948873190†L265-L266】).
         */
        const countryPhrasesByCategory = {
            'Argentina': {
                greetings: [
                    ['Hello', 'Hola'],
                    ['Good morning', 'Buenos días'],
                    ['Good afternoon', 'Buenas tardes']
                ],
                food: [
                    ['A table for two, please', 'Hola, una mesa para dos, por favor'],
                    ['Can I see the menu?', '¿Puedo ver la carta?'],
                    ['The bill, please', 'La cuenta, por favor']
                ],
                directions: [
                    ['Where is the metro stop?', '¿Dónde está la parada de metro?'],
                    ['Does this train go to…?', '¿Este tren va a…?'],
                    ['I am lost', 'Estoy perdido/a']
                ]
            },
            'Colombia': {
                greetings: [
                    ['Hello', 'Hola'],
                    ['Good morning', 'Buenos días'],
                    ['Good afternoon', 'Buenas tardes']
                ],
                food: [
                    ['A table for two, please', 'Hola, una mesa para dos, por favor'],
                    ['Can I see the menu?', '¿Puedo ver la carta?'],
                    ['The bill, please', 'La cuenta, por favor']
                ],
                directions: [
                    ['Where is the metro stop?', '¿Dónde está la parada de metro?'],
                    ['Does this train go to…?', '¿Este tren va a…?'],
                    ['I am lost', 'Estoy perdido/a']
                ]
            },
            'Mexico': {
                greetings: [
                    ['Hello', 'Hola'],
                    ['Good morning', 'Buenos días'],
                    ['Good afternoon', 'Buenas tardes']
                ],
                food: [
                    ['A table for two, please', 'Hola, una mesa para dos, por favor'],
                    ['Can I see the menu?', '¿Puedo ver la carta?'],
                    ['The bill, please', 'La cuenta, por favor']
                ],
                directions: [
                    ['Where is the metro stop?', '¿Dónde está la parada de metro?'],
                    ['Does this train go to…?', '¿Este tren va a…?'],
                    ['I am lost', 'Estoy perdido/a']
                ]
            },
            'Spain': {
                greetings: [
                    ['Hello', 'Hola'],
                    ['Good morning', 'Buenos días'],
                    ['Good afternoon', 'Buenas tardes']
                ],
                food: [
                    ['A table for two, please', 'Hola, una mesa para dos, por favor'],
                    ['Can I see the menu?', '¿Puedo ver la carta?'],
                    ['The bill, please', 'La cuenta, por favor']
                ],
                directions: [
                    ['Where is the metro stop?', '¿Dónde está la parada de metro?'],
                    ['Does this train go to…?', '¿Este tren va a…?'],
                    ['I am lost', 'Estoy perdido/a']
                ]
            },
            'Italy': {
                greetings: [
                    ['Hello', 'Ciao'],
                    ['Good morning', 'Buongiorno'],
                    ['Thank you', 'Grazie']
                ],
                food: [
                    ['A table for two, please', 'Un tavolo per uno/due, per favore'],
                    ['The bill, please', 'Il conto, per favore'],
                    ['What do you recommend?', 'Cosa mi consiglia?']
                ],
                directions: [
                    ['Where is the bathroom?', 'Dov’è il bagno?'],
                    ['I want to go to…', 'Vorrei andare a…'],
                    ['I am lost', 'Mi sono perso/persa']
                ]
            },
            // French phrases for France and French‑speaking regions
            'France': {
                greetings: [
                    ['Hello', 'Bonjour'],
                    ['Good morning', 'Bonjour'],
                    ['Thank you', 'Merci']
                ],
                food: [
                    ['A table for two, please', 'Une table pour deux, s\'il vous plaît'],
                    ['Can I see the menu?', 'Puis‑je voir le menu ?'],
                    ['The bill, please', 'L\'addition, s\'il vous plaît']
                ],
                directions: [
                    ['Where is the metro station?', 'Où est la station de métro ?'],
                    ['Does this bus go to…?', 'Ce bus va‑t‑il à… ?'],
                    ['I am lost', 'Je suis perdu(e)']
                ]
            },
            // German phrases for Germany and Austria
            'Germany': {
                greetings: [
                    ['Hello', 'Hallo'],
                    ['Good morning', 'Guten Morgen'],
                    ['Thank you', 'Danke']
                ],
                food: [
                    ['A table for two, please', 'Einen Tisch für zwei, bitte'],
                    ['Can I see the menu?', 'Kann ich die Speisekarte sehen?'],
                    ['The bill, please', 'Die Rechnung, bitte']
                ],
                directions: [
                    ['Where is the metro station?', 'Wo ist die U‑Bahn‑Station?'],
                    ['Does this bus go to…?', 'Fährt dieser Bus nach…?'],
                    ['I am lost', 'Ich habe mich verlaufen']
                ]
            },
            'Austria': {
                greetings: [
                    ['Hello', 'Hallo'],
                    ['Good morning', 'Guten Morgen'],
                    ['Thank you', 'Danke']
                ],
                food: [
                    ['A table for two, please', 'Einen Tisch für zwei, bitte'],
                    ['Can I see the menu?', 'Kann ich die Speisekarte sehen?'],
                    ['The bill, please', 'Die Rechnung, bitte']
                ],
                directions: [
                    ['Where is the metro station?', 'Wo ist die U‑Bahn‑Station?'],
                    ['Does this bus go to…?', 'Fährt dieser Bus nach…?'],
                    ['I am lost', 'Ich habe mich verlaufen']
                ]
            },
            // Portuguese phrases for Portugal
            'Portugal': {
                greetings: [
                    ['Hello', 'Olá'],
                    ['Good morning', 'Bom dia'],
                    ['Thank you', 'Obrigado']
                ],
                food: [
                    ['A table for two, please', 'Uma mesa para dois, por favor'],
                    ['Can I see the menu?', 'Posso ver o menu?'],
                    ['The bill, please', 'A conta, por favor']
                ],
                directions: [
                    ['Where is the metro station?', 'Onde fica a estação de metro?'],
                    ['Does this bus go to…?', 'Este autocarro vai para…?'],
                    ['I am lost', 'Estou perdido/a']
                ]
            },
            // Turkish phrases for Turkey
            'Turkey': {
                greetings: [
                    ['Hello', 'Merhaba'],
                    ['Good morning', 'Günaydın'],
                    ['Thank you', 'Teşekkür ederim']
                ],
                food: [
                    ['A table for two, please', 'İki kişilik bir masa lütfen'],
                    ['Can I see the menu?', 'Menüyü görebilir miyim?'],
                    ['The bill, please', 'Hesap lütfen']
                ],
                directions: [
                    ['Where is the metro station?', 'Metro durağı nerede?'],
                    ['Does this bus go to…?', 'Bu otobüs … gidiyor mu?'],
                    ['I am lost', 'Kayboldum']
                ]
            },
            // Greek phrases for Greece
            'Greece': {
                greetings: [
                    ['Hello', 'Γεια σας'],
                    ['Good morning', 'Καλημέρα'],
                    ['Thank you', 'Ευχαριστώ']
                ],
                food: [
                    ['A table for two, please', 'Ένα τραπέζι για δύο παρακαλώ'],
                    ['Can I see the menu?', 'Μπορώ να δω το μενού;'],
                    ['The bill, please', 'Ο λογαριασμός, παρακαλώ']
                ],
                directions: [
                    ['Where is the metro station?', 'Πού είναι η στάση του μετρό;'],
                    ['Does this bus go to…?', 'Αυτό το λεωφορείο πηγαίνει στο…;'],
                    ['I am lost', 'Έχω χαθεί']
                ]
            },
            // Finnish phrases for Finland
            'Finland': {
                greetings: [
                    ['Hello', 'Hei'],
                    ['Good morning', 'Hyvää huomenta'],
                    ['Thank you', 'Kiitos']
                ],
                food: [
                    ['A table for two, please', 'Pöytä kahdelle, kiitos'],
                    ['Can I see the menu?', 'Saanko nähdä ruokalistan?'],
                    ['The bill, please', 'Lasku, kiitos']
                ],
                directions: [
                    ['Where is the metro station?', 'Missä on metroasema?'],
                    ['Does this train go to…?', 'Meneekö tämä juna …?'],
                    ['I am lost', 'Olen eksynyt']
                ]
            },
            // Norwegian phrases for Norway
            'Norway': {
                greetings: [
                    ['Hello', 'Hei'],
                    ['Good morning', 'God morgen'],
                    ['Thank you', 'Takk']
                ],
                food: [
                    ['A table for two, please', 'Et bord for to, takk'],
                    ['Can I see the menu?', 'Kan jeg se menyen?'],
                    ['The bill, please', 'Regningen, takk']
                ],
                directions: [
                    ['Where is the metro station?', 'Hvor er t‑banestasjonen?'],
                    ['Does this bus go to…?', 'Går denne bussen til …?'],
                    ['I am lost', 'Jeg har gått meg vill']
                ]
            },
            // Romanian phrases for Romania
            'Romania': {
                greetings: [
                    ['Hello', 'Salut'],
                    ['Good morning', 'Bună dimineața'],
                    ['Thank you', 'Mulțumesc']
                ],
                food: [
                    ['A table for two, please', 'O masă pentru două persoane, vă rog'],
                    ['Can I see the menu?', 'Pot să văd meniul?'],
                    ['The bill, please', 'Nota de plată, vă rog']
                ],
                directions: [
                    ['Where is the metro station?', 'Unde este stația de metrou?'],
                    ['Does this bus go to…?', 'Acest autobuz merge la …?'],
                    ['I am lost', 'M‑am pierdut']
                ]
            },
            // Dutch phrases for the Netherlands
            'Netherlands': {
                greetings: [
                    ['Hello', 'Hallo'],
                    ['Good morning', 'Goedemorgen'],
                    ['Thank you', 'Dank je']
                ],
                food: [
                    ['A table for two, please', 'Een tafel voor twee, alstublieft'],
                    ['Can I see the menu?', 'Mag ik de menukaart zien?'],
                    ['The bill, please', 'De rekening, alstublieft']
                ],
                directions: [
                    ['Where is the metro station?', 'Waar is het metrostation?'],
                    ['Does this train go to…?', 'Gaat deze trein naar …?'],
                    ['I am lost', 'Ik ben verdwaald']
                ]
            },
            // Polish phrases for Poland
            'Poland': {
                greetings: [
                    ['Hello', 'Cześć'],
                    ['Good morning', 'Dzień dobry'],
                    ['Thank you', 'Dziękuję']
                ],
                food: [
                    ['A table for two, please', 'Stolik dla dwóch osób, proszę'],
                    ['Can I see the menu?', 'Czy mogę zobaczyć menu?'],
                    ['The bill, please', 'Rachunek, proszę']
                ],
                directions: [
                    ['Where is the metro station?', 'Gdzie jest stacja metra?'],
                    ['Does this bus go to…?', 'Czy ten autobus jedzie do …?'],
                    ['I am lost', 'Zgubiłem się']
                ]
            },
            // Hungarian phrases for Hungary
            'Hungary': {
                greetings: [
                    ['Hello', 'Szia'],
                    ['Good morning', 'Jó reggelt'],
                    ['Thank you', 'Köszönöm']
                ],
                food: [
                    ['A table for two, please', 'Egy asztalt két főre, kérem'],
                    ['Can I see the menu?', 'Megnézhetem az étlapot?'],
                    ['The bill, please', 'A számlát, kérem']
                ],
                directions: [
                    ['Where is the metro station?', 'Hol van a metróállomás?'],
                    ['Does this bus go to…?', 'Ez a busz …‑ba megy?'],
                    ['I am lost', 'Elvesztem']
                ]
            },
            // Hindi phrases for India
            'India': {
                greetings: [
                    ['Hello', 'नमस्ते (Namaste)'],
                    ['Good morning', 'सुप्रभात (Suprabhat)'],
                    ['Thank you', 'धन्यवाद (Dhanyavaad)']
                ],
                food: [
                    ['A table for two, please', 'दो लोगों के लिए एक मेज, कृपया'],
                    ['Can I see the menu?', 'क्या मैं मेनू देख सकता/सकती हूँ?'],
                    ['The bill, please', 'बिल दीजिए']
                ],
                directions: [
                    ['Where is the metro station?', 'मेट्रो स्टेशन कहाँ है?'],
                    ['Does this bus go to…?', 'क्या यह बस … जाती है?'],
                    ['I am lost', 'मैं रास्ता भटक गया/गई हूँ']
                ]
            },
            // Japanese phrases for Japan
            'Japan': {
                greetings: [
                    ['Hello', 'Konnichiwa'],
                    ['Good morning', 'Ohayo gozaimasu'],
                    ['Thank you', 'Arigato']
                ],
                food: [
                    ['A table for two, please', 'Futariyo no teeburu o onegaishimasu'],
                    ['Can I see the menu?', 'Menu o misete kudasai'],
                    ['The bill, please', 'Okanjo o onegaishimasu']
                ],
                directions: [
                    ['Where is the metro station?', 'Chikatetsu no eki wa doko desu ka?'],
                    ['Does this train go to…?', 'Kono densha wa … ni ikimasu ka?'],
                    ['I am lost', 'Mayoimashita']
                ]
            },
            // Chinese phrases for China
            'China': {
                greetings: [
                    ['Hello', 'Ni hao'],
                    ['Good morning', 'Zao shang hao'],
                    ['Thank you', 'Xie xie']
                ],
                food: [
                    ['A table for two, please', 'Qing gei wo liang ge ren de zhuozi'],
                    ['Can I see the menu?', 'Ke yi kan yi xia cai dan ma'],
                    ['The bill, please', 'Mai dan xie xie']
                ],
                directions: [
                    ['Where is the metro station?', 'Ditie zhan zai nar'],
                    ['Does this train go to…?', 'Zhe ban che qu … ma'],
                    ['I am lost', 'Wo mi lu le']
                ]
            },
            // Korean phrases for South Korea
            'South Korea': {
                greetings: [
                    ['Hello', 'Annyeong haseyo'],
                    ['Good morning', 'Joheun achimieyo'],
                    ['Thank you', 'Gamsahamnida']
                ],
                food: [
                    ['A table for two, please', 'Du myeong jari butakhamnida'],
                    ['Can I see the menu?', 'Menyureul bol su isseulkkayo?'],
                    ['The bill, please', 'Gyesanseo juseyo']
                ],
                directions: [
                    ['Where is the metro station?', 'Jihacheol yeogi eodieyo?'],
                    ['Does this bus go to…?', 'I beoseuneun …e ganayo?'],
                    ['I am lost', 'Gireul ilheosseoyo']
                ]
            },
            // Malay phrases for Malaysia
            'Malaysia': {
                greetings: [
                    ['Hello', 'Hai'],
                    ['Good morning', 'Selamat pagi'],
                    ['Thank you', 'Terima kasih']
                ],
                food: [
                    ['A table for two, please', 'Satu meja untuk dua orang, tolong'],
                    ['Can I see the menu?', 'Boleh saya lihat menu?'],
                    ['The bill, please', 'Boleh saya dapatkan bil?']
                ],
                directions: [
                    ['Where is the metro station?', 'Di mana stesen kereta api bawah tanah?'],
                    ['Does this bus go to…?', 'Adakah bas ini pergi ke …?'],
                    ['I am lost', 'Saya sesat']
                ]
            },
            // Thai phrases for Thailand
            'Thailand': {
                greetings: [
                    ['Hello', 'Sawasdee'],
                    ['Good morning', 'Arun sawat'],
                    ['Thank you', 'Khop khun']
                ],
                food: [
                    ['A table for two, please', 'Khor to sam rub song khon'],
                    ['Can I see the menu?', 'Kho du menu dai mai'],
                    ['The bill, please', 'Kid ngeun duay']
                ],
                directions: [
                    ['Where is the metro station?', 'Satanee rot fai fah yoo tee nai'],
                    ['Does this bus go to…?', 'Rot khan nee bpai … mai'],
                    ['I am lost', 'Chan long tang']
                ]
            },
            // Arabic phrases for Egypt, Morocco, Saudi Arabia
            'Egypt': {
                greetings: [
                    ['Hello', 'Marhaba'],
                    ['Good morning', 'Sabah al khayr'],
                    ['Thank you', 'Shukran']
                ],
                food: [
                    ['A table for two, please', 'Tawila li shakhsein, min fadlik'],
                    ['Can I see the menu?', 'Hal yumkinuni ruat al qaeima?'],
                    ['The bill, please', 'Al hisab min fadlik']
                ],
                directions: [
                    ['Where is the metro station?', 'Ayna mahattat al metro?'],
                    ['Does this bus go to…?', 'Hal hatha al baas yadhhab ila …?'],
                    ['I am lost', 'Ana daiaa']
                ]
            },
            'Morocco': {
                greetings: [
                    ['Hello', 'Marhaba'],
                    ['Good morning', 'Sabah al khayr'],
                    ['Thank you', 'Shukran']
                ],
                food: [
                    ['A table for two, please', 'Tawila li shakhsein, min fadlik'],
                    ['Can I see the menu?', 'Hal yumkinuni ruat al qaeima?'],
                    ['The bill, please', 'Al hisab min fadlik']
                ],
                directions: [
                    ['Where is the metro station?', 'Ayna mahattat al metro?'],
                    ['Does this bus go to…?', 'Hal hatha al baas yadhhab ila …?'],
                    ['I am lost', 'Ana daiaa']
                ]
            },
            'Saudi Arabia': {
                greetings: [
                    ['Hello', 'Marhaba'],
                    ['Good morning', 'Sabah al khayr'],
                    ['Thank you', 'Shukran']
                ],
                food: [
                    ['A table for two, please', 'Tawila li shakhsein, min fadlik'],
                    ['Can I see the menu?', 'Hal yumkinuni ruat al qaeima?'],
                    ['The bill, please', 'Al hisab min fadlik']
                ],
                directions: [
                    ['Where is the metro station?', 'Ayna mahattat al metro?'],
                    ['Does this bus go to…?', 'Hal hatha al baas yadhhab ila …?'],
                    ['I am lost', 'Ana daiaa']
                ]
            },
            // Swedish phrases for Sweden
            'Sweden': {
                greetings: [
                    ['Hello', 'Hej'],
                    ['Good morning', 'God morgon'],
                    ['Thank you', 'Tack']
                ],
                food: [
                    ['A table for two, please', 'Ett bord för två, tack'],
                    ['Can I see the menu?', 'Kan jag få se menyn?'],
                    ['The bill, please', 'Notan, tack']
                ],
                directions: [
                    ['Where is the metro station?', 'Var ligger tunnelbanestationen?'],
                    ['Does this bus go to…?', 'Går den här bussen till …?'],
                    ['I am lost', 'Jag har gått vilse']
                ]
            },
            // English phrases for English‑speaking countries (USA, UK, Canada, Australia, New Zealand, Hong Kong)
            'United States': {
                greetings: [
                    ['Hello', 'Hello'],
                    ['Good morning', 'Good morning'],
                    ['Thank you', 'Thank you']
                ],
                food: [
                    ['A table for two, please', 'A table for two, please'],
                    ['Can I see the menu?', 'Can I see the menu?'],
                    ['The bill, please', 'The bill, please']
                ],
                directions: [
                    ['Where is the train station?', 'Where is the train station?'],
                    ['Does this bus go to…?', 'Does this bus go to…?'],
                    ['I am lost', 'I am lost']
                ]
            },
            'United Kingdom': {
                greetings: [
                    ['Hello', 'Hello'],
                    ['Good morning', 'Good morning'],
                    ['Thank you', 'Thank you']
                ],
                food: [
                    ['A table for two, please', 'A table for two, please'],
                    ['Can I see the menu?', 'Can I see the menu?'],
                    ['The bill, please', 'The bill, please']
                ],
                directions: [
                    ['Where is the train station?', 'Where is the train station?'],
                    ['Does this bus go to…?', 'Does this bus go to…?'],
                    ['I am lost', 'I am lost']
                ]
            },
            'Canada': {
                greetings: [
                    ['Hello', 'Hello'],
                    ['Good morning', 'Good morning'],
                    ['Thank you', 'Thank you']
                ],
                food: [
                    ['A table for two, please', 'A table for two, please'],
                    ['Can I see the menu?', 'Can I see the menu?'],
                    ['The bill, please', 'The bill, please']
                ],
                directions: [
                    ['Where is the train station?', 'Where is the train station?'],
                    ['Does this bus go to…?', 'Does this bus go to…?'],
                    ['I am lost', 'I am lost']
                ]
            },
            'Australia': {
                greetings: [
                    ['Hello', 'Hello'],
                    ['Good morning', 'Good morning'],
                    ['Thank you', 'Thank you']
                ],
                food: [
                    ['A table for two, please', 'A table for two, please'],
                    ['Can I see the menu?', 'Can I see the menu?'],
                    ['The bill, please', 'The bill, please']
                ],
                directions: [
                    ['Where is the train station?', 'Where is the train station?'],
                    ['Does this bus go to…?', 'Does this bus go to…?'],
                    ['I am lost', 'I am lost']
                ]
            },
            'New Zealand': {
                greetings: [
                    ['Hello', 'Hello'],
                    ['Good morning', 'Good morning'],
                    ['Thank you', 'Thank you']
                ],
                food: [
                    ['A table for two, please', 'A table for two, please'],
                    ['Can I see the menu?', 'Can I see the menu?'],
                    ['The bill, please', 'The bill, please']
                ],
                directions: [
                    ['Where is the train station?', 'Where is the train station?'],
                    ['Does this bus go to…?', 'Does this bus go to…?'],
                    ['I am lost', 'I am lost']
                ]
            },
            'Hong Kong': {
                // Romanised Cantonese phrases for Hong Kong to avoid using Chinese characters
                greetings: [
                    ['Hello', 'Neih hou'],
                    ['Good morning', 'Jo san'],
                    ['Thank you', 'Mm goi']
                ],
                food: [
                    ['A table for two, please', 'Yat wai jo yi, mm goi'],
                    ['Can I see the menu?', 'Mm goi, bei yut fan choi'],
                    ['The bill, please', 'Mm goi, mai dahn']
                ],
                directions: [
                    ['Where is the metro station?', 'Dei tit jaan hai bin dou?'],
                    ['Does this bus go to...?', 'Ni ga ba si heui ... ma?'],
                    ['I am lost', 'Ngo mi lou la']
                ]
            },
            // Danish phrases for Denmark
            'Denmark': {
                greetings: [
                    ['Hello', 'Hej'],
                    ['Good morning', 'Godmorgen'],
                    ['Thank you', 'Tak']
                ],
                food: [
                    ['A table for two, please', 'Et bord til to, tak'],
                    ['Can I see the menu?', 'Må jeg se menuen?'],
                    ['The bill, please', 'Må jeg få regningen?']
                ],
                directions: [
                    ['Where is the train station?', 'Hvor er togstationen?'],
                    ['Does this bus go to…?', 'Kører denne bus til …?'],
                    ['I am lost', 'Jeg har faret vild']
                ]
            },
            // Filipino phrases for the Philippines
            'Philippines': {
                greetings: [
                    ['Hello', 'Kamusta'],
                    ['Good morning', 'Magandang umaga'],
                    ['Thank you', 'Salamat']
                ],
                food: [
                    ['A table for two, please', 'Isang mesa para sa dalawa, pakiusap'],
                    ['Can I see the menu?', 'Pwede ko bang makita ang menu?'],
                    ['The bill, please', 'Pwede ba ang bill?']
                ],
                directions: [
                    ['Where is the train station?', 'Nasaan ang estasyon ng tren?'],
                    ['Does this bus go to…?', 'Papunta ba ang bus na ito sa …?'],
                    ['I am lost', 'Nawawala ako']
                ]
            },
            // Malay phrases for Singapore (reuse Malaysian set for convenience)
            'Singapore': {
                greetings: [
                    ['Hello', 'Halo'],
                    ['Good morning', 'Selamat pagi'],
                    ['Thank you', 'Terima kasih']
                ],
                food: [
                    ['A table for two, please', 'Satu meja untuk dua orang, tolong'],
                    ['Can I see the menu?', 'Boleh saya lihat menu?'],
                    ['The bill, please', 'Boleh saya dapatkan bil?']
                ],
                directions: [
                    ['Where is the metro station?', 'Di mana stesen MRT?'],
                    ['Does this bus go to…?', 'Adakah bas ini pergi ke …?'],
                    ['I am lost', 'Saya sesat']
                ]
            },
            // Swahili phrases for Tanzania
            'Tanzania': {
                greetings: [
                    ['Hello', 'Habari'],
                    ['Good morning', 'Habari za asubuhi'],
                    ['Thank you', 'Asante']
                ],
                food: [
                    ['A table for two, please', 'Meza kwa wawili, tafadhali'],
                    ['Can I see the menu?', 'Naweza kuona menyu?'],
                    ['The bill, please', 'Naweza kupata bili?']
                ],
                directions: [
                    ['Where is the train station?', 'Kituo cha treni kiko wapi?'],
                    ['Does this bus go to…?', 'Je, basi hili linaenda …?'],
                    ['I am lost', 'Nimepotea']
                ]
            },
            // Vietnamese phrases for Vietnam
            'Vietnam': {
                greetings: [
                    ['Hello', 'Xin chào'],
                    ['Good morning', 'Chào buổi sáng'],
                    ['Thank you', 'Cảm ơn']
                ],
                food: [
                    ['A table for two, please', 'Cho tôi một bàn cho hai người'],
                    ['Can I see the menu?', 'Tôi có thể xem thực đơn không?'],
                    ['The bill, please', 'Tính tiền, làm ơn']
                ],
                directions: [
                    ['Where is the train station?', 'Nhà ga ở đâu?'],
                    ['Does this bus go to…?', 'Xe buýt này có đi tới … không?'],
                    ['I am lost', 'Tôi bị lạc']
                ]
            },
            // Norwegian phrases already provided above for Norway (duplicate for completeness).  Use same entries for the Norwegian card if needed.
        };

        // Elements used in the script
        const countrySelect = document.getElementById('country-select');
        const countryNameSpan = document.getElementById('country-name');
        const historyText = document.getElementById('history-text');
        const attractionsList = document.getElementById('attractions-list');
        const foodsIntro = document.getElementById('foods-intro');
        const foodsList = document.getElementById('foods-list');
        const hotelAffordabilityEl = document.getElementById('hotel-affordability');
        const costBarInner = document.getElementById('cost-bar-inner');
        const costText = document.getElementById('cost-text');
        // Local currency information card element
        const currencyInfoEl = document.getElementById('currency-info');
        const safetyList = document.getElementById('safety-list');
        // Updated ID for the phrases list used in the Essential Phrases card
        const phrasesList = document.getElementById('essential-phrases-list');
        const emergencyList = document.getElementById('emergency-list');
        // Map related elements for the geography & climate section
        const mapContainer = document.getElementById('map-container');
        const mapMarker = document.getElementById('map-marker');
        const locationDescriptionEl = document.getElementById('location-description');
        const localTimeDisplay = document.getElementById('local-time-display');
        const destinationTimeDisplay = document.getElementById('destination-time-display');
        const currencyAmountInput = document.getElementById('currency-amount');
        const fromCurrencySelect = document.getElementById('from-currency');
        const toCurrencySelect = document.getElementById('to-currency');
        const currencyResult = document.getElementById('currency-result');

        // Elements and state for the holiday calendar overlay
        const calendarThumbnail = document.getElementById('calendar-thumbnail');
        const calendarOverlay = document.getElementById('calendar-overlay');
        const interactiveCalendarEl = document.getElementById('interactive-calendar');
        const overlayMonthYearEl = document.getElementById('overlay-month-year');
        const prevMonthBtnOverlay = document.getElementById('prev-month-btn-overlay');
        const nextMonthBtnOverlay = document.getElementById('next-month-btn-overlay');
        const closeCalendarBtn = document.getElementById('close-calendar-btn');

        // Track the currently selected country and the current month/year shown in the overlay
        let selectedCountry = '';
        let overlayCurrentMonth = new Date().getMonth();
        let overlayCurrentYear = new Date().getFullYear();

        // Elements for the holiday calendar tool
        const prevMonthBtn = document.getElementById('prev-month-btn');
        const nextMonthBtn = document.getElementById('next-month-btn');
        const calendarMonthYear = document.getElementById('calendar-month-year');
        const holidayList = document.getElementById('holiday-list');
        // Track the currently displayed month and year for the holiday calendar.  Initialise to the current date.
        let currentCalendarMonth = new Date().getMonth();
        let currentCalendarYear = new Date().getFullYear();
        // Define the range of years allowed for the holiday calendar (current year and next year only).  All navigation
        // logic for the small and pop‑up calendars will clamp the year within this range.  This prevents users from
        // viewing past years or years beyond the next calendar year.
        const calendarStartYear = new Date().getFullYear();
        const calendarEndYear = calendarStartYear + 1;
        const currencyNote = document.getElementById('currency-note');
        const convertCurrencyBtn = document.getElementById('convert-currency-btn');
        // Featured destination title element
        const featuredTitleEl = document.getElementById('featured-title');
        const measurementInput = document.getElementById('measurement-input');
        const fromUnitSelect = document.getElementById('from-unit');
        const toUnitSelect = document.getElementById('to-unit');
        const measurementResult = document.getElementById('measurement-result');
        const convertMeasurementBtn = document.getElementById('convert-measurement-btn');
        const getIpBtn = document.getElementById('get-ip-btn');
        const ipAddressDisplay = document.getElementById('ip-address-display');
        const commentForm = document.getElementById('comment-form');
        const commentName = document.getElementById('comment-name');
        const commentCountrySelect = document.getElementById('comment-country');
        const commentPhoto = document.getElementById('comment-photo');
        const commentText = document.getElementById('comment-text');
        const commentsDisplay = document.getElementById('comments-display');
        const scrollBtn = document.getElementById('scrollToTopBtn');

        // Elements for newly added informational sections
        const learnMoreTextEl = document.getElementById('learn-more-text');
        const localsTextEl = document.getElementById('locals-text');

        // Variable to store exchange rates
        let exchangeRates = {};
        // Fallback exchange rates used when the live API call fails.  These values are approximate and
        // provided solely for demonstration so the converter continues to function offline.
        const defaultExchangeRates = {
            USD: 1,
            AUD: 1.5,
            EUR: 0.9,
            COP: 4000,
            SGD: 1.37,
            PHP: 55,
            TZS: 2500,
            // Additional common currencies can be added here as needed
        };

        /**
         * Populate the destination dropdown and comment country dropdown with the
         * country names defined in countriesData.  Sort alphabetically for ease of use.
         */
        function populateCountryDropdowns() {
            const countryNames = Object.keys(countriesData).sort();
            countryNames.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                countrySelect.appendChild(option);
                // duplicate for comment form
                const option2 = option.cloneNode(true);
                commentCountrySelect.appendChild(option2);
            });
            // set default to the first country
            countrySelect.value = countryNames[0];
            commentCountrySelect.value = countryNames[0];
            updateCountryContent(countryNames[0]);
        }

        /**
         * Convert a hex colour (e.g. "#1E90FF") into an rgba string with
         * the specified alpha value.  This helper is used to create a
         * lightly tinted background for the history card so that the
         * attractions box can stand out separately.  If the provided
         * colour is not a valid hex string, a fallback neutral tint
         * is returned.
         * @param {string} hex The 3 or 6 character hex colour beginning with '#'
         * @param {number} alpha The desired opacity (0–1)
         * @returns {string} An rgba() string representing the tinted colour
         */
        function hexToRgba(hex, alpha) {
            if (!hex || typeof hex !== 'string' || !hex.startsWith('#')) {
                // fallback to a very light grey with the requested alpha
                return `rgba(247, 247, 247, ${alpha})`;
            }
            let cleaned = hex.substring(1);
            // Expand shorthand (#abc) to full form (#aabbcc)
            if (cleaned.length === 3) {
                cleaned = cleaned.split('').map(ch => ch + ch).join('');
            }
            const bigint = parseInt(cleaned, 16);
            const r = (bigint >> 16) & 255;
            const g = (bigint >> 8) & 255;
            const b = bigint & 255;
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        /**
         * Lighten a hex colour by mixing it with white.  The factor controls
         * how much white is added (0 = no change, 1 = white).  This helper
         * generates gradient colours derived from a base flag colour.
         * @param {string} hex The original 6‑digit hex colour string (with or without '#')
         * @param {number} factor The lighten factor between 0 and 1
         * @returns {string} A new hex colour string beginning with '#'
         */
        function lightenHexColor(hex, factor) {
            if (!hex) return '#ffffff';
            let cleaned = hex.replace('#', '');
            if (cleaned.length === 3) {
                cleaned = cleaned.split('').map(ch => ch + ch).join('');
            }
            const r = parseInt(cleaned.substring(0, 2), 16);
            const g = parseInt(cleaned.substring(2, 4), 16);
            const b = parseInt(cleaned.substring(4, 6), 16);
            const newR = Math.min(255, Math.floor(r + (255 - r) * factor));
            const newG = Math.min(255, Math.floor(g + (255 - g) * factor));
            const newB = Math.min(255, Math.floor(b + (255 - b) * factor));
            return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
        }

        /**
         * Darken a hex colour by mixing it with black.  The factor controls how
         * much black is added (0 = no change, 1 = full black).  This helper is used
         * to generate dark gradients derived from flag colours.
         * @param {string} hex The original 6‑digit hex colour string (with or without '#')
         * @param {number} factor The darken factor between 0 and 1
         * @returns {string} A new hex colour string beginning with '#'
         */
        function darkenHexColor(hex, factor) {
            if (!hex) return '#000000';
            let cleaned = hex.replace('#', '');
            if (cleaned.length === 3) {
                cleaned = cleaned.split('').map(ch => ch + ch).join('');
            }
            const r = parseInt(cleaned.substring(0, 2), 16);
            const g = parseInt(cleaned.substring(2, 4), 16);
            const b = parseInt(cleaned.substring(4, 6), 16);
            const newR = Math.max(0, Math.floor(r * (1 - factor)));
            const newG = Math.max(0, Math.floor(g * (1 - factor)));
            const newB = Math.max(0, Math.floor(b * (1 - factor)));
            return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
        }

        /**
         * Generate a three‑colour gradient based on a base flag colour.  The first
         * element is the original colour, the second and third are progressively
         * lightened versions of the base colour.
         * @param {string} baseColour A hex colour representing the dominant flag colour
         * @returns {Array<string>} An array of three hex colours
         */
        function generateGradient(baseColour) {
            /*
             * Generate a dark three‑stop gradient derived from a base flag colour.  The
             * gradient intentionally uses stronger darkening factors to produce a more
             * dramatic appearance so the content stands out against the coloured boxes.
             * Starting at a colour darkened by 70%, then 40%, finishing close to the
             * original shade ensures the panels remain legible while still evoking
             * the selected country’s flag.  These values were chosen to meet the
             * user’s request for “much more darker” backgrounds.
             */
            return [
                darkenHexColor(baseColour, 0.7),
                darkenHexColor(baseColour, 0.4),
                darkenHexColor(baseColour, 0.1)
            ];
        }

        /*
         * Note: In earlier versions this site included a dropdown for selecting
         * local time zones.  To keep the interface simple on phones and
         * tablets, that dropdown was removed.  The following helper has been
         * deleted since it referenced a non‑existent `localSelect` element.
         */

        /**
         * Update the content areas when a country is selected.  This pulls
         * information from the countriesData object and populates the DOM.
         * @param {string} countryName The selected country
         */
        function updateCountryContent(countryName) {
            const data = countriesData[countryName];
            if (!data) return;
            // Update the destination heading with the selected country name and map emoji.  The heading now reads
            // "Choose Your Destination" rather than "Featured Destination".
            if (featuredTitleEl) {
                featuredTitleEl.innerHTML = `Choose Your Destination: ${countryName} 🗺️`;
            }
            // Grab elements for history card and attractions display
            const historyBoxEl = document.getElementById('history-box');
            // In earlier versions a "Top Attractions" panel existed; in the current version it has been replaced
            // by a Geography & Climate section.  Access these elements only if they still exist in the DOM.
            const attractionBoxEl = document.getElementById('attraction-box');
            const attractionContentEl = document.getElementById('attraction-content');
            // Determine the theme colours for this country’s flag.  If a set of
            // explicit flag colours is defined, build a gradient using all three.
            // Otherwise fall back to a darkened gradient derived from a single
            // dominant colour in flagThemes.  Apply this gradient to both cards.
            const colourSet = flagColourSets[countryName];
            let gradient;
            if (Array.isArray(colourSet) && colourSet.length === 3) {
                // Darken each colour for the gradient.  If one of the colours is pure white,
                // darken it more heavily to avoid bright patches that can reduce text contrast.
                const darkColours = colourSet.map(col => {
                    const hex = col.replace('#', '').toLowerCase();
                    const isWhite = (hex === 'ffffff' || hex === 'fff');
                    return darkenHexColor(col, isWhite ? 0.8 : 0.3);
                });
                gradient = `linear-gradient(135deg, ${darkColours[0]}, ${darkColours[1]}, ${darkColours[2]})`;
            } else {
                const themeColour = flagThemes[countryName] || '#F7F7F7';
                const [c1, c2, c3] = generateGradient(themeColour);
                gradient = `linear-gradient(135deg, ${c1}, ${c2}, ${c3})`;
            }
            // If a legacy attractions panel exists, apply the gradient and display the top three attractions.
            if (attractionBoxEl && attractionContentEl) {
                // Apply the gradient only to the attractions box.  The history box uses a transparent background.
                attractionBoxEl.style.backgroundImage = gradient;
                attractionBoxEl.style.backgroundColor = '';
                // Display up to three attractions in the inner content container.  Wrap each item in a <div> so we can apply spacing via Tailwind’s space‑y utility.
                const topAttractions = data.attractions.slice(0, 3);
                attractionContentEl.classList.add('space-y-4');
                attractionContentEl.innerHTML = topAttractions.map(item => `<div>${item}</div>`).join('');
            }
            // Always ensure the history box has no gradient so it blends into the page and has a plain white background.
            historyBoxEl.style.backgroundImage = '';
            historyBoxEl.style.backgroundColor = '#ffffff';
            // Set the country name and history text.  The text is centred via CSS.
            countryNameSpan.textContent = countryName;
            // Update the selected country for use in the holiday calendar overlay
            selectedCountry = countryName;

            // If the holiday calendar overlay is currently visible, update its content for the new country
            if (calendarOverlay && !calendarOverlay.classList.contains('hidden')) {
                renderInteractiveCalendar(selectedCountry);
            }
            historyText.textContent = data.history;
            // Attractions list (if the list element exists).  When the list has been removed (e.g. replaced by the map),
            // skip updating it to avoid errors.
            if (attractionsList) {
                attractionsList.innerHTML = '';
                data.attractions.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    attractionsList.appendChild(li);
                });
            }
            // Foods
            foodsIntro.textContent = data.foodsIntro;
            foodsList.innerHTML = '';
            data.foods.forEach(food => {
                const card = document.createElement('div');
                // Apply consistent hover and shadow effects for food cards
                card.className = 'p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl';
                card.innerHTML = `<h4 class="font-semibold text-lg mb-1">${food.name}</h4><p class="text-sm text-gray-600 mb-1">${food.description}</p><p class="text-sm text-blue-600 font-medium">Affordability: ${food.affordability}</p>`;
                foodsList.appendChild(card);
            });
            // Local currency info: use specific descriptions when available, otherwise fall back to a generic message.
            const currencyDescriptions = {
                'SEK': 'Sweden uses the Swedish krona (SEK). Cards and mobile payments dominate; cash is rarely used and haggling is uncommon.',
                'EGP': 'Egypt uses the Egyptian pound (EGP). Carry cash for small purchases and local vendors; credit cards are accepted in cities and tourist areas. Bargaining is common in markets.',
                'ZAR': 'South Africa uses the South African rand (ZAR). Cash and cards are widely used; cash is needed for informal markets and public transport. Negotiating may be possible in markets.'
            };
            const defaultCurrencyMessage = `The local currency is ${data.currencyCode}. Cash and credit cards are widely accepted; negotiating may vary by region.`;
            if (currencyInfoEl) {
                currencyInfoEl.textContent = currencyDescriptions[data.currencyCode] || defaultCurrencyMessage;
            }
            // Hotel affordability
            hotelAffordabilityEl.textContent = data.hotelAffordability;
            // Cost index bar and text
            let percentage = data.relativeCostIndex * 100;
            // Clamp the bar width between 0 and 100 to prevent overflow
            const clampedPercentage = Math.min(Math.max(percentage, 0), 100);
            costBarInner.style.width = `${clampedPercentage}%`;
            // set bar colour based on cost level (relative to US). Higher index indicates more expensive.
            let barColour = 'bg-green-500';
            if (percentage >= 100) {
                // significantly more expensive than the US
                barColour = 'bg-gray-500';
            } else if (percentage > 80) {
                barColour = 'bg-orange-500';
            } else if (percentage > 70) {
                barColour = 'bg-yellow-500';
            } else if (percentage > 60) {
                barColour = 'bg-lime-300';
            } else if (percentage > 50) {
                barColour = 'bg-lime-500';
            } else if (percentage > 40) {
                barColour = 'bg-green-500';
            } else if (percentage > 30) {
                barColour = 'bg-green-500';
            }
            costBarInner.className = `h-full ${barColour}`;
            // Determine affordability text. If index > 1, it's more expensive; else cheaper.
            const diff = (data.relativeCostIndex - 1) * 100;
            if (diff > 0) {
                costText.textContent = `Compared to the US, costs here are roughly ${Math.round(diff)}% more expensive.`;
            } else {
                costText.textContent = `Compared to the US, costs here are roughly ${Math.round(Math.abs(diff))}% cheaper.`;
            }
            // Update dynamic learn‑more and locals sections if those elements exist.
            // Some versions of this page omit the learn‑more and locals sections entirely (for example when using
            // markup copied from another template).  If the elements are not present in the DOM then
            // attempting to set their textContent will throw an error and prevent the rest of the update
            // function from running.  Wrap these assignments in conditional checks so the function can
            // continue gracefully even when these elements are absent.
            if (typeof learnMoreTextEl !== 'undefined' && learnMoreTextEl) {
                learnMoreTextEl.textContent = `Explore official tourism websites, cultural blogs and local guides to learn more about ${countryName}.`;
            }
            if (typeof localsTextEl !== 'undefined' && localsTextEl) {
                localsTextEl.textContent = 'Ask locals about their favourite spots, hidden gems and cultural practices for an authentic experience.';
            }

            // Position the map using OpenStreetMap and update the location/climate description
            const geo = countryGeo[countryName];
            if (geo) {
                // Update the embedded OpenStreetMap iframe.  A bounding box centred on the country
                // coordinates provides an appropriate zoom level.  The marker parameter pins the
                // selected destination on the map.  If the iframe element exists, set its src.
                
                // Initialize or update a Leaflet map using an English-labeled basemap.
                // We use Carto's "light_all" tiles which label places in English.
                if (!window._leafletMap) {
                    const el = document.getElementById('osm-map');
                    if (el) {
                        window._leafletMap = L.map(el, { zoomControl: true });
                        window._leafletTileLayer = L.tileLayer(
                            'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
                            {
                                attribution: '&copy; OpenStreetMap contributors &copy; CARTO'
                            }
                        ).addTo(window._leafletMap);
                        window._leafletMarker = L.marker([0,0]).addTo(window._leafletMap);
                    }
                }
                if (window._leafletMap) {
                    const lat  = geo.lat;
                    const lon  = geo.lon;
                    // Fit to a loose bounding box around the destination for a similar zoom effect
                    const latDiff = 5, lonDiff = 5;
                    const bounds = L.latLngBounds(
                        [lat - latDiff, lon - lonDiff],
                        [lat + latDiff, lon + lonDiff]
                    );
                    window._leafletMap.fitBounds(bounds);
                    window._leafletMarker.setLatLng([lat, lon]);
                }

                // Build the location and climate description inside the shaded box.  Headings remain
                // centred with extra spacing below, while the text paragraphs are left‑aligned for
                // readability.
                if (locationDescriptionEl) {
                    locationDescriptionEl.innerHTML = `
                        <div class="font-bold text-center mb-4">Location</div>
                        <div class="text-left mb-6">${geo.locationDesc}</div>
                        <div class="font-bold text-center mb-4">Climate</div>
                        <div class="text-left">${geo.weatherDesc}</div>
                    `;
                }
            }

            // Safety tips
            safetyList.innerHTML = '';
            data.safetyTips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                safetyList.appendChild(li);
            });
            // Build phrases by category.  If predefined phrases exist for this country in the
            // countryPhrasesByCategory object, use them; otherwise fall back to using the basic
            // three phrases defined in data.phrases for all categories.
            if (countryPhrasesByCategory[countryName]) {
                currentPhrasesByCategory = countryPhrasesByCategory[countryName];
            } else {
                const entries = Object.entries(data.phrases);
                currentPhrasesByCategory = {
                    greetings: entries.slice(0, 3),
                    food: entries.slice(0, 3),
                    directions: entries.slice(0, 3)
                };
            }
            // Set the default category to greetings when a new country is selected
            const categorySelect = document.getElementById('essential-phrase-category-select');
            if (categorySelect) {
                categorySelect.value = 'greetings';
            }
            renderEssentialPhrasesForCategory();
            const phrasesNoteEl = document.getElementById('phrases-note');
            if (phrasesNoteEl) {
                if (countryName === 'Thailand') {
                    phrasesNoteEl.textContent = 'Generally, females use "ka" and males use "krap" after some statements or questions to be more polite.';
                    phrasesNoteEl.classList.remove('hidden');
                } else {
                    phrasesNoteEl.textContent = '';
                    phrasesNoteEl.classList.add('hidden');
                }
            }

            // Emergency contacts (display numbers in red) and U.S. Embassy info in purple
            emergencyList.innerHTML = '';
            data.emergencyContacts.forEach(contact => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="font-medium">${contact.name}:</span> <span class="text-red-600">${contact.number}</span>`;
                emergencyList.appendChild(li);
            });
            // Append U.S. Embassy contact information if available, formatted with spacing and separate lines.
            const embassyInfo = usEmbassyContacts[countryName];
            // Always add a spacer and heading for the U.S. Embassy section so users know where to look.
            {
                const spacer = document.createElement('li');
                // Use a larger top margin to create a double‑line break before the embassy heading
                spacer.className = 'list-none mt-4';
                emergencyList.appendChild(spacer);
                const embassyHeading = document.createElement('li');
                embassyHeading.className = 'list-none';
                // Do not include a colon after the heading; style in purple
                embassyHeading.innerHTML = `<span class="font-medium text-purple-700">U.S. Embassy</span>`;
                emergencyList.appendChild(embassyHeading);
            }
            if (embassyInfo) {
                // Add the embassy address and phone on the next line, left‑aligned under the heading
                const embassyDetails = document.createElement('li');
                // Do not indent; left‑justify to align with the heading
                embassyDetails.className = 'list-none';
                embassyDetails.innerHTML = `<a href="${embassyInfo.url}" target="_blank" class="text-black underline">${embassyInfo.address}</a> (<span class="text-black">${embassyInfo.phone}</span>)`;
                emergencyList.appendChild(embassyDetails);
            } else {
                // If no embassy info is available, provide a generic note with a link to the State Department site.
                const noInfo = document.createElement('li');
                noInfo.className = 'list-none text-black';
                noInfo.innerHTML = `Please refer to the <a href="https://travel.state.gov" target="_blank" class="underline">U.S. Department of State</a> for contact details.`;
                emergencyList.appendChild(noInfo);
            }
            // Locals advice
            const localsList = document.getElementById('locals-list');
            if (localsList) {
                localsList.innerHTML = '';
                let tips = localsAdvice[countryName] || ['Respect local customs and traditions.', 'Learn a few phrases to show politeness.', 'Ask permission before photographing people.'];
                // Add a couple of general dos and don’ts to enrich the list for every country.
                tips = tips.concat([
                    'Do learn basic greetings and thank you in the local language.',
                    'Don’t be insensitive to local dress codes or etiquette.',
                    'Do try local foods and beverages to immerse yourself in the culture.',
                    'Don’t litter; dispose of waste responsibly to keep the environment clean.'
                ]);
                tips.forEach(tip => {
                    const li = document.createElement('li');
                    // Detect whether the tip starts with "Do" or "Don’t/Don't" to colour code accordingly
                    const trimmed = tip.trim();
                    const lower = trimmed.toLowerCase();
                    let colourClass = '';
                    if (lower.startsWith('do ' ) || lower === 'do' || lower.startsWith('do ')) {
                        colourClass = 'text-green-600';
                    } else if (lower.startsWith("don't") || lower.startsWith("don’t") || lower.startsWith("don\u2019t")) {
                        colourClass = 'text-red-600';
                    }
                    const firstWord = trimmed.split(' ')[0];
                    const rest = trimmed.substring(firstWord.length).trim();
                    const colouredFirst = colourClass ? `<span class="font-medium ${colourClass}">${firstWord}</span>` : `<span class="font-medium">${firstWord}</span>`;
                    li.innerHTML = `${colouredFirst}${rest ? ' ' + rest : ''}`;
                    localsList.appendChild(li);
                });
            }
            // Adjust text alignment for Argentina.  If the selected country is Argentina,
            // the history paragraph and the geography & climate description should be left‑aligned
            // to improve readability for longer text.  Otherwise use the default (centre) alignment.
            if (countryName === 'Argentina') {
                // For Argentina, left‑align the history paragraph to improve readability.
                if (historyText) {
                    historyText.style.textAlign = 'left';
                }
            } else {
                if (historyText) {
                    historyText.style.textAlign = '';
                }
            }
            // Update currency converter default 'to' currency to the destination currency
            if (toCurrencySelect.querySelector(`option[value="${data.currencyCode}"]`)) {
                toCurrencySelect.value = data.currencyCode;
            }
            // Render the holiday calendar for the newly selected destination
            renderHolidayCalendar(countryName);
            // Update time displays for the new destination
            updateTimeDisplays();
        }

        /**
         * Update the time displays for the local and destination time zones.
         */
        function updateTimeDisplays() {
            // If no country is selected or the selected country is not in the data set,
            // show only the local time and clear the destination display.
            const now = new Date();
            localTimeDisplay.textContent = `Your Local Time: ${now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true })}`;
            if (!countrySelect || !countrySelect.value || !countriesData[countrySelect.value]) {
                destinationTimeDisplay.textContent = '';
                return;
            }
            const destinationCountry = countriesData[countrySelect.value];
            const destinationZone = destinationCountry.timeZoneId;
            // Destination time
            const destOptions = { timeZone: destinationZone, hour: '2-digit', minute: '2-digit', hour12: true };
            destinationTimeDisplay.textContent = `${countrySelect.value}: ${new Date().toLocaleTimeString([], destOptions)}`;
        }

        // Automatically refresh the time displays.  Call once immediately and then every second so the clocks tick in real‑time.  A one‑second interval has negligible performance impact and ensures users always see the current local and destination time.
        updateTimeDisplays();
        setInterval(updateTimeDisplays, 1000);

        /**
         * Render the list of holidays for the current month and year based on the selected country.
         * Displays a message when there are no major holidays in the month.
         * @param {string} countryName The selected country’s name
         */
        function renderHolidayCalendar(countryName) {
            // If any of the required elements are missing (for example in earlier versions), skip rendering.
            if (!calendarMonthYear || !holidayList) return;
            // Lookup holidays for the country; default to empty array if none defined
            const holidays = countryHolidays[countryName] || [];
            // Display the month and year header
            const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
            calendarMonthYear.textContent = `${monthNames[currentCalendarMonth]} ${currentCalendarYear}`;
            // Filter holidays that fall within the current month.  Ignore the year so holidays
            // repeat each calendar year (the holiday data may be from a previous year).
            const monthStr = String(currentCalendarMonth + 1).padStart(2, '0');
            const monthHolidays = holidays.filter(h => {
                const [, m] = h.date.split('-');
                return m === monthStr;
            });
            // Clear existing list
            holidayList.innerHTML = '';
            if (monthHolidays.length === 0) {
                const li = document.createElement('li');
                li.textContent = 'No major holidays this month.';
                holidayList.appendChild(li);
            } else {
                monthHolidays.forEach(h => {
                    const li = document.createElement('li');
                    // Create a date using the current calendar year so the day/month correspond
                    const parts = h.date.split('-');
                    const monthIndex = parseInt(parts[1], 10) - 1;
                    const dayNum = parseInt(parts[2], 10);
                    const dateObj = new Date(currentCalendarYear, monthIndex, dayNum);
                    // Format as Day Month (e.g., 25 Dec)
                    const formattedDate = dateObj.toLocaleDateString(undefined, { day: 'numeric', month: 'short' });
                    li.innerHTML = `<span class="font-medium">${formattedDate}:</span> ${h.name}`;
                    holidayList.appendChild(li);
                });
            }
        }

        /**
         * Navigate the holiday calendar forward or backward by one month and re-render the list.
         * @param {number} offset +1 to go to the next month, -1 to go to the previous month
         */
        function navigateMonth(offset) {
            currentCalendarMonth += offset;
            // When navigating, adjust month and year.  If month wraps around, update year accordingly.
            if (currentCalendarMonth < 0) {
                currentCalendarMonth = 11;
                currentCalendarYear--;
            } else if (currentCalendarMonth > 11) {
                currentCalendarMonth = 0;
                currentCalendarYear++;
            }
            // Clamp the year to be within the allowed range [calendarStartYear, calendarEndYear]
            if (currentCalendarYear < calendarStartYear) {
                currentCalendarYear = calendarStartYear;
                currentCalendarMonth = 0;
            } else if (currentCalendarYear > calendarEndYear) {
                currentCalendarYear = calendarEndYear;
                currentCalendarMonth = 11;
            }
            renderHolidayCalendar(countrySelect.value);
        }

        /**
         * Render the large interactive calendar inside the pop‑up overlay.  This function
         * builds a month view table, fills in day numbers and inserts holiday names
         * for the selected country when they fall within the displayed month.
         * @param {string} countryName The selected country name
         */
        function renderInteractiveCalendar(countryName) {
            if (!interactiveCalendarEl || !overlayMonthYearEl) return;
            // Month names for display
            const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
            // Set the header to show month and year
            overlayMonthYearEl.textContent = `${monthNames[overlayCurrentMonth]} ${overlayCurrentYear}`;
            // Clear existing calendar
            interactiveCalendarEl.innerHTML = '';
            // Determine the first weekday of the month (0=Sunday) and number of days
            const firstDay = new Date(overlayCurrentYear, overlayCurrentMonth, 1).getDay();
            const daysInMonth = new Date(overlayCurrentYear, overlayCurrentMonth + 1, 0).getDate();
            // Build a map of holiday dates for quick lookup
            const holidayMap = {};
            const holidays = countryHolidays[countryName] || [];
            // Build the map of holiday names keyed by day-of-month.  We ignore
            // the year of the holiday data so that holidays are displayed
            // regardless of the year currently being viewed (e.g. showing
            // holidays from 2024 on the 2025/2026 calendars).  Only match the
            // month component and assign the holiday name to the corresponding
            // day of the month.  This way, recurring holidays appear each year
            // without having to duplicate date entries for future years.
            holidays.forEach(h => {
                // Parse the ISO date string manually to avoid timezone
                // conversions altering the month (e.g. '2024-01-01' may
                // convert to Dec 31 in some timezones).  We only care about
                // the month and day values.
                const parts = h.date.split('-');
                const monthIndex = parseInt(parts[1], 10) - 1;
                const dayNum = parseInt(parts[2], 10);
                // If the holiday's month matches the displayed month, assign
                // the holiday name to that day of the month.  We ignore the
                // year entirely so the holiday repeats every year.
                if (monthIndex === overlayCurrentMonth) {
                    holidayMap[dayNum] = h.name;
                }
            });
            // Create the calendar table
            const table = document.createElement('table');
            table.className = 'w-full border-collapse';
            // Header row with days of week
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            const daysOfWeek = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            daysOfWeek.forEach(day => {
                const th = document.createElement('th');
                th.className = 'border border-gray-300 p-2 text-center font-medium bg-gray-100';
                th.textContent = day;
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);
            const tbody = document.createElement('tbody');
            let dayCounter = 1 - firstDay;
            for (let row = 0; row < 6; row++) {
                const tr = document.createElement('tr');
                for (let col = 0; col < 7; col++) {
                    const td = document.createElement('td');
                    td.className = 'border border-gray-300 p-2 align-top h-24';
                    if (dayCounter > 0 && dayCounter <= daysInMonth) {
                        const dayDiv = document.createElement('div');
                        dayDiv.className = 'font-semibold';
                        dayDiv.textContent = dayCounter;
                        td.appendChild(dayDiv);
                        if (holidayMap[dayCounter]) {
                            const holidayDiv = document.createElement('div');
                            holidayDiv.className = 'mt-1 text-xs text-blue-600';
                            holidayDiv.textContent = holidayMap[dayCounter];
                            td.appendChild(holidayDiv);
                        }
                    }
                    tr.appendChild(td);
                    dayCounter++;
                }
                tbody.appendChild(tr);
            }
            table.appendChild(tbody);
            interactiveCalendarEl.appendChild(table);
        }

        /**
         * Open the holiday calendar overlay.  When opened, reset the month/year to the
         * current date and render the interactive calendar for the selected country.
         */
        function openCalendarOverlay() {
            if (!calendarOverlay) return;
            calendarOverlay.classList.remove('hidden');
            // Reset to the current month/year on open
            overlayCurrentMonth = new Date().getMonth();
            overlayCurrentYear = new Date().getFullYear();
            renderInteractiveCalendar(selectedCountry || countrySelect.value);
        }

        /**
         * Close the holiday calendar overlay.
         */
        function closeCalendarOverlay() {
            if (calendarOverlay) {
                calendarOverlay.classList.add('hidden');
            }
        }

        /**
         * Navigate the pop‑up calendar by changing the month.  Negative offset
         * moves to the previous month; positive offset moves to the next month.
         * After updating the month/year, re-render the calendar for the selected
         * country.
         * @param {number} offset The number of months to move (e.g. −1 or +1)
         */
        function navigateOverlay(offset) {
            overlayCurrentMonth += offset;
            // Adjust month and year when navigating
            if (overlayCurrentMonth < 0) {
                overlayCurrentMonth = 11;
                overlayCurrentYear--;
            } else if (overlayCurrentMonth > 11) {
                overlayCurrentMonth = 0;
                overlayCurrentYear++;
            }
            // Clamp overlay year within [calendarStartYear, calendarEndYear]
            if (overlayCurrentYear < calendarStartYear) {
                overlayCurrentYear = calendarStartYear;
                overlayCurrentMonth = 0;
            } else if (overlayCurrentYear > calendarEndYear) {
                overlayCurrentYear = calendarEndYear;
                overlayCurrentMonth = 11;
            }
            renderInteractiveCalendar(selectedCountry || countrySelect.value);
        }

        /**
         * Position the map marker based on latitude and longitude.  This converts geographic coordinates into
         * pixel positions within the map container, assuming an equirectangular projection.  If the map container
         * has zero width or height (for example before the image has loaded) the function exits without positioning.
         * @param {number} lat Latitude of the point (−90 to 90 degrees).
         * @param {number} lon Longitude of the point (−180 to 180 degrees).
         */
        /*
         * The original positionMapMarker function has been deprecated.  Marker positioning is
         * now handled by the OpenStreetMap embed via an iframe, so this function is no longer
         * used.  Keeping it commented here for reference.
         */
        /*
        function positionMapMarker(lat, lon) {
            if (!mapContainer || !mapMarker) return;
            const mapEl = document.getElementById('world-map');
            const width  = mapContainer.offsetWidth;
            const height = mapContainer.offsetHeight;
            if (!width || !height || !mapEl) return;

            // Work out the natural aspect ratio of the image (width / height)
            const imgAspect = mapEl.naturalWidth / mapEl.naturalHeight;
            // Aspect ratio of the container
            const containerAspect = width / height;

            let x, y;
            if (containerAspect > imgAspect) {
                const scaledHeight = height;
                const scaledWidth  = scaledHeight * imgAspect;
                const offsetX = (width - scaledWidth) / 2;
                x = offsetX + ((lon + 180) / 360) * scaledWidth;
                y = ((90 - lat) / 180) * scaledHeight;
            } else {
                const scaledWidth  = width;
                const scaledHeight = scaledWidth / imgAspect;
                const offsetY = (height - scaledHeight) / 2;
                x = ((lon + 180) / 360) * scaledWidth;
                y = offsetY + ((90 - lat) / 180) * scaledHeight;
            }

            mapMarker.style.left = `${x}px`;
            mapMarker.style.top  = `${y}px`;
        }
        */

        // Attach click handlers to the holiday calendar navigation buttons
        if (prevMonthBtn && nextMonthBtn) {
            prevMonthBtn.addEventListener('click', () => navigateMonth(-1));
            nextMonthBtn.addEventListener('click', () => navigateMonth(1));
        }

        /**
         * Fetch exchange rates from a public API and populate the currency dropdowns.
         */
        async function fetchExchangeRates() {
            currencyNote.textContent = 'Loading exchange rates…';
            try {
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                if (!response.ok) throw new Error(`HTTP error ${response.status}`);
                const data = await response.json();
                exchangeRates = data.rates;
                currencyNote.textContent = `Rates updated ${new Date().toLocaleDateString()}`;
                populateCurrencySelects();
            } catch (err) {
                // When the API is unavailable (e.g. offline), fall back to predefined rates
                console.warn('Using fallback exchange rates due to error:', err.message);
                exchangeRates = defaultExchangeRates;
                currencyNote.textContent = 'Using offline exchange rates.';
                populateCurrencySelects();
            }
        }

        /**
         * Populate the currency dropdowns.  The from dropdown starts with USD; all
         * currencies from the API follow.  The to dropdown mirrors this order.  The
         * initial destination currency is selected by default.
         */
        function populateCurrencySelects() {
            fromCurrencySelect.innerHTML = '';
            toCurrencySelect.innerHTML = '';
            // Always include USD first
            const usdOption = document.createElement('option');
            usdOption.value = 'USD';
            usdOption.textContent = 'USD';
            fromCurrencySelect.appendChild(usdOption);
            Object.keys(exchangeRates).forEach(code => {
                const optFrom = document.createElement('option');
                optFrom.value = code;
                optFrom.textContent = code;
                fromCurrencySelect.appendChild(optFrom);
                const optTo = optFrom.cloneNode(true);
                toCurrencySelect.appendChild(optTo);
            });
            // Set defaults
            fromCurrencySelect.value = 'USD';
            const destCurrency = countriesData[countrySelect.value].currencyCode;
            if (toCurrencySelect.querySelector(`option[value="${destCurrency}"]`)) {
                toCurrencySelect.value = destCurrency;
            } else {
                toCurrencySelect.value = 'USD';
            }
            currencyResult.textContent = '';
        }

        /**
         * Perform a currency conversion when the user clicks the convert button.
         */
        function convertCurrency() {
            const amount = parseFloat(currencyAmountInput.value);
            const fromCode = fromCurrencySelect.value;
            const toCode = toCurrencySelect.value;
            if (isNaN(amount) || amount <= 0) {
                currencyResult.textContent = 'Please enter a valid amount.';
                return;
            }
            if (!exchangeRates[fromCode] || !exchangeRates[toCode]) {
                currencyResult.textContent = 'Conversion not available.';
                return;
            }
            const amountInUSD = amount / exchangeRates[fromCode];
            const converted = amountInUSD * exchangeRates[toCode];
            currencyResult.textContent = `${amount.toFixed(2)} ${fromCode} = ${converted.toFixed(2)} ${toCode}`;
        }

        /**
         * Convert between common measurement units.  Supports distance, temperature and weight.
         */
        function convertMeasurement() {
            // Obtain values directly from the DOM to avoid stale references and ensure manual unit selection works properly.
            const inputEl = document.getElementById('measurement-input');
            const fromEl = document.getElementById('from-unit');
            const toEl = document.getElementById('to-unit');
            const resultEl = document.getElementById('measurement-result');
            const value = parseFloat(inputEl ? inputEl.value : '');
            // Read the raw unit codes (e.g. "km", "miles", "celsius") from the select values
            const fromUnit = fromEl ? fromEl.value : '';
            const toUnit = toEl ? toEl.value : '';
            // Also obtain the displayed text for each option to preserve proper casing (e.g. "Kilometers", "Miles").
            const fromText = fromEl && fromEl.selectedIndex >= 0 ? fromEl.options[fromEl.selectedIndex].text : fromUnit;
            const toText = toEl && toEl.selectedIndex >= 0 ? toEl.options[toEl.selectedIndex].text : toUnit;
            if (isNaN(value)) {
                if (resultEl) resultEl.textContent = 'Please enter a valid number.';
                return;
            }
            let result;
            // Distance conversions
            if (fromUnit === 'km' && toUnit === 'miles') result = value * 0.621371;
            else if (fromUnit === 'miles' && toUnit === 'km') result = value / 0.621371;
            // Temperature conversions
            else if (fromUnit === 'celsius' && toUnit === 'fahrenheit') result = (value * 9/5) + 32;
            else if (fromUnit === 'fahrenheit' && toUnit === 'celsius') result = (value - 32) * 5/9;
            // Weight conversions
            else if (fromUnit === 'kg' && toUnit === 'lbs') result = value * 2.20462;
            else if (fromUnit === 'lbs' && toUnit === 'kg') result = value / 2.20462;
            else result = value;
            if (resultEl) {
                // Display the result using the option text to ensure the units start with capital letters.
                resultEl.textContent = `${value} ${fromText} = ${result.toFixed(2)} ${toText}`;
            }
            // Removed alert popup: the result is displayed directly on the page like other conversion tools
        }

        /**
         * Holds the translation phrases for the currently selected country.
         * Updated each time updateCountryContent runs.  The object maps
         * English phrases to their translations.
         */
        let currentPhrasesByCategory = null;

        /**
         * Remove diacritics and special Spanish punctuation from a string.  This helper converts
         * accented characters to their base ASCII equivalents and strips characters like
         * inverted question/exclamation marks.  It ensures the translations in the Essential
         * Phrases card are displayed phonetically in plain English letters.
         * @param {string} str The string to sanitise
         * @returns {string} The sanitised string without diacritics
         */
        function removeDiacritics(str) {
            if (!str) return '';
            // Normalize to NFD form and remove combining diacritical marks
            let s = str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
            // Remove inverted punctuation such as ¿ and ¡
            s = s.replace(/[¿¡]/g, '');
            return s;
        }

        /**
         * Render three phrases based on the selected category.  Since we don't have
         * distinct phrases for each category, this function simply displays the first
         * three entries from the currentPhrases object regardless of category.
         */
function renderEssentialPhrasesForCategory() {
    const selectEl = document.getElementById('essential-phrase-category-select');
    const listEl = document.getElementById('essential-phrases-list');
    if (!selectEl || !listEl || !currentPhrasesByCategory) return;
    const category = selectEl.value;
    const entries = currentPhrasesByCategory[category] || [];
    listEl.innerHTML = '';
    entries.forEach(([eng, trans]) => {
        const li = document.createElement('li');
        // Strip diacritics and special punctuation from translations for phonetic spelling
        const cleanTrans = removeDiacritics(trans);
        li.innerHTML = `<span class="font-medium">${eng}:</span> ${cleanTrans}`;
        listEl.appendChild(li);
    });
}

        /**
         * Fetch the user's public IP address and display it.
         */
        async function fetchIpAddress() {
            ipAddressDisplay.textContent = 'Fetching IP…';
            // Define a list of endpoints with parsers for the response.  These endpoints are queried
            // sequentially until one succeeds.  This approach increases the chance of obtaining a
            // usable IP address even if some services are unreachable due to network restrictions.
            const endpoints = [
                {
                    url: 'https://api.ipify.org?format=json',
                    parser: async (res) => (await res.json()).ip,
                },
                {
                    url: 'https://ipapi.co/json/',
                    parser: async (res) => (await res.json()).ip,
                },
                {
                    // AWS service that returns the IP address as plain text.
                    url: 'https://checkip.amazonaws.com/',
                    parser: async (res) => (await res.text()).trim(),
                },
                {
                    // Another plain‑text IP service as a last resort.
                    url: 'https://ifconfig.me/ip',
                    parser: async (res) => (await res.text()).trim(),
                },
            ];
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint.url);
                    if (!response.ok) throw new Error('Service failure');
                    const ip = await endpoint.parser(response);
                    if (ip) {
                        ipAddressDisplay.textContent = `Your public IP address: ${ip}`;
                        return;
                    }
                } catch (error) {
                    // Ignore the error and continue to the next endpoint
                }
            }
            ipAddressDisplay.textContent = 'Unable to fetch IP.';
        }

        /**
         * Handle submission of the comment form.  Reads the selected photo (if any)
         * using FileReader, then appends a new comment card to the comments
         * display.  The form is then reset.  No data is sent anywhere.
         * @param {Event} e The form submit event
         */
        function handleCommentSubmit(e) {
            e.preventDefault();
            const name = commentName.value.trim();
            const country = commentCountrySelect.value;
            const text = commentText.value.trim();
            const file = commentPhoto.files[0];
            if (!text) {
                alert('Please enter a comment before submitting.');
                return;
            }
            const createCard = (imgSrc) => {
                const card = document.createElement('div');
                card.className = 'p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl';
                let html = '';
                if (imgSrc) {
                    html += `<img src="${imgSrc}" alt="User uploaded photo" class="w-full h-48 object-cover rounded mb-3">`;
                }
                html += `<p class="text-sm text-gray-500 mb-1">${country}</p>`;
                html += `<h4 class="font-semibold text-lg mb-1">${name || 'Anonymous'}</h4>`;
                html += `<p class="text-gray-700">${text}</p>`;
                html += `<div class=\"flex justify-end\"><button type=\"button\" class=\"delete-comment-btn text-red-600 text-sm underline mt-3\">Delete</button></div>`;
                card.innerHTML = html;
                const delBtn = card.querySelector('.delete-comment-btn');
                if (delBtn) {
                    delBtn.addEventListener('click', () => {
                        if (confirm('Delete this post?')) { card.remove(); }
                    });
                }
                commentsDisplay.prepend(card);
            };
            if (file) {
                const reader = new FileReader();
                reader.onload = () => createCard(reader.result);
                reader.readAsDataURL(file);
            } else {
                createCard(null);
            }
            // Reset the form
            commentForm.reset();
            commentCountrySelect.value = countrySelect.value;
        }

        /**
         * Show or hide the scroll‑to‑top button based on scroll position.
         */
        function handleScroll() {
            if (document.documentElement.scrollTop > 300) {
                scrollBtn.style.display = 'block';
            } else {
                scrollBtn.style.display = 'none';
            }
        }

        // Attach event listeners
        countrySelect.addEventListener('change', (e) => updateCountryContent(e.target.value));
        convertCurrencyBtn.addEventListener('click', convertCurrency);
        convertMeasurementBtn.addEventListener('click', convertMeasurement);
        getIpBtn.addEventListener('click', fetchIpAddress);
        commentForm.addEventListener('submit', handleCommentSubmit);
        window.addEventListener('scroll', handleScroll);
        scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

        // Measurement unit pairing removed.  Users can freely select any units for conversion.

        // Random recommendation modal interactions will be set up after the DOM is fully loaded.

        // Holiday calendar overlay interactions
        if (calendarThumbnail) {
            calendarThumbnail.addEventListener('click', openCalendarOverlay);
        }
        if (prevMonthBtnOverlay) {
            prevMonthBtnOverlay.addEventListener('click', () => navigateOverlay(-1));
        }
        if (nextMonthBtnOverlay) {
            nextMonthBtnOverlay.addEventListener('click', () => navigateOverlay(1));
        }
        if (closeCalendarBtn) {
            closeCalendarBtn.addEventListener('click', closeCalendarOverlay);
        }

        // Initial setup when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Populate the destination and comment dropdowns
            populateCountryDropdowns();
            // Local time zone options are statically defined in the markup, so no need to populate them here.
            fetchExchangeRates();
            // Attach measurement unit pairing so that selecting a unit in either dropdown automatically updates the other
            const fromUnitSelectDOM = document.getElementById('from-unit');
            const toUnitSelectDOM = document.getElementById('to-unit');
            const measurementPairsDOM = {
                km: 'miles',
                miles: 'km',
                celsius: 'fahrenheit',
                fahrenheit: 'celsius',
                kg: 'lbs',
                lbs: 'kg'
            };
            function syncMeasurementPair(changedSelect) {
                if (!changedSelect) return;
                const pair = measurementPairsDOM[changedSelect.value];
                if (changedSelect === fromUnitSelectDOM && pair) {
                    toUnitSelectDOM.value = pair;
                } else if (changedSelect === toUnitSelectDOM && pair) {
                    fromUnitSelectDOM.value = pair;
                }
            }
            if (fromUnitSelectDOM && toUnitSelectDOM) {
                fromUnitSelectDOM.addEventListener('change', () => syncMeasurementPair(fromUnitSelectDOM));
                toUnitSelectDOM.addEventListener('change', () => syncMeasurementPair(toUnitSelectDOM));
                // Initialise the pairing based on the default from-unit
                syncMeasurementPair(fromUnitSelectDOM);
            }
            // Set up the random recommendation modal functionality now that the DOM is ready
            const startExploreBtn = document.getElementById('start-explore-btn');
            const recommendationModal = document.getElementById('recommendation-modal');
            const recommendationTextEl = document.getElementById('recommendation-text');
            const recommendYesBtn = document.getElementById('recommend-yes');
            const recommendNoBtn = document.getElementById('recommend-no');
            let recommendedCountry = null;
            if (startExploreBtn && recommendationModal && recommendationTextEl && recommendYesBtn && recommendNoBtn) {
                startExploreBtn.addEventListener('click', () => {
                    const countries = Object.keys(countriesData);
                    const randIndex = Math.floor(Math.random() * countries.length);
                    recommendedCountry = countries[randIndex];
                    const message = recommendationStatements[recommendedCountry] || `${recommendedCountry} and experience its unique charm`;
                    recommendationTextEl.textContent = `How would you like to try ${message}?`;
                    recommendationModal.classList.remove('hidden');
                });
                recommendYesBtn.addEventListener('click', () => {
                    if (recommendedCountry) {
                        const countrySelect = document.getElementById('country-select');
                        const commentCountrySelect = document.getElementById('comment-country');
                        if (countrySelect) {
                            countrySelect.value = recommendedCountry;
                            updateCountryContent(recommendedCountry);
                        }
                        if (commentCountrySelect) {
                            commentCountrySelect.value = recommendedCountry;
                        }
                    }
                    recommendationModal.classList.add('hidden');
                    const countrySelectEl = document.getElementById('country-select');
                    if (countrySelectEl) {
                        countrySelectEl.scrollIntoView({ behavior: 'smooth' });
                    }
                });
                recommendNoBtn.addEventListener('click', () => {
                    recommendationModal.classList.add('hidden');
                    const countrySelectEl = document.getElementById('country-select');
                    if (countrySelectEl) {
                        countrySelectEl.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // Attach change listener for the phrase category dropdown to update phrases dynamically
            const essentialPhraseCategorySelect = document.getElementById('essential-phrase-category-select');
            if (essentialPhraseCategorySelect) {
                essentialPhraseCategorySelect.addEventListener('change', () => {
                    renderEssentialPhrasesForCategory();
            const phrasesNoteEl = document.getElementById('phrases-note');
            if (phrasesNoteEl) {
                if (countryName === 'Thailand') {
                    phrasesNoteEl.textContent = 'Generally, females use "ka" and males use "krap" after some statements or questions to be more polite.';
                    phrasesNoteEl.classList.remove('hidden');
                } else {
                    phrasesNoteEl.textContent = '';
                    phrasesNoteEl.classList.add('hidden');
                }
            }

                });
            }

            // Packing List overlay functionality
            const openPackingListBtn = document.getElementById('open-packing-list-btn');
            const packingListOverlay = document.getElementById('packing-list-overlay');
            const closePackingListBtn = document.getElementById('close-packing-list-btn');
            const downloadPackingListBtn = document.getElementById('download-packing-list-btn');
            const packingListEditable = document.getElementById('packing-list-editable');
            if (openPackingListBtn && packingListOverlay && closePackingListBtn && downloadPackingListBtn && packingListEditable) {
                openPackingListBtn.addEventListener('click', () => {
                    // Show the overlay when the Generate button is clicked
                    packingListOverlay.classList.remove('hidden');
                });
                closePackingListBtn.addEventListener('click', () => {
                    // Hide the overlay
                    packingListOverlay.classList.add('hidden');
                });
                downloadPackingListBtn.addEventListener('click', () => {
                    /*
                     * Generate a downloadable HTML file from the editable packing list.  We keep the checkboxes and
                     * formatting (bold headings and underlines) by using the element’s innerHTML.  The resulting
                     * file can be opened in a word processor or browser, preserving the appearance and allowing
                     * further editing.  A minimal HTML scaffold is wrapped around the content.
                     */
                    // Insert a line break after each label to ensure items appear on separate lines in the downloaded file
                    let content = packingListEditable.innerHTML;
                    content = content.replace(/<\/label>/g, '</label><br>');
                    const htmlContent = `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Packing List</title></head><body>${content}</body></html>`;
                    const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = 'packing-list.html';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                });
            }

            // Deep Research functionality: display the detailed travel guide in a modal overlay.
            // When the user clicks the Deep Research button, load the local HTML file into
            // the iframe and show the overlay.  Closing the overlay clears the iframe source.
            const deepResearchBtn = document.getElementById('deep-research-btn');
            const deepResearchOverlay = document.getElementById('deep-research-overlay');
            const deepResearchIframe = document.getElementById('deep-research-iframe');
            const closeDeepResearchBtn = document.getElementById('close-deep-research-btn');
            if (deepResearchBtn && deepResearchOverlay && deepResearchIframe && closeDeepResearchBtn) {
                deepResearchBtn.addEventListener('click', () => {
                    // Set the iframe source to the travel guide file.  Spaces are encoded to ensure
                    // a valid URL on the file system.  Using the iframe avoids pop‑up blockers and
                    // keeps the user within the current page.
                    deepResearchIframe.src = 'GPP%20Travel%20Guide.html';
                    deepResearchOverlay.classList.remove('hidden');
                });
                // Ensure the content inside the deep research iframe fills the available width on smaller devices.
                // When the iframe loads, we inject a small style into the embedded document to override any
                // fixed widths defined in the guide.  This is only applied on narrow screens (mobile portrait).
                deepResearchIframe.addEventListener('load', () => {
                    if (window.innerWidth < 640) {
                        try {
                            const doc = deepResearchIframe.contentDocument || deepResearchIframe.contentWindow.document;
                            if (doc) {
                                // Add a viewport meta tag if one doesn't exist to improve mobile scaling
                                if (!doc.querySelector('meta[name="viewport"]')) {
                                    const meta = doc.createElement('meta');
                                    meta.name = 'viewport';
                                    meta.content = 'width=device-width, initial-scale=1';
                                    doc.head.appendChild(meta);
                                }
                                const style = doc.createElement('style');
                                style.textContent =
                                    'body, html { margin: 0; padding: 0; width: 100% !important; max-width: 100% !important; }\n' +
                                    'img { max-width: 100% !important; height: auto !important; }';
                                doc.head.appendChild(style);
                            }
                        } catch (e) {
                            // If we cannot access the iframe content due to security restrictions, do nothing
                        }
                    }
                });
                closeDeepResearchBtn.addEventListener('click', () => {
                    deepResearchOverlay.classList.add('hidden');
                    // Clear the iframe src so that the guide is reloaded on next open
                    // and to free resources when the overlay is closed.
                    deepResearchIframe.src = '';
                });
            }
        });
    </script>

<!-- Join Modal -->
<div id="join-overlay" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center">
  <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl w-[92%] max-w-md">
    <h3 class="text-xl font-semibold mb-4 text-center text-blue-600">Create Your Profile</h3>
    <form id="join-form" class="space-y-3">
      <div>
        <label class="block text-sm font-semibold mb-1" for="join-photo">Profile Picture</label>
        <input id="join-photo" type="file" accept="image/*" class="w-full p-2 border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1" for="join-username">Username</label>
        <input id="join-username" type="text" maxlength="30" class="w-full p-3 border border-gray-300 rounded-md" placeholder="e.g. SunnyTraveler" required>
      </div>
      <!-- New password field: users must supply a password so they can log back in on other devices. -->
      <div>
        <label class="block text-sm font-semibold mb-1" for="join-password">Password</label>
        <input id="join-password" type="password" maxlength="60" class="w-full p-3 border border-gray-300 rounded-md" placeholder="Create a password" required>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1" for="join-from">From</label>
        <input id="join-from" type="text" maxlength="40" class="w-full p-3 border border-gray-300 rounded-md" placeholder="e.g. NYC, USA">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1" for="join-greeting">Greeting</label>
        <input id="join-greeting" type="text" maxlength="80" class="w-full p-3 border border-gray-300 rounded-md" placeholder="e.g. Happy to meet you all!">
      </div>
      <div class="flex justify-between items-center pt-2">
        <button type="button" id="join-cancel" class="text-gray-600 hover:underline">Cancel</button>
        <button type="submit" class="button-gradient text-white py-2 px-6 rounded-md shadow-md">Save & Continue</button>
      </div>
    </form>
  </div>
</div>
<!-- Login Modal -->
<div id="login-overlay" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center">
  <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl w-[92%] max-w-md">
    <h3 class="text-xl font-semibold mb-4 text-center text-blue-600">Login to Your Profile</h3>
    <form id="login-form" class="space-y-3">
      <div>
        <label class="block text-sm font-semibold mb-1" for="login-username">Username</label>
        <input id="login-username" type="text" maxlength="30" class="w-full p-3 border border-gray-300 rounded-md" placeholder="Enter your username" required>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1" for="login-password">Password</label>
        <input id="login-password" type="password" maxlength="60" class="w-full p-3 border border-gray-300 rounded-md" placeholder="Enter your password" required>
      </div>
      <div class="flex justify-between items-center pt-2">
        <button type="button" id="login-cancel" class="text-gray-600 hover:underline">Cancel</button>
        <button type="submit" class="button-gradient text-white py-2 px-6 rounded-md shadow-md">Login</button>
      </div>
    </form>
  </div>
</div>
<!-- Thailand note show/hide (once; larger font) -->
<script>
(function(){
  function $(id){ return document.getElementById(id); }
  function updateThaiNote(){
    var note = $('phrases-note'), list = $('essential-phrases-list');
    if (!note || !list) return;
    try {
      if (typeof selectedCountry !== 'undefined' && selectedCountry === 'Thailand') {
        note.textContent = 'Generally, females use "ka" and males use "krap" after some statements or questions to be more polite.';
        note.classList.remove('hidden');
      } else {
        note.textContent = '';
        note.classList.add('hidden');
      }
    } catch (_) {}
  }
  document.addEventListener('change', function(e){
    if (e.target && (e.target.id === 'country-select' || e.target.id === 'essential-phrase-category-select')) {
      setTimeout(updateThaiNote, 0);
    }
  });
  if (window.MutationObserver && document.getElementById('essential-phrases-list')) {
    new MutationObserver(function(){ setTimeout(updateThaiNote, 0); })
      .observe(document.getElementById('essential-phrases-list'), { childList: true });
  }
  window.addEventListener('DOMContentLoaded', function(){ setTimeout(updateThaiNote, 0); });
})();
</script>
<!-- Social share functions -->
<script>
function shareToFacebook(){
  var url = encodeURIComponent(window.location.href);
  var quote = encodeURIComponent('Join me on #GoodPeoplenPlaces!');
  var shareUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + url + '&quote=' + quote;
  window.open(shareUrl, '_blank');
}
function shareToX(){
  var text = encodeURIComponent('Join me on #GoodPeoplenPlaces! ' + window.location.href);
  var shareUrl = 'https://twitter.com/intent/tweet?text=' + text;
  window.open(shareUrl, '_blank');
}
function shareToInstagram(){
  // Open the brand's Instagram profile in a new tab
  window.open('https://www.instagram.com/goodpeoplen74', '_blank');
}
function shareToTikTok(){
  // Open the brand's TikTok profile in a new tab
  window.open('https://www.tiktok.com/@goodpeoplenplaces', '_blank');
}
</script>
<!-- Join gating & profile header injection -->
<script>
(function(){
  function $(id){ return document.getElementById(id); }
  /*
   * Users and comments are now stored in dedicated objects keyed off of
   * the username.  This allows multiple accounts to coexist on a single
   * device and makes it possible for users to authenticate themselves
   * with a password.  Each user record contains the same fields as the
   * legacy profileV2 structure (username, from, greeting, photoDataUrl)
   * plus a password.  The currently logged in user is stored under
   * `currentUser`.
   */
  /*
   * Persistence helpers
   *
   * On some mobile browsers (e.g. Safari in private mode) localStorage
   * operations may throw exceptions or be disabled entirely.  To ensure
   * that user accounts and comments persist across page reloads on these
   * devices, we fall back to cookies when localStorage is unavailable.
   */
        /*
         * Set, get and remove persistent items in a platform‑agnostic manner.
         * We first attempt to use localStorage for unlimited capacity.  If
         * localStorage throws (as it may on some mobile browsers in
         * private/incognito mode), we fall back to cookies.  To support
         * storing large values (e.g. images encoded as data URIs) when
         * cookies are used, values are automatically split across
         * multiple cookies if necessary.  Each cookie can hold roughly
         * 4 KiB of data, so we break long strings into segments of
         * around 3800 characters to allow for cookie overhead.  A
         * metadata cookie with the suffix `_parts` stores the segment
         * count.
         */
        function setStorageItem(key, value){
          // Attempt to store data in localStorage only.  If localStorage is
          // unavailable (e.g. in private mode on certain mobile browsers),
          // silently fail rather than falling back to cookies.  This avoids
          // creating large cookie values that could cause HTTP 400 errors
          // when sent to the server.
          try {
            localStorage.setItem(key, value);
            return true;
          } catch(_){
            // Do not store in cookies
            return false;
          }
        }

        function getStorageItem(key){
          // Only read from localStorage.  Do not attempt to reconstruct
          // values from cookies to avoid accidentally consuming large
          // cookie payloads.  If localStorage is unavailable, return null.
          try {
            var v = localStorage.getItem(key);
            return v !== null && v !== undefined ? v : null;
          } catch(_){
            return null;
          }
        }
        function removeStorageItem(key){
          // Remove from localStorage
          try { localStorage.removeItem(key); } catch(_){ /* ignore */ }
          // Remove any cookies associated with this key (single or segmented)
          var encodedKey = encodeURIComponent(key);
          // Determine if there are segmented parts
          var cookies = document.cookie ? document.cookie.split('; ') : [];
          var partsCount = 0;
          for (var i = 0; i < cookies.length; i++){
            var parts = cookies[i].split('=');
            var name = parts.shift();
            var val = parts.join('=');
            if (name === encodedKey + '_parts'){
              partsCount = parseInt(val, 10) || 0;
              break;
            }
          }
          // Expire the header and segments
          if (partsCount > 0){
            document.cookie = encodedKey + '_parts=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            for (var j = 0; j < partsCount; j++){
              document.cookie = encodedKey + '_' + j + '=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            }
          }
          // Expire the single cookie
          document.cookie = encodedKey + '=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
        }

      /*
       * Immediately clear any persisted user or comment data from previous versions.
       * Old versions of this site stored user profiles, login state and comments
       * in cookies when localStorage was unavailable (e.g. on certain mobile
       * browsers).  Large image data stored this way can cause the browser to
       * send very long Cookie headers, which some servers reject with HTTP
       * 400 (Bad Request) responses.  Since the Share Your Trip section now
       * relies solely on external social media, we no longer need to retain
       * these values.  Removing them reduces the Cookie header size and
       * prevents errors when loading the page on devices where the cookies
       * otherwise persist.  We ignore any errors encountered when removing.
       */
      try {
        removeStorageItem('usersV2');
        removeStorageItem('currentUser');
        removeStorageItem('commentsV2');
        removeStorageItem('profileV2');
      } catch (cleanupErr) {
        /* Ignore errors during cleanup */
      }

  function loadUsers(){
    try {
      return JSON.parse(getStorageItem('usersV2') || '{}');
    } catch(_){ return {}; }
  }
  function saveUsers(u){
    try {
      setStorageItem('usersV2', JSON.stringify(u));
    } catch(_){ /* ignore */ }
  }
  function getCurrentUser(){
    try {
      return getStorageItem('currentUser') || null;
    } catch(_){ return null; }
  }
  function setCurrentUser(u){
    try {
      if (u){ setStorageItem('currentUser', u); }
    } catch(_){ /* ignore */ }
  }
  function clearCurrentUser(){
    try {
      removeStorageItem('currentUser');
    } catch(_){ /* ignore */ }
  }

  /**
   * Read a file (typically an image) and produce a Data URL.  On some mobile
   * browsers FileReader.readAsDataURL may fail silently or emit an error.
   * This helper attempts to read the file using FileReader and, if that
   * fails, falls back to fetching a blob via a temporary object URL and
   * converting that blob to a Data URL.  The onSuccess callback will be
   * invoked with the resulting data URL.  onError is called if all
   * attempts fail.
   * @param {File} file The file to read
   * @param {Function} onSuccess Callback invoked with the data URL
   * @param {Function} onError Callback invoked on failure
   */
  function readFileAsDataURL(file, onSuccess, onError){
    if (!file){ if (onError) onError(new Error('No file provided')); return; }
          // Fallback: draw the file to a canvas via an object URL and extract a Data URL.
          function fallback(){
            try {
              var objectUrl = URL.createObjectURL(file);
              var img = new Image();
              // Setting crossOrigin to anonymous prevents potential canvas tainting
              img.crossOrigin = 'anonymous';
              img.onload = function(){
                try {
                  var canvas = document.createElement('canvas');
                  canvas.width = img.naturalWidth || img.width;
                  canvas.height = img.naturalHeight || img.height;
                  var ctx = canvas.getContext('2d');
                  ctx.drawImage(img, 0, 0);
                  var dataURL = canvas.toDataURL('image/png');
                  URL.revokeObjectURL(objectUrl);
                  if (onSuccess) onSuccess(dataURL);
                } catch(e){
                  URL.revokeObjectURL(objectUrl);
                  if (onError) onError(new Error('Failed to read file'));
                }
              };
              img.onerror = function(){
                URL.revokeObjectURL(objectUrl);
                if (onError) onError(new Error('Failed to read file'));
              };
              img.src = objectUrl;
            } catch(err){ if (onError) onError(err); }
          }
    try {
      var fr = new FileReader();
      fr.onload = function(){ if (onSuccess) onSuccess(fr.result); };
      fr.onerror = function(){ fallback(); };
      fr.readAsDataURL(file);
    } catch(e){
      fallback();
    }
  }

  /**
   * Save or update a user profile.  Passing a complete profile object
   * (with a username) will insert or overwrite that record in the
   * persistent users object.  The current user pointer will also be
   * updated to reference the new profile.
   * @param {Object} p The profile to save
   */
  function saveProfile(p){
    if (!p || !p.username) return;
    var users = loadUsers();
    users[p.username] = p;
    saveUsers(users);
    setCurrentUser(p.username);
  }

  /**
   * Load the profile for the currently logged in user.  If no user is
   * logged in, returns null.
   * @returns {Object|null} The active user profile
   */
  function loadProfile(){
    var users = loadUsers();
    var u = getCurrentUser();
    return u && users[u] ? users[u] : null;
  }

  /**
   * Persistent storage for comments.  Each comment includes the
   * username of the posting account along with any uploaded image
   * data, destination, optional display name and message text.  Saving
   * comments to localStorage ensures they remain visible after page
   * reloads.
   */
  function loadComments(){
    try {
      return JSON.parse(getStorageItem('commentsV2') || '[]');
    } catch(_){ return []; }
  }
  function saveComments(c){
    try {
      setStorageItem('commentsV2', JSON.stringify(c));
    } catch(_){ /* ignore */ }
  }

  var joinBtn = $('join-btn');
  var overlay = $('join-overlay');
  var joinForm = $('join-form');
  var cancelBtn = $('join-cancel');
  var profileCard = $('profile-card');
  var profilePhoto = $('profile-photo');
  var profileUsername = $('profile-username');
  var profileFrom = $('profile-from');
  var profileGreeting = $('profile-greeting');
  var logoutBtn = $('logout-btn');

  var commentForm = $('comment-form');
  var commentPhoto = $('comment-photo');
  var commentText = $('comment-text');
  var commentsDisplay = $('comments-display');
  // New buttons for account maintenance
  var deletePhotoBtn = $('delete-photo-btn');
  var deleteProfileBtn = $('delete-profile-btn');

  // Elements for the login modal
  var loginBtn = $('login-btn');
  var loginOverlay = $('login-overlay');
  var loginForm = $('login-form');
  var loginCancel = $('login-cancel');

  // Helper to open/close the login modal
  function openLogin(){ if (loginOverlay){ loginOverlay.classList.remove('hidden'); loginOverlay.classList.add('flex'); } }
  function closeLogin(){ if (loginOverlay){ loginOverlay.classList.add('hidden'); loginOverlay.classList.remove('flex'); } }

  function openOverlay(){ if (overlay){ overlay.classList.remove('hidden'); overlay.classList.add('flex'); } }
  function closeOverlay(){ if (overlay){ overlay.classList.add('hidden'); overlay.classList.remove('flex'); } }

  function applyProfileUI(){
    var p = loadProfile();
    if (!profileCard) return;
    if (p){
      profileCard.classList.remove('hidden');
      profileUsername && (profileUsername.textContent = p.username || '');
      profileFrom && (profileFrom.textContent = p.from || '');
      profileGreeting && (profileGreeting.textContent = p.greeting || '');
      if (p.photoDataUrl){
        if (profilePhoto){
          profilePhoto.src = p.photoDataUrl;
          profilePhoto.classList.remove('hidden');
        }
        // Show delete photo button when a picture is present
        if (deletePhotoBtn) deletePhotoBtn.classList.remove('hidden');
      } else {
        if (profilePhoto){ profilePhoto.src = ''; profilePhoto.classList.add('hidden'); }
        // Hide delete photo button when no picture is present
        if (deletePhotoBtn) deletePhotoBtn.classList.add('hidden');
      }
    } else {
      profileCard.classList.add('hidden');
    }
  }

  // Modal handlers
  joinBtn && joinBtn.addEventListener('click', openOverlay);
  cancelBtn && cancelBtn.addEventListener('click', closeOverlay);
  // When a user submits the join form we create a new account.  If the
  // username already exists, they are prompted to log in instead.  A
  // password is mandatory for new accounts.
  joinForm && joinForm.addEventListener('submit', function(e){
    e.preventDefault();
    var username = (document.getElementById('join-username').value || '').trim();
    var password = (document.getElementById('join-password').value || '').trim();
    var from = (document.getElementById('join-from').value || '').trim();
    var greeting = (document.getElementById('join-greeting').value || '').trim();
    var file = document.getElementById('join-photo').files[0];
    if (!username){ alert('Please enter a username.'); return; }
    if (!password){ alert('Please enter a password.'); return; }
    var users = loadUsers();
    if (users[username]){
      alert('That username is already taken. Please log in instead.');
      closeOverlay();
      openLogin();
      return;
    }
    function finish(url){
      var profileObj = { username: username, password: password, from: from, greeting: greeting, photoDataUrl: url || '' };
      saveProfile(profileObj);
      closeOverlay();
      applyProfileUI();
      renderComments();
    }
    if (file){
      if (!file.type || file.type.indexOf('image/') !== 0){ alert('Please select an image file.'); return; }
      // Use the robust file reader helper.  Fallbacks are handled inside readFileAsDataURL.
      readFileAsDataURL(file, function(data){ finish(data); }, function(){ alert('Could not read the selected image.'); });
    } else {
      finish('');
    }
  });

  // Handle login submission.  Existing users provide their credentials
  // and are authenticated against stored records.  A successful login
  // updates the active profile and refreshes the comments display.
  loginBtn && loginBtn.addEventListener('click', openLogin);
  loginCancel && loginCancel.addEventListener('click', closeLogin);
  loginForm && loginForm.addEventListener('submit', function(e){
    e.preventDefault();
    var username = (document.getElementById('login-username').value || '').trim();
    var password = (document.getElementById('login-password').value || '').trim();
    var users = loadUsers();
    if (!users[username] || users[username].password !== password){
      alert('Invalid username or password.');
      return;
    }
    setCurrentUser(username);
    applyProfileUI();
    renderComments();
    closeLogin();
  });

  // Clicking the logout button clears the current user but retains their
  // account information in storage.  Comments remain visible to other
  // visitors and the page re-renders accordingly.
  logoutBtn && logoutBtn.addEventListener('click', function(){
    clearCurrentUser();
    applyProfileUI();
    renderComments();
  });

  // Allow the user to remove their profile photo.  This clears the
  // photoDataUrl field in their profile and updates any existing
  // comments they have posted so that the header image disappears.
  deletePhotoBtn && deletePhotoBtn.addEventListener('click', function(){
    var p = loadProfile();
    if (!p) return;
    if (!confirm('Delete your profile photo?')) return;
    p.photoDataUrl = '';
    saveProfile(p);
    // Update the profilePhoto for all comments authored by this user
    var comments = loadComments();
    var updated = false;
    comments.forEach(function(c){
      if (c.username === p.username){
        c.profilePhoto = '';
        updated = true;
      }
    });
    if (updated) saveComments(comments);
    applyProfileUI();
    renderComments();
  });

  // Allow the user to delete their entire account.  This removes the
  // user record, clears the current user pointer and deletes all
  // comments authored by them.  It asks for confirmation before
  // performing the destructive action.
  deleteProfileBtn && deleteProfileBtn.addEventListener('click', function(){
    var p = loadProfile();
    if (!p) return;
    if (!confirm('Delete your profile and all your posts? This cannot be undone.')) return;
    // Remove the user from the users object
    var users = loadUsers();
    if (users[p.username]){
      delete users[p.username];
      saveUsers(users);
    }
    // Remove their comments
    var comments = loadComments();
    var filtered = comments.filter(function(c){ return c.username !== p.username; });
    if (filtered.length !== comments.length){ saveComments(filtered); }
    // Clear current user pointer
    clearCurrentUser();
    applyProfileUI();
    renderComments();
  });

  // Gate post submit: must be joined + require 1 image & non-empty comment
  if (commentForm){
    commentForm.addEventListener('submit', function(e){
      var p = loadProfile();
      if (!p){
        // Determine whether there are any existing accounts.  If there
        // are, direct the user to log in; otherwise prompt them to
        // create a profile.  Prevent further submit handlers from
        // executing until they authenticate.
        e.preventDefault();
        e.stopImmediatePropagation();
        var users = loadUsers();
        var hasUsers = Object.keys(users).length > 0;
        if (hasUsers){
          openLogin();
        } else {
          openOverlay();
        }
        return;
      }
      var file = commentPhoto && commentPhoto.files ? commentPhoto.files[0] : null;
      var text = commentText ? (commentText.value || '').trim() : '';
      if (!file){ e.preventDefault(); e.stopImmediatePropagation(); alert('Please add exactly one picture.'); return; }
      if (!text){ e.preventDefault(); e.stopImmediatePropagation(); alert('Please add a comment.'); return; }
      // Otherwise, let the page's original submit handler run and new handler will persist the post
    }, true);
  }

  /**
   * Render all stored comments to the page.  The most recent posts
   * appear first.  Each card includes a profile header showing the
   * username, origin and greeting of the author.  If the current
   * visitor is the author of the post they also see a delete link.
   */
  function renderComments(){
    if (!commentsDisplay) return;
    var comments = loadComments();
    // Clear existing elements before re-rendering
    commentsDisplay.innerHTML = '';
    var currentUser = getCurrentUser();
    // Iterate from the end so that newer comments appear first
    comments.slice().reverse().forEach(function(c, idx){
      var card = document.createElement('div');
      card.className = 'p-4 bg-white rounded-lg shadow-xl border border-gray-200 transform transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl';
      // Header
      var header = document.createElement('div');
      header.className = 'flex items-center mb-2';
      var headerHTML = '';
      if (c.profilePhoto){
        headerHTML += '<img src="'+ c.profilePhoto +'" class="w-10 h-10 rounded-full object-cover border border-gray-300 mr-2" alt="Profile">';
      }
      headerHTML += '<div class="text-sm"><div class="font-semibold">'+ (c.username || '') +'</div>';
      if (c.from){ headerHTML += '<div class="text-gray-600">'+ c.from +'</div>'; }
      if (c.greeting){ headerHTML += '<div class="text-gray-700">'+ c.greeting +'</div>'; }
      headerHTML += '</div>';
      header.innerHTML = headerHTML;
      card.appendChild(header);
      // Uploaded photo
      if (c.photo){
        // Wrap the image in a container that enforces one of the allowed aspect ratios.
        // The actual image is set to object-contain so the entire picture is visible
        // without cropping or stretching.  The aspect ratio of the wrapper is chosen
        // based on the natural dimensions of the uploaded image.
        var wrap = document.createElement('div');
        // Wrapper for the uploaded image.  Give it a reduced width and centered positioning
        // so that uploaded photos consume less space on the page (about a quarter of the
        // previous area) while still preserving the chosen aspect ratio.  The aspect
        // ratio is set later based on the natural dimensions of the image.
        wrap.className = 'relative w-full rounded mb-3 overflow-hidden';
        // Reduce the overall footprint of the image by setting the wrapper's width to
        // half of the available width.  Combined with the aspect ratio height, this
        // yields roughly one‑quarter of the original area.  Center the wrapper using
        // auto margins on the left and right.
        wrap.style.width = '50%';
        wrap.style.marginLeft = 'auto';
        wrap.style.marginRight = 'auto';
        var img = document.createElement('img');
        img.src = c.photo;
        img.alt = 'User uploaded photo';
        img.className = 'absolute inset-0 w-full h-full object-contain';
        img.onload = function(){
          try {
            var w = img.naturalWidth || 1;
            var h = img.naturalHeight || 1;
            var ratio = w / h;
            var choices = [ {r: 3/2, str:'3 / 2'}, {r: 4/3, str:'4 / 3'}, {r: 1, str:'1 / 1'}, {r: 16/9, str:'16 / 9'} ];
            var best = choices[0];
            var minDiff = Math.abs(ratio - choices[0].r);
            for (var i=1; i<choices.length; i++){
              var diff = Math.abs(ratio - choices[i].r);
              if (diff < minDiff){
                minDiff = diff;
                best = choices[i];
              }
            }
            wrap.style.aspectRatio = best.str;
          } catch(_){}
        };
        wrap.appendChild(img);
        card.appendChild(wrap);
      }
      // Country
      var countryEl = document.createElement('p');
      countryEl.className = 'text-sm text-gray-500 mb-1';
      countryEl.textContent = c.country || '';
      card.appendChild(countryEl);
      // Display name
      var nameEl = document.createElement('h4');
      nameEl.className = 'font-semibold text-lg mb-1';
      nameEl.textContent = c.name || 'Anonymous';
      card.appendChild(nameEl);
      // Comment text
      var textEl = document.createElement('p');
      textEl.className = 'text-gray-700';
      textEl.textContent = c.text || '';
      card.appendChild(textEl);
      // Delete button for owner
      if (currentUser && currentUser === c.username){
        var delWrap = document.createElement('div');
        delWrap.className = 'flex justify-end';
        var delBtn = document.createElement('button');
        delBtn.type = 'button';
        delBtn.className = 'delete-comment-btn text-red-600 text-sm underline mt-3';
        delBtn.textContent = 'Delete';
        (function(index){
          delBtn.addEventListener('click', function(){
            if (!confirm('Delete this post?')) return;
            var arr = loadComments();
            // Indexing relative to reversed order: arr.length - 1 - index
            arr.splice(arr.length - 1 - index, 1);
            saveComments(arr);
            renderComments();
          });
        })(idx);
        delWrap.appendChild(delBtn);
        card.appendChild(delWrap);
      }
      commentsDisplay.appendChild(card);
    });
  }

  /**
   * Intercept the default comment submission and persist the post.  The
   * gating handler ensures the user is logged in and that an image and
   * comment text are present.  Here we capture the image data
   * (converted to a data URL) along with the comment and author
   * details, append it to localStorage and re-render the comment
   * list.
   */
  function handleNewComment(e){
    e.preventDefault();
    var p = loadProfile();
    if (!p) return;
    var nameInput = document.getElementById('comment-name');
    var countryInput = document.getElementById('comment-country');
    var name = nameInput ? (nameInput.value || '').trim() : '';
    var country = countryInput ? countryInput.value : '';
    var text = commentText ? (commentText.value || '').trim() : '';
    var file = commentPhoto && commentPhoto.files ? commentPhoto.files[0] : null;
    function finishComment(imgUrl){
      var comments = loadComments();
      comments.push({
        username: p.username,
        from: p.from,
        greeting: p.greeting,
        profilePhoto: p.photoDataUrl || '',
        name: name || 'Anonymous',
        country: country,
        text: text,
        photo: imgUrl || null
      });
      saveComments(comments);
      renderComments();
      // Reset form fields
      commentForm.reset();
      // Reset country dropdown to the currently selected destination
      var cs = document.getElementById('country-select');
      if (countryInput && cs){ countryInput.value = cs.value; }
    }
    if (file){
      // Use the robust file reader helper to obtain a Data URL.  If both FileReader and the
      // fallback mechanism fail, alert the user.
      readFileAsDataURL(file, function(data){ finishComment(data); }, function(){ alert('Could not read the selected image.'); });
    } else {
      finishComment(null);
    }
  }

  /*
   * The old augmentCards helper and MutationObserver have been removed.  Each
   * comment card is now fully rendered with its own profile header when
   * comments are (re)drawn, so there is no need to inject header markup
   * after the fact.
   */

  document.addEventListener('DOMContentLoaded', function(){
    // One-time migration of legacy profileV2 to the new usersV2/currentUser
    try {
      var legacy = getStorageItem('profileV2');
      if (legacy){
        var oldProfile = JSON.parse(legacy);
        if (oldProfile && oldProfile.username){
          var users = loadUsers();
          if (!users[oldProfile.username]){
            // Migrate to a blank password for legacy profiles
            users[oldProfile.username] = Object.assign({}, oldProfile, { password: '' });
            saveUsers(users);
          }
          setCurrentUser(oldProfile.username);
        }
        removeStorageItem('profileV2');
      }
    } catch(_){ /* ignore malformed legacy data */ }

    // Remove the old comment handler if it exists.  handleCommentSubmit is
    // defined in the outer script so we can reference it here.
    try {
      if (commentForm && typeof handleCommentSubmit === 'function'){
        commentForm.removeEventListener('submit', handleCommentSubmit);
      }
    } catch(_){}

    // Attach our persistent comment handler
    if (commentForm){ commentForm.addEventListener('submit', handleNewComment, false); }

    applyProfileUI();
    renderComments();
  });
})();
</script>
    <script>
      // Hide social links pop-up when clicking outside of the logo or the pop-up
      document.addEventListener('click', function(event) {
        const social = document.getElementById('social-links');
        const logo = document.querySelector('#hero img[alt="Good People n Places logo"]');
        // Only proceed if the social panel exists and is visible
        if (social && !social.classList.contains('hidden')) {
          // If the click happened outside both the social panel and the logo, hide the panel
          if (!social.contains(event.target) && !(logo && logo.contains(event.target))) {
            social.classList.add('hidden');
          }
        }
      });
    </script>
</body>
</html>
